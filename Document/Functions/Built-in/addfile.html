<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/addfile.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:18:08 GMT -->
<head>
<meta name="description" content="NCL built-in functions (file io)">
<meta name="keywords" content="addfile">
<title>addfile</title>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="../../../styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="../../../scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="../../../scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="../../../internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="../../../Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="../../../citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="../../../contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="../../Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="../../../index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="../../Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="../../../overview.html" class="subitem">Overview</a></li>
						<li><a href="../../../get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="../../../gallery.html" class="subitem">Gallery</a></li>
						<li><a href="../../../Download/index.html" class="subitem">Download</a></li>
						<li><a href="../../../current_release.html" class="subitem">What's New</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>						
						<li><a href="../../../citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="../../../Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="../../../Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="../../../Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="../../../Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="../../../Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="../../../Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="../../../Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="../../../Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="../../../Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="../../../Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="../../../Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="../../../Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="../../../Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="../list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="../list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="../index.html" class="subitem">Category Listing</a></li>
						<li><a href="../list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="../../Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="../../Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="../../Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="../../Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="../../Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="../../Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="../../Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="../../Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="../../Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="../../Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="../../Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="../../Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="../../Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="../../Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="../../Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="../../Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="../../Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="../../Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="../../Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="../../Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="../../Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="../../Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="../../Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="../../Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="../../Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="../../Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="../../Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="../../Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="../../Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="../../../links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="../../Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="../../Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="../../Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="../../Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="../../Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="../../Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="../../Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="../../../Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="../../Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="../../Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="../../Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="../../Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="../../../announcements.html" class="subitem">Announcements</a></li>
						<li><a href="../../../current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="../../../new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="../../../future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="../../../prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="../../../Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="../../../Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="../../../Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="../../Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="../../Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="../../../Training/index.html" class="subitem">Training</a></li>
						<li><a href="../../../Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="../../../Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>
						<li><a href="../../../FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="../../../ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="../../../report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="../../../index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">
<a class=crumb href="../../../index-2.html">NCL Home ></a>
<a class=crumb href="../../index-2.html">Documentation ></a>
<a class=crumb href="../index-2.html">Functions ></a>
<a class=crumb href="../io.html">File I/O</a>
<br>
<h1>addfile</h1>

<p>
Opens a data file that is (or is to be) written in a <a href="../../Manuals/Ref_Manual/NclFormatSupport.html">supported file format</a>.
</p>

<a name="Prototype"></a>
<h2>Prototype</h2>
<pre>
	function addfile (
		file_path [1] : string,  
		status    [1] : string   
	)

	<a href="../return_val.html">return_val</a> [1] :  file
</pre>
<a name="Arguments"></a>
<h2>Arguments</h2>
<em>file_path</em>
<p class=indent>The full or relative path of the data file to load.
</p>
<em>status</em>
<p class=indent>Specifies whether the file should be opened as a read only file or as
a read-write file.
</p>
<a name="Description"></a>
<h2>Description</h2>
<p>
The <strong>addfile</strong> function returns a file variable reference to the
file specified by the <em>file_path</em> argument. The <em>file_path</em> string 
must contain the full or relative path of a file with data in a <a href="../../Manuals/Ref_Manual/NclFormatSupport.html">supported format</a> as well as an extension
(a suffix consisting of the final characters following the last dot) that indicates the
expected format. The extension is required even though it need not be part of
the actual filename. The currently supported formats, valid status values, and accepted extensions are:

<dl>
<dt>NetCDF ("r", "w", "c")</dt>
<dd>".nc", ".cdf", ".netcdf"</dd>
<p>

<dt>GRIB versions 1 and 2 ("r")
<dd>".gr", ".gr1", ".grb", ".grib", ".grb1", ".grib1", ".gr2", "grb2", ".grib2"
<p>
(<b><i>GRIB2 support available in versions <a href="../../../prev_releases.html#4.3.0">4.3.0</a> or later.</i> </b>)
</dd>

<p>

<dt>HDF-4 ("r", "w", "c")</dt>
<dd>".hdf", ".hd"</dd>
<p>

<dt>HDFEOS ("r")</dt>
<dd>".hdfeos", "he2", "he4"</dd>
<p>

<dt>HDF5 ("r", "w")</dt>
<dd>".h5"
<p>
(<b><i>Limited HDF5 support available in versions <a href="../../../prev_releases.html#6.0.0">6.0.0</a> or later.</i> </b>)
</dd>
<p>

<dt>HDFEOS5 ("r")</dt>
<dd>".he5"</dd>
<p>

<dt>CCM ("r")</dt>
<dd>".ccm"</dd>
<p>

<dt>Shapefile ("r")</dt>
<dd>".shp" (Shapefile), ".mif" (MapInfo), ".gmt" (Generic Mapping Tools), ".rt1" (TIGER)<p>
(<b><i>Support for Shapefiles and other geospatial vector-data formats
is available in versions <a
href="../../../prev_releases.html#5.1.1">5.1.1</a> or later. Shapefile
support may not be available on all systems.</i></b>)

</dd>
</dl><p>

<strong>addfile</strong> handles these extensions 
in a case-insensitive manner: ".grib", ".GRIB", and ".Grib" all 
indicate a GRIB file.<p>

The <em>status</em> parameter can be either "r" for read-only, "w" for
read-write or "c" for create. When "c" is set, assuming the user has
permissions to write in the specified directory and the format is
writable, the file is created if it does not exist. If it does exist,
an error message is printed and the default missing value for files is
returned. When "w" is set, if the file exists, is in a writable format, and
has permissions allowing read/write access, the file is opened for reading and
writing. If any of these conditions fail, an error message is reported
and the default file missing value is returned. Similarly, when "r" is
set, if the file exists and has permissions allowing read access, the file
is opened for reading; otherwise an error message is printed and the default
missing value is returned. See the <a href="ismissing.html"><strong>ismissing</strong></a>
function on how to detect the returned missing value in a program.<p>

Use <a href="addfiles.html"><strong>addfiles</strong></a> to reference multiple data files.<P>

<b>Important note:</b> Use the <a href="setfileoption.html"><strong>setfileoption</strong></a>
procedure to set various options for reading and writing these
supported formats. For example, this procedure is critical if you 
need to read/write large variables from/to a NetCDF file, use NetCDF-4 features,
or create NetCDF files using the fast and efficient method.  See the
examples  section of the <a href="setfileoption.html"><strong>setfileoption</strong></a> documentation
for more information.
<p>

There are several functions available for querying what's on the file:
<p>

<ul>

<li><a href="getvaratts.html"><strong>getvaratts</strong></a> - return a list of global
attributes on the file 

<li><a href="getfiledimsizes.html"><strong>getfiledimsizes</strong></a> - return a list of dimension sizes

<li><a href="getfilevaratts.html"><strong>getfilevaratts</strong></a> - return a list of attributes
associated with a given variable on the file

<li><a href="getfilevardims.html"><strong>getfilevardims</strong></a> - return a list of dimension names
associated with a given variable on the file

<li><a href="getfilevardimsizes.html"><strong>getfilevardimsizes</strong></a> - return a list of dimension
sizes associated with a given variable on the file

<li><a href="getfilevarnames.html"><strong>getfilevarnames</strong></a> - return a list of
variable names on the file

<li><a href="getfilevartypes.html"><strong>getfilevartypes</strong></a> - return a list of variable
types for the given variable(s) on the file

</ul>
<p>

<b>Older GRIB2 backwards incompatibility note:</b> in
version <a href="../../../prev_releases.html#5.2.0">5.2.0</a>, the GRIB2 code
tables were extensively revised to bring them up-to-date with the
currently documented state of the parameter tables primarily as
defined by NCEP. This may cause some backwards incompatibility
issues. For more information and a work-around, see the
"<a href="../../Manuals/Ref_Manual/NclFormatSupport.html#GRIB2Incompatibility">GRIB2
backwards incompatibility alert</a>" section in
the <a href="../../Manuals/Ref_Manual/index.html">NCL Reference Manual</a>.
<p>



</p><a name="See_also"></a>
<h2>See Also</h2>
<p>
<a href="addfiles.html"><strong>addfiles</strong></a>,
<a href="setfileoption.html"><strong>setfileoption</strong></a>,
<a href="getvaratts.html"><strong>getvaratts</strong></a>,
<a href="getfiledimsizes.html"><strong>getfiledimsizes</strong></a>,
<a href="getfilevaratts.html"><strong>getfilevaratts</strong></a>,
<a href="getfilevardims.html"><strong>getfilevardims</strong></a>,
<a href="getfilevardimsizes.html"><strong>getfilevardimsizes</strong></a>,
<a href="getfilevarnames.html"><strong>getfilevarnames</strong></a>,
<a href="getfilevartypes.html"><strong>getfilevartypes</strong></a>,
<a href="isfile.html"><strong>isfile</strong></a>,
<a href="isfilepresent.html"><strong>isfilepresent</strong></a>,
<a href="isfilevar.html"><strong>isfilevar</strong></a>,
<a href="isfilevaratt.html"><strong>isfilevaratt</strong></a>,
<a href="isfilevarcoord.html"><strong>isfilevarcoord</strong></a>
</p><a name="Examples"></a>
<h2>Examples</h2>
<p>
Below are some basic examples for using <strong>addfile</strong> for
reading and writing various supported formats.  For more extensive
examples, see the <a href="../../../Applications/list_io.html">File I/O</a>
section of the <a href="../../../Applications/index.html">Applications</a> page.<p>

<B>Example 1</B><P>

Open a netCDF file called "ex01B1_uv300.hs.nc" as read-only and print
its contents:

<PRE>
  a = <strong>addfile</strong>("ex01B1_uv300.hs.nc","r")
  <a href="print.html"><strong>print</strong></a>(a)                      
</PRE>

<B>Example 2</B><P>

Open a GRIB 2 file called "fh.0000_tl.press_gr.awp218" and print
its contents:

<PRE>
  a = <strong>addfile</strong>("fh.0000_tl.press_gr.awp218.grb","r")
  <a href="print.html"><strong>print</strong></a>(a)                      
</PRE>

Note that the file name itself contains no extension indicating the
format, but that the extension ".grb" is added to the <em>file_path</em>
argument. Also note, in the case of GRIB, that you do not need to indicate
whether the file is GRIB 1 or GRIB 2. NCL treats all the acceptable GRIB 
extensions as meaning the same thing. The GRIB version is determined internally.<p>


<B>Example 3</B><P>

In order to write large variables (>2GB) to a NetCDF file, you must use
<a href="setfileoption.html"><strong>setfileoption</strong></a> to set the the NetCDF <i>Format</i>
option to <i>LargeFile</i> or <i>NetCDF4Classic</i> before you open
the file for creation:

<pre>
   <a href="setfileoption.html"><strong>setfileoption</strong></a>("nc","Format","LargeFile")
   f = <strong>addfile</strong>("my_large_file.nc","c")
</pre>
or
<pre>
   <a href="setfileoption.html"><strong>setfileoption</strong></a>("nc","Format","NetCDF4Classic")
   f = <strong>addfile</strong>("my_large_file.nc","c")
</pre>
<p>
It might be asked "Why cannot NCL set this option internally when asked to write a big variable." The answer is that the NetCDF library requires that this decision must be made when the file is first created, before there is any knowledge of the size of variables that will be written. It is possible that eventually the largefile format will be the default NetCDF format, but so far the recommendation from Unidata is to maintain backwards compatibility where possible for applications that can only deal with the original small file format of NetCDF.

<p>


<B>Example 4</B><P>

Here's an example that shows how to access a file being served by an
<a href="../../../Applications/opendap.html">OPeNDAP</a> server, and
to test if your version of NCL has OPeNDAP capability built into it:

<pre>
begin
;---Path to file served by OPeNDAP server at NOAA
  url      = "http://www.esrl.noaa.gov/psd/thredds/dodsC/Datasets/ncep.reanalysis.dailyavgs/pressure/"
  filename = "air.1948.nc"

  exists = <a href="isfilepresent.html"><strong>isfilepresent</strong></a>(url+filename)
  if(.not.exists) then
    <a href="print.html"><strong>print</strong></a>("OPeNDAP test unsuccessful.")
    <a href="print.html"><strong>print</strong></a>("Either the file doesn't exist, or NCL does")
    <a href="print.html"><strong>print</strong></a>("not have OPeNDAP cabilities on this system.")
  else
    f = <strong>addfile</strong>(url + filename,"r")
    vnames = <a href="getfilevarnames.html"><strong>getfilevarnames</strong></a>(f)
    <a href="print.html"><strong>print</strong></a>(vnames)     ; should be (/"air","time","lon","lat","level"/)
  end if
end 
</pre>
<p>

<B>Example 5</B><P>

Change values and meta data of a variable using the <b>"w"</b> status option. 
<p>
<PRE>
  a = <strong>addfile</strong>("foo.nc",<b>"w"</b>)

  t = a->TEMP               ; degC
  t = t + 273.15            ; change values
  t@units = "degK"          ; update appropriate attribute

  a->TEMP = t               ; overwrite
</PRE>

<B>Example 6</B><P>

<strong>addfile</strong> can modify a variable in a netCDF file,
and/or add new variables to it.  The script below reads u,v from a file;
changes their values; updates the units attribute; creates a new variable 
(spd) adds attributes; and, finally, writes them out.

<PRE>

  f = <strong>addfile</strong>("foo.nc",<b>"w"</b>)

  u = f->U                          ; units  m/s
  v = f->V

  u = 3.2808399 * u                 ; change values (m/s to ft/s)
  v = 3.2808399 * v

  u@units = "ft/s"                  ; update attribute
  v@units = "ft/s"
                                    ; create new variable
  spd = <a href="sqrt.html"><strong>sqrt</strong></a>(u^2 + v^2)

  spd@long_name  = "Wind Speed"
  spd@short_name = "Speed"
  spd@units      = "ft/s"

  f->U = u                          ; write to file (overwrite)
  f->V = v
                                    ; define appropriate information
  <a href="filevardef.html"><strong>filevardef</strong></a>(f, "SPD", <a href="typeof.html"><strong>typeof</strong></a>(u), <a href="getvardims.html"><strong>getvardims</strong></a>(u))
  f->SPD = spd                      ; write new variable

</PRE>


<B>Example 7</B><P>

Read in a CCM History Tape (.ccm) and write its contents to a netCDF
(.nc) file:

<PRE>
begin
  fname  = "01-11"                       ; file name
  ccmf   = <strong>addfile</strong>(fname+".ccm","r")     ; open CCM for reading
  <a href="system.html"><strong>system</strong></a> ("rm "+fname+".nc")             ; remove any pre-existing file
  ncdf   = <strong>addfile</strong>(fname+".nc","c")      ; create new netCDF file

  att_names = <a href="getvaratts.html"><strong>getvaratts</strong></a>(ccmf)           ; get CCM file's global attributes
  if(.not.<a href="all.html"><strong>all</strong></a>(<a href="ismissing.html"><strong>ismissing</strong></a>(att_names))) then
    do i = 0,<a href="dimsizes.html"><strong>dimsizes</strong></a>(att_names)-1
      <a href="print.html"><strong>print</strong></a>("copy_fileatts: global attributes->" + att_names(i))
      ncdf@$att_names(i)$ = ccmf@$att_names(i)$     ; copy CCM file's global attributes
    end do
  end if
 
  names = <a href="getfilevarnames.html"><strong>getfilevarnames</strong></a>(ccmf)       ; get CCM file's variable names and print them
  <a href="print.html"><strong>print</strong></a> (names)
;
; loop over variables and copy to netCDF file
;
  do i=0, <a href="dimsizes.html"><strong>dimsizes</strong></a>(names)-1
    <a href="print.html"><strong>print</strong></a>("writing ncdf: i,name="+ i+ "   "+ names(i))
    ncdf->$names(i)$ = ccmf->$names(i)$
  end do

  <a href="print.html"><strong>print</strong></a> (ncdf)      ; print overview of contents of netCDF file
end
</PRE>
</p>					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->
</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/addfile.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:18:08 GMT -->
</html>
