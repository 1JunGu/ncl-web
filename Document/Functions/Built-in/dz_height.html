<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/dz_height.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:18:25 GMT -->
<head>
<meta name="description" content="NCL built-in functions (cesm)">
<meta name="keywords" content="dz_height">
<title>dz_height</title>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="../../../styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="../../../scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="../../../scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="../../../internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="../../../Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="../../../citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="../../../contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="../../Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="../../../index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="../../Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="../../../overview.html" class="subitem">Overview</a></li>
						<li><a href="../../../get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="../../../gallery.html" class="subitem">Gallery</a></li>
						<li><a href="../../../Download/index.html" class="subitem">Download</a></li>
						<li><a href="../../../current_release.html" class="subitem">What's New</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>						
						<li><a href="../../../citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="../../../Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="../../../Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="../../../Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="../../../Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="../../../Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="../../../Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="../../../Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="../../../Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="../../../Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="../../../Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="../../../Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="../../../Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="../../../Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="../list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="../list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="../index.html" class="subitem">Category Listing</a></li>
						<li><a href="../list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="../../Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="../../Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="../../Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="../../Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="../../Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="../../Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="../../Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="../../Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="../../Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="../../Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="../../Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="../../Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="../../Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="../../Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="../../Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="../../Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="../../Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="../../Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="../../Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="../../Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="../../Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="../../Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="../../Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="../../Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="../../Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="../../Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="../../Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="../../Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="../../Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="../../../links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="../../Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="../../Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="../../Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="../../Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="../../Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="../../Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="../../Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="../../../Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="../../Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="../../Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="../../Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="../../Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="../../../announcements.html" class="subitem">Announcements</a></li>
						<li><a href="../../../current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="../../../new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="../../../future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="../../../prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="../../../Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="../../../Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="../../../Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="../../Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="../../Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="../../../Training/index.html" class="subitem">Training</a></li>
						<li><a href="../../../Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="../../../Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>
						<li><a href="../../../FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="../../../ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="../../../report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="../../../index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">
<a class=crumb href="../../../index-2.html">NCL Home ></a>
<a class=crumb href="../../index-2.html">Documentation ></a>
<a class=crumb href="../index-2.html">Functions ></a>
<a class=crumb href="../cesm.html">CESM</a>
<br>
<h1>dz_height</h1>

<p>
Calculates the height layer thicknesses at each grid point over varying surface terrain.
</p>

<a name="Prototype"></a>
<h2>Prototype</h2>
<pre>
	function dz_height (
		z        : numeric,  
		zsfc     : numeric,  
		ztop [1] : numeric,  
		iopt     : integer   
	)

	<a href="../return_val.html">return_val</a>  :  numeric
</pre>
<a name="Arguments"></a>
<h2>Arguments</h2>
<em>z</em>
<p class=indent>An array of at least three dimensions. The rightmost dimensions must be
(klvl,nlat,mlon). Dimensions to the left of klvl are optional. The values
at each grid point must be monotonically increasing or decreasing but 
may be unequally spaced.
</p>
<em>zsfc</em>
<p class=indent>A scalar or an array containing the surface height.
Must have the same units as <em>z</em>.
The rightmost dimensions must be latitude and longitude, 
eg: (nlat,mlon).  Dimensions to the left of nlat are optional.
If present, they must match the dimensions of <em>z</em>.
</p>
<em>ztop</em>
<p class=indent>A scalar specifying the top of the column. Must be greater-than or equal to 0.0
and must have the same units as <em>z</em>.
</p>
<em>iopt</em>
<p class=indent>Set to zero. Currently not used.
</p>
<a name="Return"></a>
<h2>Return value</h2>
<p>
A variable containing the layer "delta z". It will have the same shape
and size as <em>z</em>. It will be of type double if any of the input
is double and float otherwise.
</p><a name="Description"></a>
<h2>Description</h2>
<p>
Calculates the layer height thicknesses at each grid point over a vary surface elevations.  
It is analogous to <a href="dpres_hybrid_ccm.html"><strong>dpres_hybrid_ccm</strong></a> for hybrid coordinates
and <a href="dpres_plevel.html"><strong>dpres_plevel</strong></a> for constant pressure coordinates.
At each grid point the sum of the height thicknesses equates to 
[<em>ztop</em>-<em>zsfc</em>]. At each grid point,
the returned values above <em>ztop</em> and below <em>zsfc</em>
will be set to <em>z</em>@_FillValue. If there is no 
<em>zsfc</em>@_FillValue then the _FillValue will be set to the
default missing value for the output type (it is 1e20 in NCL
versions 5.2.x and earlier).

If <em>ztop</em>
or <em>zsfc</em> is between <em>z</em> levels then the layer thickness  
is modifed accordingly. If <em>zsfc</em> is set to _FillValue, all layer
thicknesses are set to the appropriate _FillValue.
<p>
The primary purpose of this function is to return
height layer thicknesses to be used to weight observations for integrations. 

</p><a name="See_also"></a>
<h2>See Also</h2>
<p>
<a href="dpres_hybrid_ccm.html"><strong>dpres_hybrid_ccm</strong></a>,<a href="dpres_plevel.html"><strong>dpres_plevel</strong></a>,
<a href="conform.html"><strong>conform</strong></a>,<a href="conform_dims.html"><strong>conform_dims</strong></a>
</p><a name="Examples"></a>
<h2>Examples</h2>
<p>
<b>Example 1</b> Consider one grid point and three different 
boundary <em>zsfc</em> and <em>ztop</em>: [0, 27000], [500, 27000],
[500,21500]. Currently, the function requires 3 or more dimensions. Hence,
this example requires some additional steps.

<pre>
  Z    = (/ 97.1,308.8,545.9,811.4,1108.8,1441.8,1814.8        \
          ,2232.6,2700.5,3224.6,3811.5,4468.9,5205.2,6029.8    \
          ,6953.4,7987.8,9146.3,10443.9,11897.2,13524.8,15357.1\
          ,17335.3,19339.7,21339.8,23339.8,25339.8/)*1d0
  kz   = <a href="dimsizes.html"><strong>dimsizes</strong></a>(Z) 

    ; make a 'fake' grid point for this example
  z    = <a href="conform_dims.html"><strong>conform_dims</strong></a>( (/kz,1,1/), Z, 0)     ; (kz,1,1)

  zsfc = 0 
  zsfc = 2700
  dz   = <strong>dz_height</strong>(z, zsfc, ztop, 0)  

</pre>
The output from the print statement is:
<pre>
                           0        500        500          
               <b>Z</B>       27000      27000      21500
        <b>--------------------------------------------</b>
(0)          97.1      202.9        0.0        0.0
(1)         308.8      224.4        0.0        0.0
(2)         545.9      251.3      178.7      178.7
(3)         811.4      281.5      281.5      281.5
(4)        1108.8      315.2      315.2      315.2
(5)        1441.8      353.0      353.0      353.0
(6)        1814.8      395.4      395.4      395.4
(7)        2232.6      442.8      442.8      442.8
(8)        2700.5      496.0      496.0      496.0
(9)        3224.6      555.5      555.5      555.5
(10)       3811.5      622.1      622.1      622.1
(11)       4468.9      696.9      696.9      696.9
(12)       5205.2      780.4      780.4      780.4
(13)       6029.8      874.1      874.1      874.1
(14)       6953.4      979.0      979.0      979.0
(15)       7987.8     1096.4     1096.4     1096.4
(16)       9146.3     1228.1     1228.1     1228.1
(17)      10443.9     1375.5     1375.5     1375.5
(18)      11897.2     1540.4     1540.4     1540.4
(19)      13524.8     1729.9     1729.9     1729.9
(20)      15357.1     1905.3     1905.3     1905.3
(21)      17335.3     1991.3     1991.3     1991.3
(22)      19339.7     2002.2     2002.2     2002.2
(23)      21339.8     2000.1     2000.1     1160.2
(24)      23339.8     2000.0     2000.0        0.0
(25)      25339.8     2660.2     2660.2        0.0
</pre>

<b>Example 2</b> Consider Z(lev,lat,lon), ZSFC and z(time,lev,lat,lon), zsfc(time,lat,lon):
<pre>

  zsfc = 2700
  DZ   = <strong>dz_height</strong>(Z, ZSFC, ztop, 0)   ; DZ(klev,nlat,mlon)  
  dz   = <strong>dz_height</strong>(z, zsfc, ztop, 0)   ; dz(ntim,klev,nlat,mlon)  

  <a href="../Contributed/copy_VarCoords.html"><strong>copy_VarCoords</strong></a>(Z,DZ)    ; copy coordinates 
  DZ@long_name = "layer thickness"
  DZ@units     = Z@units

  <a href="../Contributed/copy_VarCoords.html"><strong>copy_VarCoords</strong></a>(z,dz) 
  dz@long_name = "layer thickness"
  dz@units     = z@units
</pre>
</p>					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->
</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/dz_height.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:18:25 GMT -->
</html>
