<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/write_matrix.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:25 GMT -->
<head>
<meta name="description" content="NCL built-in functions (file io)">
<meta name="keywords" content="write_matrix">
<title>write_matrix</title>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="../../../styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="../../../scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="../../../scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="../../../internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="../../../Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="../../../citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="../../../contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="../../Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="../../../index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="../../Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="../../../overview.html" class="subitem">Overview</a></li>
						<li><a href="../../../get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="../../../gallery.html" class="subitem">Gallery</a></li>
						<li><a href="../../../Download/index.html" class="subitem">Download</a></li>
						<li><a href="../../../current_release.html" class="subitem">What's New</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>						
						<li><a href="../../../citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="../../../Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="../../../Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="../../../Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="../../../Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="../../../Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="../../../Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="../../../Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="../../../Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="../../../Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="../../../Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="../../../Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="../../../Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="../../../Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="../list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="../list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="../index.html" class="subitem">Category Listing</a></li>
						<li><a href="../list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="../../Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="../../Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="../../Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="../../Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="../../Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="../../Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="../../Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="../../Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="../../Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="../../Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="../../Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="../../Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="../../Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="../../Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="../../Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="../../Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="../../Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="../../Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="../../Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="../../Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="../../Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="../../Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="../../Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="../../Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="../../Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="../../Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="../../Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="../../Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="../../Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="../../../links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="../../Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="../../Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="../../Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="../../Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="../../Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="../../Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="../../Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="../../../Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="../../Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="../../Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="../../Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="../../Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="../../../announcements.html" class="subitem">Announcements</a></li>
						<li><a href="../../../current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="../../../new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="../../../future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="../../../prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="../../../Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="../../../Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="../../../Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="../../Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="../../Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="../../../Training/index.html" class="subitem">Training</a></li>
						<li><a href="../../../Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="../../../Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>
						<li><a href="../../../FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="../../../ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="../../../report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="../../../index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">
<a class=crumb href="../../../index-2.html">NCL Home ></a>
<a class=crumb href="../../index-2.html">Documentation ></a>
<a class=crumb href="../index-2.html">Functions ></a>
<a class=crumb href="../printing.html">Printing</a>,
<a class=crumb href="../io.html">File I/O</a>
<br>
<h1>write_matrix</h1>

<p>
Writes nicely-formatted integer, float, or double precision
two-dimensional (2D) arrays to standard out or to a file.
</p>

<a name="Prototype"></a>
<h2>Prototype</h2>
<pre>
	procedure write_matrix (
		data [*][*] : numeric,  ; integer, float, or double
		fmtf        : string,   
		option      : logical   
	)
</pre>
<a name="Arguments"></a>
<h2>Arguments</h2>
<em>data</em>
<p class=indent>The 2D array to be printed.
</p>
<em>fmtf</em>
<p class=indent>Format to be used, specified via Fortran style.  The format string
used must agree with the variable type.</p>
<p class=indent>
</p>
<em>option</em>
<p class=indent>If False, the data are written to standard out according to the
user specified format.</p>
<p class=indent>

If True, then this variable may have associated with it one or more of
the following attributes:</p>
<p class=indent>

<DL>
<DT><I>fout</I>
<DD>String specifying the output file name. If not present, the data
is sent to standard out. The maximum length of <I>fout</I> is 96
characters.
                       
<DT><I>title</I>
<DD>String specifying a title to be printed. If not present, no title
is printed.  (Default is <I>title</I>=" ".)
                         
<DT><I>tspace</I>
<DD>Integer specifying the number of spaces from left to skip prior to
printing title.  Only applicable if the <I>title</I> attribute is
present. If the <I>title</I> attribute is present and <I>tspace</I> is
not, then the title will be at the left edge. (Default is
<I>tspace</I> = 0.)
                         
<DT><I>row</I>
<DD>If <I>row</I>=True, then row numbers are printed. The maximum
number of lines is 99999.  If <I>row</I> is not present or
<I>row</I>=False, then no row numbers are printed.
    
</DL>
</p>
<a name="Description"></a>
<h2>Description</h2>
<p>
The <strong>write_matrix</strong> procedure provides the ability to
"pretty-print" a 2D array to a user-specified destination: either
standard out (the screen) or to a file. This procedure does <I>not</I>
have the ability to print individual row and column text labels.<P>
<p>

All standard Fortran edit descriptors are accepted. See any standard
Fortran text for more complete descriptions.<P>

In the following, <I>w</I> refers to the total width for each value.
The edit descriptor width, <I>w</I>, must include room for any minus
sign. All numbers are right-justified.<P>

<OL>

<LI>Integers may use 'I<I>w</I>/i<I>w</I>' or 'I<I>w</I>.m/i<I>w</I>.m'. 

<LI>Commonly used float and double edit descriptors include:

<BLOCKQUOTE>
'F<I>w</I>.<I>d</I>/f<I>w</I>.<I>d</I>'<BR>
'E<I>w</I>.<I>d</I>/e<I>w</I>.<I>d</I>'<BR>
'D<I>w</I>.<I>d</I>'<BR>
'G<I>w</I>.<I>d</I>/g<I>w</I>.<I>d</I>'
</BLOCKQUOTE>

where <I>d</I> represents the number of digits allocated to the
fractional part of value.<P>

</OL>

Sample edit descriptors (the <I>b</I> indicates a blank space):<P>

<PRE>
             Value     format       output  
               35       I2          35
               35       I5          <I>bbb</I>35
               45       i5.3        <I>bb</I>045
             -123       I5.1        <I>b</I>-123
             -123       i5.4        -0123
                1       I5.5        00001

             12.345     f8.3       <I>bb</I>12.345
             12.345     F8.1       <I>bbbb</I>12.3
            -12.345     f8.3       <I>b</I>-12.345
             12.355     F8.1       <I>bbbb</I>12.4    (note rounding of rightmost digit)
            -12.355     F8.1       <I>bbb</I>-12.4    (note rounding of rightmost digit)

             12.345     E11.5     0.12345E+02
             12.345     e11.4     <I>b</I>0.1235E+02
            -12.345     E11.5     -.12345E+02
            -12.345     e11.3     <I>b</I>-0.123E+02
</PRE>

All edit descriptors may be preceded by an integer that specifies the
number of times the descriptor is to be repeated at any row.  For
example, "9f12.5" means repeat the "f12.5" descriptor nine times.
Edit descriptors may also be combined so that different combinations
can be sent to the output destination.<P>

If the array to be output has a missing value [<a href="../../Language/fillval.html">_FillValue</a>] that can
not be accommodated within the width of the edit descriptor specified
by the user, then it is the user's responsibility to make a change
prior to invoking this procedure. This can be accomplished by changing
the _FillValue prior to the use of <strong>write_matrix</strong>.<P>
 
Use <a href="write_table.html"><strong>write_table</strong></a> if you want to write multiple
formatted variables to a file.
<p>


</p><a name="See_also"></a>
<h2>See Also</h2>
<p>
<a href="asciiwrite.html"><strong>asciiwrite</strong></a>, <a href="asciiread.html"><strong>asciiread</strong></a>,
<a href="write_table.html"><strong>write_table</strong></a>,
<a href="print_table.html"><strong>print_table</strong></a>
</p><a name="Examples"></a>
<h2>Examples</h2>
<p>
In examples 1-3, the <TT>x</TT> array is generated with:

<PRE>
  N    = 5    ; number of rows
  M    = 7    ; number of columns
  ave  = 0.0
  std  = 5.0
  x    = <a href="random_normal.html"><strong>random_normal</strong></a> (ave, std, (/N,M/))  
</PRE>

<B>Example 1</B><P>

Examples 1a-b produce the following output to standard out:<P>

<PRE>
   4.35   4.36   9.73   4.91   1.77  -0.63  -4.29
   4.39   4.66  -5.84   4.59   3.68 -14.12   0.07
   0.27   3.77   0.89  -3.09   5.08  -2.51   5.85
  -3.35  -1.66   8.46   7.55   0.14   1.76   0.87
  -6.90   4.06  10.39   4.56  -5.63  -1.43   8.65
</PRE>

<B>Example 1a</B><P>

<PRE>
  <strong>write_matrix</strong> (x, "7f7.2", False)
</PRE>

<B>Example 1b</B><P>

Dynamically specify the format string (<TT>fmtf</TT>): to account for
the size <TT>M</TT>:<P>

<PRE>
  fmtf   = M + "f7.2"                           ; same as "7f7.2"
; or
  fWidth = 7     ; specify the format width
  fDec   = 2     ; specify the number to the right of decimal point
  fmtf   = M + "f" + fWidth + "." + fDec        ; same as "7f7.2"

  <strong>write_matrix</strong> (x, fmtf, False)
</PRE>

<B>Example 2</B><P>

Examples 2a-b produce the following output:<P>

<PRE>
                      Normal
  
   4.35   4.36   9.73   4.91   1.77  -0.63  -4.29
   4.39   4.66  -5.84   4.59   3.68 -14.12   0.07
   0.27   3.77   0.89  -3.09   5.08  -2.51   5.85
  -3.35  -1.66   8.46   7.55   0.14   1.76   0.87
  -6.90   4.06  10.39   4.56  -5.63  -1.43   8.65
</PRE>

<B>Example 2a</B><P>

Write a user-specified title to standard out and specify the number of
spaces to be skipped before <TT>title</TT> is printed:<P>

<PRE>
   opt = True
   opt@title  = "Normal"
   opt@tspace = 22
   <strong>write_matrix</strong> (x, "7f7.2" , opt)
</PRE>

<B>Example 2b</B><P>

Dynamically calculate the value for <TT>tspace</TT>. This requires
that the length of the title string be known:<P>

<PRE>
   opt = True
   opt@title  = "Normal"
   opt@tspace = (M*fWidth - <a href="dimsizes.html"><strong>dimsizes</strong></a>(<a href="stringtochar.html"><strong>stringtochar</strong></a>(opt@title)))/2 + 1
   <strong>write_matrix</strong> (x, "7f7.2" , opt)
</PRE>

<B>Example 3</B><P>

Print out the row numbers for examples 2a-b. Here, 5 was added to
<TT>tspace</TT> to account for the additional column space used to
print the row. The following will be sent to standard out:<P>

<PRE>
   opt@row    = True
   opt@tspace = ((M*fWidth - <a href="dimsizes.html"><strong>dimsizes</strong></a>(<a href="stringtochar.html"><strong>stringtochar</strong></a>(opt@title))))/2 + 6
   <strong>write_matrix</strong> (x, "7f7.2" , opt)
</PRE>

<PRE>
                           Normal

    0    4.35   4.36   9.73   4.91   1.77  -0.63  -4.29
    1    4.39   4.66  -5.84   4.59   3.68 -14.12   0.07
    2    0.27   3.77   0.89  -3.09   5.08  -2.51   5.85
    3   -3.35  -1.66   8.46   7.55   0.14   1.76   0.87
    4   -6.90   4.06  10.39   4.56  -5.63  -1.43   8.65
</PRE>

<B>Example 4</B><P>

Combine several edit descriptors; this shows a repeat edit descriptor
("2e14.5") and an example of specifying a specific number of spaces to
be skipped ("4x"):<P>

<PRE>
    fmtx = "f8.2,1x,f10.5,3x,2e14.5, 4x, e11.4,2f7.2"
    <strong>write_matrix</strong> (x, fmtx, False)
</PRE>

This yields:<P>

<PRE>
    4.35    4.36462      0.97340E+01   0.49126E+01     0.1770E+01  -0.63  -4.29
    4.39    4.65982     -0.58381E+01   0.45896E+01     0.3677E+01 -14.12   0.07
    0.27    3.77360      0.88711E+00  -0.30932E+01     0.5078E+01  -2.51   5.85
   -3.35   -1.66182      0.84589E+01   0.75549E+01     0.1364E+00   1.76   0.87
   -6.90    4.06438      0.10386E+02   0.45631E+01    -0.5635E+01  -1.43   8.65
</PRE>

<B>Example 5</B><P>

Let <TT>g</TT> be a 100 x 50 (<TT>N</TT> x <TT>M</TT>) array, and
assume it is desired to send the output to a file called "GPRINT" with
no title or row numbering:<P>

<PRE>
  N    = 100    ; number of rows
  M    = 50     ; number of columns
  ave  = 0.0
  std  = 5.0
  x    = <a href="random_normal.html"><strong>random_normal</strong></a> (ave, std, (/N,M/))  

  fWidth = 10    ; specify the format width
  fDec   = 3     ; specify the number to the right of decimal point
  fmtx   = M + "f" + fWidth + "." + fDec              ; fmtx="50f10.3"

  opt = True
  opt@fout = "GPRINT"
  <strong>write_matrix</strong> (x, fmtx, opt)
</PRE>

<B>Example 6</B><P>

Let's say a user calculated seven (<TT>K</TT>) 1D arrays of length 100
(<TT>I</TT>): <TT>a(I)</TT>, <TT>b(I)</TT>, <TT>c(I)</TT>,
<TT>d(I)</TT>, <TT>e(I)</TT>, <TT>f(I)</TT>, <TT>g(I)</TT>.  Further,
let's assume that the values in each array vary widely, so different
edit descriptors are required for each variable.  To use
<strong>write_matrix</strong>, several steps are required:<P>

<OL>

<LI>place the seven 1D arrays into a 2D array using NCL's
<a href="new.html"><strong>new</strong></a> and <a href="typeof.html"><strong>typeof</strong></a> functions,

<LI>create the format to be used

<LI>specify a file<P>
</OL>

<PRE>
  I = 100      ; number of elements per variable
  K = 7        ; number of variables (1D arrays)

  p = <a href="new.html"><strong>new</strong></a> ( (/I,K/), <a href="typeof.html"><strong>typeof</strong></a>(a) )
  p(:,0) = a
  p(:,1) = b
  p(:,2) = c
  p(:,3) = d
  p(:,4) = e
  p(:,5) = f
  p(:,6) = g

  fmtx       = "f8.2,1x,2e14.5,3x,2f7.1,2x,e11.4,f9.3"
  opt        = True
  opt@title  = "a,b,c,d,e,f,g"
  opt@tspace = 40
  <strong>write_matrix</strong> (p, fmtx, opt)
</PRE>

To send to a file, simply add the <TT>fout</TT> attribute:<P>

<PRE>
  opt@fout = "/some/place/special/ABCDEFG"
  <strong>write_matrix</strong> (p, fmtx, opt)
</PRE>

<B>Example 7</B><P>

Let <TT>z</TT> be a 4D array of size <TT>ntim</TT> x <TT>nlev</TT> x
<TT>nlat</TT> x <TT>mlon</TT>. Reshape <TT>z</TT> to be a 2D array via
NCL's <a href="ndtooned.html"><strong>ndtooned</strong></a> and <a href="onedtond.html"><strong>onedtond</strong></a> functions:<P>

<PRE>
  z2D = <a href="onedtond.html"><strong>onedtond</strong></a>( <a href="ndtooned.html"><strong>ndtooned</strong></a>(z), (/ntim*nlev*nlat,mlon/) )

  opt  = True
  opt@fout = "Z2D"
  <strong>write_matrix</strong> (z2D, fmtx, opt)
</PRE>

<B>Example 8</B><P>

Let the <TT>N</TT> x <TT>M</TT> array <TT>x</TT> have a _FillValue
(missing value) of 1.e+20.  Assume all valid numbers can be
accommodated by the format string "f10.2". To avoid bogus characters
being sent to <TT>fout</TT>, the user must change the _FillValue
attribute (at least temporarily):<P>

<PRE>
  xmsg   = x@_FillValue              ; save _FillValue
  x@_FillValue = -9999.0             ; change to some value

  fmtx   = M + "f10.2"                      
  <strong>write_matrix</strong> (x, fmtx, False)
                                     
  x@_FillValue = xmsg                ; if desired, reset original _FillValue  
</PRE>

<B>Example 9</B><P>

Let <TT>z</TT> be a 2D gaussian grid of size 64 x 128, and with
coordinate variables named <TT>lat</TT> and <TT>lon</TT>
[<TT>z(lat,lon)</TT>]. To output a subset, either standard or
coordinate subscripting can be used. To output data from say,
10S-to-10N and every other longitude from 90-to-270, either of the
following approaches may be used:<P>

<PRE>
 <strong>write_matrix</strong> (z(28:35,32:96:2), fmt, opt)         ; standard subscripting
</PRE>

or

<PRE>
 <strong>write_matrix</strong> (z({-10:10},{0:360:10}), fmt, opt)   ; coordinate sub
</PRE>
</p>					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->
</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Built-in/write_matrix.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:25 GMT -->
</html>
