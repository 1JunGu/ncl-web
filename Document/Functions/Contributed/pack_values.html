<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Contributed/pack_values.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:02 GMT -->
<head>
<meta name="description" content="NCL contributed.ncl functions (type converters)">
<meta name="keywords" content="pack_values">
<title>pack_values</title>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="../../../styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="../../../scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="../../../scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="../../../internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="../../../Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="../../../citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="../../../contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="../../Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="../../../index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="../../Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="../../../overview.html" class="subitem">Overview</a></li>
						<li><a href="../../../get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="../../../gallery.html" class="subitem">Gallery</a></li>
						<li><a href="../../../Download/index.html" class="subitem">Download</a></li>
						<li><a href="../../../current_release.html" class="subitem">What's New</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>						
						<li><a href="../../../citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="../../../Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="../../../Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="../../../Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="../../../Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="../../../Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="../../../Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="../../../Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="../../../Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="../../../Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="../../../Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="../../../Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="../../../Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="../../../Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="../list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="../list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="../index.html" class="subitem">Category Listing</a></li>
						<li><a href="../list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="../../Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="../../Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="../../Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="../../Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="../../Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="../../Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="../../Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="../../Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="../../Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="../../Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="../../Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="../../Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="../../Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="../../Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="../../Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="../../Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="../../Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="../../Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="../../Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="../../Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="../../Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="../../Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="../../Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="../../Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="../../Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="../../Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="../../Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="../../Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="../../Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="../../../links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="../../Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="../../Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="../../Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="../../Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="../../Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="../../Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="../../Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="../../../Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="../../Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="../../Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="../../Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="../../Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="../../../announcements.html" class="subitem">Announcements</a></li>
						<li><a href="../../../current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="../../../new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="../../../future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="../../../prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="../../../Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="../../../Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="../../../Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="../../Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="../../Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="../../../Training/index.html" class="subitem">Training</a></li>
						<li><a href="../../../Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="../../../Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>
						<li><a href="../../../FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="../../../ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="../../../report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="../../../index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">
<a class=crumb href="../../../index-2.html">NCL Home ></a>
<a class=crumb href="../../index-2.html">Documentation ></a>
<a class=crumb href="../index-2.html">Functions ></a>
<a class=crumb href="../type_convert.html">Type converters</a>
<br>
<h1>pack_values</h1>

<p>
Compress values of type float or double to values of type short or byte.
</p>

<a name="Prototype"></a>
<h2>Prototype</h2>
<pre>
load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"  ; This library is <b>automatically loaded</b>
                                                             ; from NCL V6.2.0 onward.
                                                             ; No need for user to explicitly load.

	function pack_values (
		x         : float or double,  
		packType  : string,           
		opt       : logical           
	)

	<a href="../return_val.html">return_val</a> [<a href="../Built-in/dimsizes.html"><strong>dimsizes</strong></a>(x)] :  short or byte
</pre>
<a name="Arguments"></a>
<h2>Arguments</h2>
<em>x</em>
<p class=indent>An array of type float or double of any dimensionality.
</p>
<em>packType</em>
<p class=indent>A string which specifies the type of the returned compressed elements.
Only two values are recognized "short" or "byte".
</p>
<em>opt</em>
<p class=indent>opt=False means the function will determine the mimimum and maximum values
and, hence, the <i>range</i>, <i>scale_factor</i> and <i>add_offset</i>.
</p>
<p class=indent>
opt=True means the user wishes to specify the values of certain 
variables used by the algorithm. Only users who are knowledgeable 
and have tested that the specified values are appropriate should 
use these options. No error checking is done. The algorithm uses
the specified values directly. 
</p>
<p class=indent> 
The user may specify:
<ul>
<li> the minimum (opt@<i>min_value</i>) 
and maximum (opt@<i>max_value</i>) values to be used by 
the function. Thus the user explicitly specifies the <i>range</i>.
The <i>scale_factor</i> and <i>add_offset</i> are derived using 
these values. </li> 
</p>
<p class=indent>
<b>or</b>
</p>
<p class=indent>
<li> the scale_factor (opt@<i>scale_factor</i>) 
and add_offset (opt@<i>add_offset</i>) values to be used by 
the function. </li>
</ul>
</p>
<a name="Return"></a>
<h2>Return value</h2>
<p>
The results are returned in an array of the type specified by <em>packType</em>
and with the same dimensionality as <em>x</em>. Metadata is preserved.
Additional attributes, including <i>scale_factor</i> and
<i>add_offset</i>, are returned.
</p><a name="Description"></a>
<h2>Description</h2>
<p>
A standard "lossy" approach to "packing" data is used.
<p>  
<b>NOTE:</b> THE ORIGINAL INPUT VALUES CAN NOT BE RECOVERED.
<pre>
     pMax  = 2^15 - 1      ; <em>packType</em> = "short" 
     pMax  = 2^7  - 1      ; <em>packType</em> = "byte" 

     xMin  = min(<em>x</em>)
     xMax  = max(<em>x</em>)
     scale_factor = (xMax-xMin)/pMax
     add_offset   = (xMax+xMin)/2

     xPack = (<em>x</em>-add_offset)/scale_factor
</pre>

The functions <a href="short2flt.html"><strong>short2flt</strong></a> and
<a href="byte2flt.html"><strong>byte2flt</strong></a>
 can be used to unpack the values.
<p>
If a _FillValue attribute is associated with the input <em>x</em>
array then a _fillValue will be associated with the returned 
packed (compressed) array. The default for a "short" variable
is 32767 and for "byte" is 127. 


</p><a name="See_also"></a>
<h2>See Also</h2>
<p>
<a href="short2flt.html"><strong>short2flt</strong></a>,
<a href="byte2flt.html"><strong>byte2flt</strong></a>
<a href="../Built-in/inttoshort.html"><strong>inttoshort</strong></a>,
<a href="../Built-in/inttobyte.html"><strong>inttobyte</strong></a>
</p><a name="Examples"></a>
<h2>Examples</h2>
<p>
<b>Example 1</B> <P>
Compress values of type "float" to type "short". Then unpack
the values.

<pre>
      load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl" 
       :
       :
      xFloat   = <a href="../Built-in/random_uniform.html"><strong>random_uniform</strong></a> (-500,1000, 10)  

      xShort   = <strong>pack_values</strong>(xFloat, "short", False)
      <a href="../Built-in/printVarSummary.html"><strong>printVarSummary</strong></a>(xShort)

      xUnpack  = <a href="short2flt.html"><strong>short2flt</strong></a>(xShort)

      <a href="../Built-in/print.html"><strong>print</strong></a>(xFloat+"   "+xShort+"  "+xUnpack)
</pre>

The (edited) output yields

<pre>

Variable: xShort
Type: <b>short</b>
Total Size: 20 bytes
            10 values
Number of Dimensions: 1
Dimensions and sizes:   [10]
Coordinates: 
Number Of Attributes: 5
  add_offset         :  231.0105
  scale_factor       :    0.03052273
  vMin_original_data : -269.0587
  vMax_original_data :  731.0798
  vRange             :  1000.138

        xFloat      xShort    xUnpack
              
        -14.434     -8041     -14.422
        -13.412     -8007     -13.385
        240.081       297     240.076
        -66.905     -9760     -66.891
         29.510     -6601      29.53
       -269.050    -16383    -269.043
        349.317      3876     349.317
        731.080     16383     731.065
        -11.758     -7953     -11.737 
         10.120     -7236      10.148

</pre>


<b>Example 2</B> <P>
Using the same xFloat as above but with xFloat(3) set to _FillValue.

<pre>
  xFloat@_FillValue = 1.e20
  xFloat(3) = xFloat@_FillValue
</pre>

The (edited) output yields

<pre>

Variable: xShort
[snip]
  <b>_FillValue</b>         :  <b>32767</b>    <=== default _FillValue
  add_offset         :  231.0105
  scale_factor       :    0.03052273
  vMin_original_data : -269.0587
  vMax_original_data :  731.0798
  vRange             : 1000.138

        xFloat      xShort    xUnpack
              
       -14.434      -8041     -14.423
       -13.412      -8007     -13.385
       240.081        297     240.076
         1e+20      32767       32767.    <=== <b>_FillValue</b>
        29.509      -6601      29.530
      -269.059     -16383    -269.043
       349.317       3876     349.317
       731.080      16383     731.065
       -11.758      -7953     -11.737 
        10.119      -7236      10.148

</pre>

The user may wish to reset the _FillValue attribute
and array elements to (say) 1.e20 upon return. 

<pre>
      xUnpack@_FillValue = 1.e20      ; all occurrences of _FillValue=32767
                                      ; will be set to 1.e20
</pre>

<b>Example 3</B> <P>
Same as Example 2 but the user specifies the <i>min_value</i> 
and <i>max_value</i> attributes to be used by the algorithm. 

<pre>
      opt = True
      opt@min_value = -2000.
      opt@max_value =  2000.
      xShort   = <strong>pack_values</strong>(xFloat, "short", opt)
</pre>

The (edited) output yields

<pre>

Variable: xShort
[snip]
  _FillValue          :  32767
  add_offset          :   0
  scale_factor        :    0.122074
  vMin_original_data  : -269.0587
  vMax_original_data  :  731.0798
  vMin_user_specified : -2000           <=== <b>used by algorithm</b>
  vMax_user_specified :  2000           <=== <b>used by algorithm</b>
 
        xFloat     xShort    xUnpack

        -14.434     -118     -14.423 
        -13.412     -109     -13.385
        240.081     1966     240.076
          1e+20    32767       32767.
         29.560      241      29.530
       -269.059    -2204    -269.043
        349.317     2861     349.317
        731.080     5988     731.065
        -11.758      -96     -11.737 
         10.119       82      10.148

</pre>

<b>Example 4</B> <P>
Same as Example 2 but the user specifies the <i>scale_factor</i> 
and <i>add_offset</i> attributes to be used by the algorithm.

<pre>
      opt = True
      opt@scale_factor =  0.1
      opt@add_offset   =  0.0
      xShort   = <strong>pack_values</strong>(xFloat, "short", opt)
</pre>

The (edited) output yields

<pre>


Variable: xShort
[snip]
  add_offset          :     0          <=== <b>used by algorithm</b>
  scale_factor        :     0.1        <=== <b>used by algorithm</b>
                                       ++++ <b>the following are calculated but not used</b>
  vMin_original_data  :  -269.0587
  vMax_original_data  :   731.0798
  vRange              :  1000.138
 
        xFloat     xShort    xUnpack

       -14.434      -144     -14.4
       -13.412      -134     -13.4
       240.081      2400     240.0
         1e+20     32767     32767.
        29.510       295      29.5
      -269.059     -2690    -269.0
       349.317      3493     349.3
       731.080      7310     731.0
       -11.758      -117     -11.7
        10.120       101      10.1
</p>					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->
</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Contributed/pack_values.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:02 GMT -->
</html>
