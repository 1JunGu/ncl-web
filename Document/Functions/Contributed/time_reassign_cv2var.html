<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Contributed/time_reassign_cv2var.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:18 GMT -->
<head>
<meta name="description" content="NCL contributed.ncl functions (date routines)">
<meta name="keywords" content="time_reassign_cv2var">
<title>time_reassign_cv2var</title>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="../../../styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="../../../scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="../../../scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="../../../internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="../../../Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="../../../citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="../../../contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="../../Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="../../../index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="../../Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="../../../overview.html" class="subitem">Overview</a></li>
						<li><a href="../../../get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="../../../gallery.html" class="subitem">Gallery</a></li>
						<li><a href="../../../Download/index.html" class="subitem">Download</a></li>
						<li><a href="../../../current_release.html" class="subitem">What's New</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>						
						<li><a href="../../../citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="../../../Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="../../../Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="../../../Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="../../../Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="../../../Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="../../../Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="../../../Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="../../../Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="../../../Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="../../../Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="../../../Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="../../../Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="../../../Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="../list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="../list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="../index.html" class="subitem">Category Listing</a></li>
						<li><a href="../list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="../../Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="../../Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="../../Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="../../Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="../../Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="../../Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="../../Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="../../Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="../../Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="../../Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="../../Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="../../Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="../../Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="../../Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="../../Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="../../Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="../../Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="../../Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="../../Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="../../Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="../../Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="../../Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="../../Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="../../Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="../../Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="../../Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="../../Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="../../Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="../../Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="../../../links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="../../Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="../../Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="../../Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="../../Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="../../Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="../../Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="../../Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="../../Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="../../../Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="../../Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="../../Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="../../Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="../../Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="../../../announcements.html" class="subitem">Announcements</a></li>
						<li><a href="../../../current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="../../../new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="../../../future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="../../../prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="../../../Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="../../../Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="../../../Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="../../Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="../../Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="../../../Training/index.html" class="subitem">Training</a></li>
						<li><a href="../../../Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="../../../Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="../../index.html" class="subitem">Documentation</a></li>
						<li><a href="../../../FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="../../../ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="../../../report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="../../../External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="../../../index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">
<a class=crumb href="../../../index-2.html">NCL Home ></a>
<a class=crumb href="../../index-2.html">Documentation ></a>
<a class=crumb href="../index-2.html">Functions ></a>
<a class=crumb href="../cesm.html">CESM</a>,
<a class=crumb href="../date.html">Date routines</a>
<br>
<h1>time_reassign_cv2var</h1>

<p>
Reassign (replace) a CF-conforming "time" coordinate variable associated with a variable 
by calculating the mid-time values using the "bounds" attribute.
</p>

<p>
<img src="https://www.ncl.ucar.edu/Images/new.gif"> <i>Available in <a href="../../../prev_releases.html#6.4.0">version 6.4.0</a> and later.</i>
<p>
<a name="Prototype"></a>
<h2>Prototype</h2>
<pre>
load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"  ; This library is <b>automatically loaded</b>
                                                             ; from NCL V6.2.0 onward.
                                                             ; No need for user to explicitly load.

	function time_reassign_cv2var (
		f            ,          
		timeName [1] : string,  
		varName  [1] : string   
	)

	return_val [<a href="../Built-in/dimsizes.html"><strong>dimsizes</strong></a>(varName)] 
</pre>
<a name="Arguments"></a>
<h2>Arguments</h2>
<em>f</em>
<p class=indent>A variable of type 'file' or 'list'. The file(s) <b>must</b> be CF-conforming.
</p>
<em>timeName</em>
<p class=indent>A string specifying the name of the time variable on the file(s). 
Most commonly the name is "time". This <b>must</b> a CF-conforming variable with
units such as "seconds/minutes/hours/days since ...". It <b>must</b> have a <i>bounds</i>
attribute. If not the original time will be returned.

<argument name="varName">

A string specifying the name of the variable.
</p>
<a name="Return"></a>
<h2>Return value</h2>
<p>
An array of the same size and type as the variable specified by <em>varName</em>.
</p><a name="Description"></a>
<h2>Description</h2>
<p>
Some models output a 'time' (<em>timeName</em>) that is not consistent with the date(s) indicated 
within the file name. Consider a model file named (say) <b>FOO.2012-01.nc</b>.
This contains <i>monthly</i> averages for January 2012. However, the 'time' variable points to
February 2012. Specifically, 
<pre>

     f    = <a href="../Built-in/addfile.html"><strong>addfile</strong></a>("FOO.2012-01.nc","r")     ; 'f' is type 'file'
     time = f->time                           ; "days since 2011-01-01 00:00:00"
     date = <a href="../Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>(time, 0)             ; <b>(/ 2012,2, 1, 0, 0, 0 /)</b>

</pre>
Note that the month is 'off-by-one'. It indicates February 2012 rather than January 2012.
The reason is that the model accumulates statistics until the time switches months (here from
January to February). Unfortunately, the statistic (eg, monthly mean) is 'tagged' with the current
model time (February) and not the previous month (January). Actually, the time 'should
be' the center-of-times of the previous month (eg, January 16).  
<p>
To address this issue, the CF conforming <i>bounds</i> attribute associated with the specified
<em>timeName</em> variable is used to access the temporal <i>bounds</i> used to calculate the mean.
These boundary times are averaged. 
<pre>

     time = f->time                        ; timeName => "time"
     if (<a href="../Built-in/isatt.html"><strong>isatt</strong></a>(time,"bounds")) then        ; CF attribute
         tbnd = f->time@bounds             ; (ntim,2)
         time = (tbnd(:,0)+tbnd(:,1))*0.5  ; center of 'time' bounds
     end if
     date = <a href="../Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>(time, 0)          ; <b>(/ 2012, 1,16,12, 0, 0 /) </b>

</pre>      
<b>Using the correct times can be particulary important when doing (say) compositing.</b>


</p><a name="See_also"></a>
<h2>See Also</h2>
<p>
<a href="time_reassign.html"><strong>time_reassign</strong></a>,
<a href="../Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>
</p><a name="Examples"></a>
<h2>Examples</h2>
<p>
<p>
<b>Example 1</b>
<p>
This CAM file has <i>monthly</i> means from 1850-01 to 2005-12. Perform two tasks: (a) reassign (replace) the
"time" values with the temporal monthly time means; (b) reassign (replace) the coordinate 
variable (cv) associated with the specified variable.
<p>
<pre>
     dir    = "./"
     fil    = "b40.20th.track1.2deg.001.cam2.h0.PSL.1850-01_cat_2005-12.nc"
     f      = <a href="../Built-in/addfile.html"><strong>addfile</strong></a>(dir+fil, "r")
     
     time   = <a href="time_reassign.html"><strong>time_reassign</strong></a>(f, "time")                 ; 'new' time
     <a href="../Built-in/printVarSummary.html"><strong>printVarSummary</strong></a>(time)
     
     psl    = <strong>time_reassign_cv2var</strong>(f, "time", "PSL")   ; 'new' time coordinate variable (cv)
     <a href="../Built-in/printVarSummary.html"><strong>printVarSummary</strong></a>(psl)
</pre>
<p>
The (edited) output from the above would be:
<p>
<pre>
     Variable: time
     Type: double
     Dimensions and sizes:	[time | 1872]
     Coordinates: 
                 time: <b>[15.5..56924.5]</b>    <=== reassigned    original: time: <b>[  31..56940]</b>
     Number Of Attributes: 5
       bounds :	time_bnds
       calendar :	noleap
       units :	days since 1850-01-01 00:00:00
       long_name :	time
       <b>NCL :	function time_reassign used to reassign time to mid-value of bounds</b>
     
     
     Variable: psl
     Dimensions and sizes:	[time | 1872] x [lat | 96] x [lon | 144]
     Coordinates: 
                 time: <b>[15.5..56924.5]</b>      <=== reassigned    original: time: <b>[  31..56940]</b>
                 lat: [ -90..89.99999999999999]
                 lon: [   0..357.5]
     Number Of Attributes: 4
       cell_methods :	time: mean
       long_name :	Sea level pressure
       units :	Pa
       <b>NCL :	function time_reassign used to reassign time coordinate variable to mid-value of bounds</b>
</pre>
If the original and reassigned yyyy/mm/dd/hh were printed, you would readily see the more appropriate dates.
<pre>

        <b> --ORIGINAL--      --REASSIGNED-</b>
(0)     1850 02 01 00      1850 01 16 12
(1)     1850 03 01 00      1850 02 15 00
(2)     1850 04 01 00      1850 03 16 12
(3)     1850 05 01 00      1850 04 16 00
(4)     1850 06 01 00      1850 05 16 12
(5)     1850 07 01 00      1850 06 16 00
(6)     1850 08 01 00      1850 07 16 12
(7)     1850 09 01 00      1850 08 16 12
(8)     1850 10 01 00      1850 09 16 00
(9)     1850 11 01 00      1850 10 16 12
(10)    1850 12 01 00      1850 11 16 00
(11)    1851 01 01 00      1850 12 16 12
(12)    1851 02 01 00      1851 01 16 12
[SNIP]
(1857)  2004 11 01 00      2004 10 16 12
(1858)  2004 12 01 00      2004 11 16 00
(1859)  2005 01 01 00      2004 12 16 12
(1860)  2005 02 01 00      2005 01 16 12
(1861)  2005 03 01 00      2005 02 15 00
(1862)  2005 04 01 00      2005 03 16 12
(1863)  2005 05 01 00      2005 04 16 00
(1864)  2005 06 01 00      2005 05 16 12
(1865)  2005 07 01 00      2005 06 16 00
(1866)  2005 08 01 00      2005 07 16 12
(1867)  2005 09 01 00      2005 08 16 12
(1868)  2005 10 01 00      2005 09 16 00
(1869)  2005 11 01 00      2005 10 16 12
(1870)  2005 12 01 00      2005 11 16 00
(1871)  2006 01 01 00      2005 12 16 12
</pre>
</p>					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->
</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/Document/Functions/Contributed/time_reassign_cv2var.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 15:19:18 GMT -->
</html>
