<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<!-- Mirrored from www.ncl.ucar.edu/prev_releases.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 14:33:07 GMT -->
<head>
<meta name="keywords" content="NCL, graphics, visualization, gsn">
<TITLE>What was added in previous releases of NCL</TITLE>
</head>

<body>
	
	<!-- main navigation include -->
		<!-- NCL CSS -->
	<link rel="stylesheet" href="styles/ncl.css" type="text/css" media="all">
	
	
		<!-- Equal Height Columns -->
		<script type="text/javascript" src="scripts/column_height_equal.js"></script>
		
		<!-- DOJO Expandable Tree Nav -->

		<script type="text/javascript" src="scripts/dojo/dojo.js"></script>
		<script type="text/javascript">
		
		dojo.require("dojo.widget.TreeV3");
		dojo.require("dojo.widget.TreeNodeV3");
		dojo.require("dojo.widget.TreeLinkExtension");
		dojo.require("dojo.widget.TreeBasicControllerV3");
		dojo.hostenv.writeIncludes();

		</script>
		

		<div id="top_colorbar"><!-- begin top_colorbar -->
		</div><!-- end top_colorbar -->


	<div id="nav_org_wrap"><!-- begin nav_org_wrap -->
	<div id="nav_org"><!-- begin nav_org -->

		<ul class="menubar">


			<li><a class="trigger" href="internal/index.html">&nbsp;</a>
			</li>

			<li><a class="trigger" href="http://www.ucar.edu/">UCAR</a>
			</li>

			<li><a class="trigger" href="http://www.ncar.ucar.edu/">NCAR</a>
			</li>

			<li><a class="trigger" href="http://www.cisl.ucar.edu/">CISL</a>
			</li>
		</ul>

	</div><!-- end nav_org -->

	<div id="search"><!-- begin search -->

		<ul class="menubar">

			<li><a class="trigger" href="Download/index.html">Download</a>
			</li>

			<li><a class="trigger" href="citation.html">Citing NCL</a>
			</li>

			<li><a class="trigger" href="contributors.html">Contributors</a>
			</li>

		</ul>

	</div><!-- end search -->

	</div><!-- end nav_org_wrap -->
	
	
	

		<div id="nav_main_wrap"><!-- begin nav_main_wrap -->

		<div id="nav_main"><!-- begin nav_main -->
			<ul id="menubar_main">

				<li>
				<a href="Document/Pivot_to_Python/september_2019_update.html" class="triggeryw">&#9733; UPDATED LETTER TO NCL USERS</a>
				<li>
				<a href="index.html" class="triggeron">NCL</a>
					<ul>
                                          <li><a href="Document/Pivot_to_Python/index.html">Pivot to Python</a>
					  <li><a href="overview.html" class="subitem">Overview</a></li>
						<li><a href="get_started.html" class="subitem">Getting Started</a> </li>
						<li><a href="gallery.html" class="subitem">Gallery</a></li>
						<li><a href="Download/index.html" class="subitem">Download</a></li>
						<li><a href="current_release.html" class="subitem">What's New</a></li>
						<li><a href="Document/index.html" class="subitem">Documentation</a></li>						
						<li><a href="citation.html" class="subitem">Citing NCL</a></li>
					</ul>

				</li>

				<li>
				<a href="Applications/index.html" class="trigger">Examples</a>
					<ul>
						<li><a href="Applications/index.html" class="subitem" title="Examples">All Examples</a></li>
						<li><a href="Applications/Templates/index.html" class="subitem">Templates</a></li>
						<li><a href="Applications/list_io.html" class="subitem">File I/O</a></li>
						<li><a href="Applications/list_data.html" class="subitem">Datasets</a></li>
						<li><a href="Applications/list_maps.html" class="subitem">Maps</a></li>
						<li><a href="Applications/list_models.html" class="subitem">Models</a></li>
						<li><a href="Applications/list_dataP.html" class="subitem">Data Analysis</a></li>
						<li><a href="Applications/list_ptypes.html" class="subitem">Plot Types</a></li>
						<li><a href="Applications/list_tech.html" class="subitem">Plot Techniques</a></li>
						<li><a href="Applications/list_special.html" class="subitem">Special Plots</a></li>
						<li><a href="Applications/list_grids.html" class="subitem">Non-uniform Grids</a></li>
						<li><a href="Applications/list_misc.html" class="subitem">Miscellaneous</a></li>
					</ul>
				</li>

				<li>
				<a href="Document/Functions/list_alpha.html" class="trigger">Functions</a>
					<ul>
						<li><a href="Document/Functions/list_alpha.html" class="subitem">Alphabetical Listing</a></li>
						<li><a href="Document/Functions/index.html" class="subitem">Category Listing</a></li>
						<li><a href="Document/Functions/list_type.html" class="subitem">Function-Type Listing</a></li>						
					</ul>
				</li>
				
				<li>
				<a href="Document/Graphics/Resources/index.html" class="trigger">Resources</a>
					<ul>
					  <li><a href="Document/Graphics/Resources/list_alpha_res.html" class="subitem">Complete Listing</a></li>
					
						<li><a href="Document/Graphics/Resources/am.html" class="subitem">am (annotation manager)</a></li>
						<li><a href="Document/Graphics/Resources/app.html" class="subitem">app (app)</a></li>
						<li><a href="Document/Graphics/Resources/ca.html" class="subitem">ca (coordinate array)</a></li>
						<li><a href="Document/Graphics/Resources/cn.html" class="subitem">cn (contour)</a></li>
						<li><a href="Document/Graphics/Resources/ct.html" class="subitem">ct (coordinate array table)</a></li>
						<li><a href="Document/Graphics/Resources/dc.html" class="subitem">dc (data comm)</a></li>
						
						<li><a href="Document/Graphics/Resources/err.html" class="subitem">err (error)</a></li>
						<li><a href="Document/Graphics/Resources/gs.html" class="subitem">gs (graphics styles)</a></li>
						<li><a href="Document/Graphics/Resources/gsn.html" class="subitem">gsn (gsn high-level interfaces)</a></li>
						<li><a href="Document/Graphics/Resources/lb.html" class="subitem">lb (label bar)</a></li>
						<li><a href="Document/Graphics/Resources/lg.html" class="subitem">lg (legends)</a></li>
						<li><a href="Document/Graphics/Resources/mp.html" class="subitem">mp (maps)</a></li>
						
						<li><a href="Document/Graphics/Resources/pm.html" class="subitem">pm (plot manager)</a></li>
						<li><a href="Document/Graphics/Resources/pr.html" class="subitem">pr (primitives)</a></li>
						<li><a href="Document/Graphics/Resources/sf.html" class="subitem">sf (scalar field)</a></li>
						<li><a href="Document/Graphics/Resources/st.html" class="subitem">st (streamline)</a></li>
						<li><a href="Document/Graphics/Resources/tf.html" class="subitem">tf (transform)</a></li>
						<li><a href="Document/Graphics/Resources/ti.html" class="subitem">ti (title)</a></li>
						
						<li><a href="Document/Graphics/Resources/tm.html" class="subitem">tm (tickmark)</a></li>
						<li><a href="Document/Graphics/Resources/tr.html" class="subitem">tr (transformation)</a></li>
						<li><a href="Document/Graphics/Resources/tx.html" class="subitem">tx (text)</a></li>
						<li><a href="Document/Graphics/Resources/vc.html" class="subitem">vc (vectors)</a></li>
						<li><a href="Document/Graphics/Resources/vf.html" class="subitem">vf (vector field)</a></li>
						<li><a href="Document/Graphics/Resources/vp.html" class="subitem">vp (view port)</a></li>
						
						<li><a href="Document/Graphics/Resources/wk.html" class="subitem">wk (workstation)</a></li>
						<li><a href="Document/Graphics/Resources/ws.html" class="subitem">ws (workspace)</a></li>
						<li><a href="Document/Graphics/Resources/xy.html" class="subitem">xy (xy plots)</a></li>						
					</ul>
        </li>

				<li>
				<a href="links.html" class="trigger">Popular Links</a>
					<ul>
					<li><a href="Document/Graphics/hlures.html" class="subitem">.hluresfile</a></li>
					<li><a href="Document/Graphics/color_table_gallery.html" class="subitem">Color Tables</a></li>
					<li><a href="Document/Graphics/font_tables.html" class="subitem">Font Tables</a></li>	
					<li><a href="Document/Language/error_messages.html" class="subitem">Error Messages</a></li>	
					<li><a href="Document/Graphics/Images/dashpatterns.png" class="subitem">Dash Pattern Table</a></li>	
					<li><a href="Document/Graphics/Images/fillpatterns.png" class="subitem">Fill Pattern Table</a></li>	
					<li><a href="Document/Graphics/Images/markers.png" class="subitem">Marker Table</a></li>
					<li><a href="Document/Graphics/map_projections.html" class="subitem">Map Projections</a></li>
					<li><a href="Document/Graphics/rangs.html" class="subitem">High Resolution Map Database</a></li>
					<li><a href="Applications/editor.html" class="subitem">Editor Enhancements</a></li>
					<li><a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a></li>
					<li><a href="Document/Tools/ncl_filedump.html">ncl_filedump</a></li>
					<li><a href="Document/Tools/index.html" class="subitem">Tools</a></li>
					<li><a href="Document/Tools/WRAPIT.html" class="subitem">WRAPIT</a></li>
					</ul>
				</li>

				<li>
				<a href="announcements.html" class="trigger">What's New</a>
					<ul>
					        <li><a href="announcements.html" class="subitem">Announcements</a></li>
						<li><a href="current_release.html" class="subitem">In Latest Release</a></li>
						<li><a href="new_applications.html" class="subitem">In Application Examples</a></li>
						<li><a href="future_release.html" class="subitem">In Next Release</a></li>	
						<li><a href="prev_releases.html" class="subitem">In Previous Releases</a></li>
					</ul>
				</li>
	

				<li>
				<a href="Support/index.html" class='trigger'>Support</a>
					<ul>
						<li><a href="Support/email_lists.html" class="subitem">Email Lists</a></li>
						<li><a href="Applications/editor.html" class="subitem">Editor enhancements</a></li>
						<li><a href="Document/Language/error_messages.html" class="subitem">Error messages</a></li>
						<li><a href="Document/Manuals/index.html" class="subitem">Manuals</a></li>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="Training/index.html" class="subitem">Training</a></li>
						<li><a href="Training/Webinars/index.html" class="subitem">Webinars</a></li>
						<li><a href="Training/Workshops/index.html" class="subitem">Workshops</a></li>
						<li><a href="Document/index.html" class="subitem">Documentation</a></li>
						<li><a href="FAQ/index.html" class="subitem">FAQ</a></li>
						<li><a href="ftp_files.html" class="subitem">Uploading files via ftp</a></li>
						<li><a href="report_bug.html" class="subitem">Report Bugs</a></li>
					</ul>
				</li>

				<li>
				<a href="External/index.html" class='trigger'>External</a>
					<ul>
						<li><a href="https://www2.cisl.ucar.edu/resources/computational-systems/geyser-and-caldera/visualization/using-ncl-the-cheyenne-environment">NCL on Cheyenne</a>
						<li><a href="http://climatedataguide.ucar.edu/" class="subitem">Climate Data Guide</a></li>
						<li><a href="https://code.zmaw.de/projects/cdo/" class="subitem">Climate Data Operators</a></li>
						<li><a href="http://www.earthsystemmodeling.org/" class="subitem">Earth System Modeling Framework</a></li>
						<li><a href="http://nco.sourceforge.net/" class="subitem">NetCDF Operators</a></li>
						<li><a href="http://www.pyngl.ucar.edu/" class="subitem">PyNGL</a></li>
						<li><a href="http://www.pyngl.ucar.edu/Nio.shtml" class="subitem">PyNIO</a></li>
					</ul>
				</li>


			<!-- end menubar_main -->		
			</ul>
		
		<!-- end nav_main -->	
		</div>
		
	<!-- end nav_main_wrap -->	
  	</div>
		
			

	
	<div id="wrap"><!-- begin wrap -->
	<div id="content"><!-- begin content -->
	
	<!-- ######### BEGIN EDITABLE PAGE CONTENT ######### -->

			<div id="subheader"><!-- begin subheader -->
			<map name="ncl-home">
<area shape="rect" coords="0,0,65,40" href="index-2.html">
<area shape="rect" coords="540,0,615,40" href="http://www.ncar.ucar.edu/">
<area shape="rect" coords="625,0,665,40" href="http://www.nsf.gov/">
</map>

	<div id="nclheader">
	<img src="https://www.ncl.ucar.edu/Images/NCL_NCAR_NSF_banner.png" height=40 "NCL Website header" usemap="#ncl-home">
	</div>


			<div id="googlesearch">
<form style="float:right" id="cse-search-box" action="http://google.com/cse">
  <input type="hidden" name="cx" value="016712339613867830978:igijo92w2zo" />
  <input type="hidden" name="ie" value="UTF-8" />
  <input type="text" name="q" size="31" maxlength="255" id="searchbox" /><label for="searchbox">Search</label>
  <input type="hidden" name="hq" value="site:www.ncl.ucar.edu">
</form>
			</div><!-- end googlesearch -->

			</div><!-- end subheader -->
			
			      <div id="general_main">

<br>
<a class=crumb href="index-2.html">NCL ></a>
<a class=crumb href="whats_new.html">What's New</a>

<h1>What was added in previous releases of NCL</h1>
<p>

<font size="-1">
<a href="#6.6.1">6.6.1</a> |
<a href="#6.6.0">6.6.0</a> |
<a href="#6.5.0">6.5.0</a> |
<a href="#6.4.0">6.4.0</a> |
<a href="#6.3.0">6.3.0</a> |
<a href="#6.2.1">6.2.1</a> |
<a href="#6.2.0">6.2.0</a> |
<a href="#6.1.2">6.1.2</a> |
<a href="#6.1.1">6.1.1</a> |
<a href="#6.1.0">6.1.0</a> |
<a href="#6.1.0-beta">6.1.0-beta</a> |
<a href="#6.0.0">6.0.0</a> |
<a href="#6.0.0-beta">6.0.0-beta</a> |
<a href="#5.2.1">5.2.1</a> |
<a href="#5.2.0">5.2.0</a> |
<a href="#5.1.1">5.1.1</a> |
<a href="#5.1.0">5.1.0</a> |
<a href="#5.0.0">5.0.0</a> |
<a href="#4.3.1">4.3.1</a> |
<a href="#4.3.0">4.3.0</a> |
<a href="#a034">a034</a> |
<a href="#a033">a033</a> |
<a href="#a032">a032</a> |
<a href="#a031">a031</a> |
<a href="#a030">a030</a> |
<a href="#a029">a029</a> |
<a href="#a028">a028</a> |
<a href="#a027">a027</a> |
<a href="#a026">a026</a> |
<a href="#a025">a025</a> |
<a href="#a024">a024</a> |
<a href="#a023">a023</a> |
<a href="#a022">a022</a> |
<a href="#a021">a021</a> |
<a href="#a020">a020</a> |
<a href="#a019">a019</a> |
<a href="#a018">a018</a> |
<a href="#a017">a017</a> |
<a href="#a016">a016</a> |
<a href="#a015">a015</a> |
<a href="#a014">a014</a> |
<a href="#a013">a013</a> |
<a href="#a012">a012</a> |
<a href="#a011">a011</a> |
<a href="#a010">a010</a> |
<a href="#a009">a009</a> |
<a href="#a008">a008</a> |
<a href="#a007">a007</a> |
<a href="#a006">a006</a> |
<a href="#a005">a005</a> |<br>
[<i><a href="current_release.html">current release - 6.6.2</a></i>]
</font>
<p>

<hr><hr>
<A NAME="6.6.2"></A>
<h2>Version 6.6.2</h2>
<h3>February 28, 2019</h3><p>

Version 6.6.2 is the <a href="current_release.html">current
version</a> of NCL.<br> Go to the <a href="Download/index.html">download
page</a> for information on downloading this version.
<p>

<hr><hr>
<A NAME="6.6.1"></A>
<A NAME="6.6.0"></A>
<h2>Versions 6.6.0 and 6.6.1</h2>

Versions 6.6.0 and 6.6.1 were not officially released due to some
internal bugs that were fixed in version 6.6.2.
<p>

<hr><hr>
<A NAME="6.5.0"></A>
<h2>Version 6.5.0</h2>
<h3>July 16, 2018</h3><p>


<ul>
<li><a href="#TaskParallelism6.5.0">New functions for task parallelism</a>
<li><a href="#NewFunctions6.5.0">New functions</a>
<li><a href="#ElseIfStatement6.5.0">New "elseif" statement</a>
<li><a href="#ProfilerCLO6.5.0">New profiler command line option</a>
<li><a href="#PreloadedScripts6.5.0">NCL scripts that are now preloaded</a>
<li><a href="#NewResources6.5.0">New resources</a>
<li><a href="#NewColorTables6.5.0">New color tables</a>
<li><a href="#GraphicsEnhancements6.5.0">Graphics enhancements</a>
<li><a href="#FunctionEnhancements6.5.0">Function enhancements</a>
<li><a href="#OtherEnhancements6.5.0">Other enhancements</a>
<li><a href="#FuncProcBugsFixed6.5.0">Function and procedure bugs fixed</a>
<li><a href="#GraphicsBugsFixed6.5.0">Graphics bugs fixed</a>
<li><a href="#OtherBugsFixed6.5.0">Other bugs fixed</a>

</ul>
<p>
<p>

<p>
<a name="TaskParallelism6.5.0"></a>
<hr>
<p>
<b>New functions for task parallelism</b>
<p>

This version contains two new functions that enable NCL scripts to
execute multiple independent tasks in parallel. The tasks can be any
operation that can be invoked from a UNIX command line. One example
might be using an NCL driver script to execute a series of other NCL
scripts in parallel.
<p>

<ul>
<li><a href="Document/Functions/Built-in/subprocess.html"><strong>subprocess</strong></a> - this is the main function which 
takes as input the shell command to execute.

<li><a href="Document/Functions/Built-in/subprocess_wait.html"><strong>subprocess_wait</strong></a> - checks the finish status of a
concurrent process launched by
<a href="Document/Functions/Built-in/subprocess.html"><strong>subprocess</strong></a>.
</ul>
<p>

For examples of using these functions, see
the <a href="Applications/task_parallelism.html">task parallelism</a>
examples page.
<p>


<a name="NewFunctions6.5.0"></a>
<hr>
<p>
<b>New Functions</b><p>
<p>
<ul>

<li><a href="Document/Functions/Shea_util/dim_pad_extend.html"><strong>dim_pad_extend</strong></a> - extends (i.e.,
expand, append, pad) an existing array along the 'record dimension' to
a user specified size.
<p>

<li><a href="Document/Functions/Shea_util/dim_pad_modulo.html"><strong>dim_pad_modulo</strong></a> - pads (i.e.,
expand, append, extend) an existing array such that the size of a
specified dimension is a user specified 'modulo' length.
<p>

<li><a href="Document/Functions/Contributed/enthalpy.html"><strong>enthalpy</strong></a> - computes
atmospheric enthalpy.
<p>

<li><a href="Document/Functions/Built-in/esacr_n.html"><strong>esacr_n</strong></a> - computes sample auto-correlations on
the given dimension.
<p>

<li><a href="Document/Functions/Contributed/exponential_curve_fit.html"><strong>exponential_curve_fit</strong></a> -
calculates the coefficients for a simple exponential curve fit of the
form ' y = A*<a href="Document/Functions/Built-in/exp.html"><strong>exp</strong></a>(B*x)' using least squares.
<p>

<li><a href="Document/Functions/Contributed/geolocation_circle.html"><strong>geolocation_circle</strong></a> - creates
latitudes and longitudes that define concentric circles at user
specified distances from a central location.
<p>

<li><a href="Document/Functions/Built-in/get_bitfield.html"><strong>get_bitfield</strong></a> - unpacks bit fields from an array.
<p>

<li>Several new file I/O query functions were added for consistency purposes and more meaningful names:
<ul>
<li><a href="Document/Functions/Built-in/getfileatts.html"><strong>getfileatts</strong></a> - alias for <a href="Document/Functions/Built-in/getvaratts.html"><strong>getvaratts</strong></a> (only allows a file pointer)
<li><a href="Document/Functions/Built-in/getfiledimnames.html"><strong>getfiledimnames</strong></a> / <a href="Document/Functions/Built-in/getfiledims.html"><strong>getfiledims</strong></a>
- alias for <a href="Document/Functions/Built-in/getvardims.html"><strong>getvardims</strong></a> (only allows a file pointer)
<li><a href="Document/Functions/Built-in/getfilevardimnames.html"><strong>getfilevardimnames</strong></a> - alias for <a href="Document/Functions/Built-in/getfilevardims.html"><strong>getfilevardims</strong></a>
<li><a href="Document/Functions/Built-in/getvardimnames.html"><strong>getvardimnames</strong></a> - alias for <a href="Document/Functions/Built-in/getvardims.html"><strong>getvardims</strong></a>
<li><a href="Document/Functions/Built-in/getvardimsizes.html"><strong>getvardimsizes</strong></a> - alias for <a href="Document/Functions/Built-in/dimsizes.html"><strong>dimsizes</strong></a>
</ul>
<p>

<li><a href="Document/Functions/Built-in/isconform.html"><strong>isconform</strong></a> - checks two variables for array
conformance (same shape and size).
<p>

<li><a href="Document/Functions/Contributed/keyword_values.html"><strong>keyword_values</strong></a> -
reads a text file that contains keywords and associated values (similar to fortran NAMELIST). 
<p>

<li><a href="Document/Functions/Contributed/tlcl_evp_bolton.html"><strong>tlcl_evp_bolton</strong></a> - computes
the lifting condensation level temperature using water vapor pressure.
<p>

<li><a href="Document/Functions/Contributed/tlcl_mixr_bolton.html"><strong>tlcl_mixr_bolton</strong></a> - computes
the lifting condensation level temperature using mixing ratio and
pressure.
<p>

<li><a href="Document/Functions/Contributed/tlcl_rh_bolton.html"><strong>tlcl_rh_bolton</strong></a> - computes
the lifting condensation level temperature using relative humidity.
<p>

<li><a href="Document/Functions/Contributed/tlcl_td_bolton.html"><strong>tlcl_td_bolton</strong></a> - computes
the lifting condensation level temperature using dew point
temperature.
<p>

<li><a href="Document/Functions/Contributed/mixhum_convert.html"><strong>mixhum_convert</strong></a> - converts
mixing ratio to specific humidity or vice-versa.
<p>

<li><a href="Document/Functions/Contributed/pot_temp_equiv_tlcl.html"><strong>pot_temp_equiv_tlcl</strong></a> -
computes equivalent potential temperature using the lifting
condensation temperature.
<p>

<li><a href="Document/Functions/Contributed/regline_weight.html"><strong>regline_weight</strong></a> - calculates
the linear regression coefficient between two series where the
dependent (y) variable's values are weighted by some measure of
uncertainty (typically, standard deviations) such that the Chi-square
goodness-of-fit is minimized.
<p>

<li><a href="Document/Functions/Crop/refevt_hamon.html"><strong>refevt_hamon</strong></a> - uses the Hamon
formulation to derive reference evapotranspiration.
<p>

<li><a href="Document/Functions/Built-in/str_match_bool.html"><strong>str_match_bool</strong></a>
/ <a href="Document/Functions/Built-in/str_match_bool_ic.html"><strong>str_match_bool_ic</strong></a> - returns a logical array of
True/False/Missing indicating where the input array of strings contain
the given substring.
<p>

<li><a href="Document/Functions/Shea_util/simple_legend_ndc.html"><strong>simple_legend_ndc</strong></a> - creates a
legend in NDC space based on user supplied resources. Similarly
to <a href="Document/Functions/Shea_util/simple_legend.html"><strong>simple_legend</strong></a>,
<a href="Document/Functions/Shea_util/simple_legend_ndc.html"><strong>simple_legend_ndc</strong></a>
gives the user complete control over the design and placement of the
legend, and can be seen as an easier way to create legends in NCL.
<p>

<li><a href="Document/Functions/Contributed/static_energy_atm.html"><strong>static_energy_atm</strong></a> -
computes the atmospheric moist and dry static energy.
<p>

<li><a href="Document/Functions/Contributed/temp_virtual.html"><strong>temp_virtual</strong></a> -
computes atmospheric virtual temperature.
<p>

<li><a href="Document/Functions/Contributed/unwrap_phase.html"><strong>unwrap_phase</strong></a> - unwraps
(correct) phase angles to produce smoother phase plots.
<p>

<li><a href="Document/Functions/Contributed/zscore.html"><strong>zscore</strong></a> - computes the zscore
of a variable's given dimensions at all other dimensions and retains
metadata.
<p>

</ul>

<p>
<a name="ElseIfStatement6.5.0"></a>
<hr>
<p>
<b>New "elseif" statement</b>
<p>

This version will have the long-requested "elseif" statement!
<p>

The old way of using "else if" required you to have an "end if"
for every "else if" statement:
<p>

<pre>
  a = 5
  <font color=blue>if</font> (a.eq.1) then
    a = a + 1
  <font color=blue>else if</font> (a.eq.2) then
    a = a + 2
  <font color=blue>else if</font> (a.eq.3) then
    a = a + 3
  <font color=blue>else if</font> (a.eq.5) then
    a = a + 5
  <font color=blue>else</font>
    a = -1
  <font color=blue>end if</font>
  <font color=blue>end if</font>
  <font color=blue>end if</font>
  <font color=blue>end if</font>
  print("a = " + a)
</pre>
<p>

The new way, with the use of "elseif" (no spaces) looks like this:

<pre>
  a = 5
  <font color=blue>if</font> (a.eq.1) then
    a = a + 1
  <font color=blue>elseif</font> (a.eq.2) then
    a = a + 2
  <font color=blue>elseif</font> (a.eq.3) then
    a = a + 3
  <font color=blue>elseif</font> (a.eq.5) then
    a = a + 5
  <font color=blue>else</font>
    a = -1
  <font color=blue>end if</font>
  print("a = " + a)
</pre>
<p>

The old way will still work, and both codes above should return:
<p>

<pre>
   a = 10
</pre>
<p>

<a name="ProfilerCLO6.5.0"></a>
<hr>
<p>
<b>New profiler command line option</b>

Examples coming soon. Stay tuned...
<p>

<a name="PreloadedScripts6.5.0"></a>
<hr>
<p>
<b>Preloaded NCL scripts</b><p>

Several NCL scripts are now preloaded, and you no longer need to
explicitly load them at the top of your own scripts. Here's a full
list of the preloaded scripts:
<p>

<pre>
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_csm.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/shea_util.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/esmf/ESMF_regridding.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/bootstrap.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/extval.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/crop.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/heat_stress.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/wrf/WRFUserARW.ncl"
</pre>
<p>

It's perfectly fine to continue loading one or more of these scripts, even
if NCL is preloading them.<p>

In most cases you will not notice but loading these scripts does take
a few tenths of a second. In certain situations where you want to run
many very short scripts the resulting overhead may cause a significant
slowdown of your work flow. For this case, a new command line option,
'-s', allows you to start NCL without preloading any scripts.
<p>

<a name="NewResources6.5.0"></a>
<hr>
<p>
<b>New resources</b>
<p>
<ul>

<li><a href="Document/Graphics/Resources/gsn.html#gsnShadeFillDotSizeF"><em>gsnShadeFillDotSizeF</em></a> - allows you to
set the dot size if you are using stippling fill when
calling <a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnShadeFillScaleF"><em>gsnShadeFillScaleF</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnShadeFillScales"><em>gsnShadeFillScales</em></a> - allows you to set
the fill scales for pattern fill when
calling <a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a>.
<p>

See example "wavelet_3.ncl" on
the <a href="Applications/coneff.html#ex17">Contour effects</a> page.
<p>

<li><a href="Document/Graphics/Resources/tm.html#tmGridDrawOrder"><em>tmGridDrawOrder</em></a> - allows you to 
control the draw order for the tick mark grid lines.
<p>

See example "leg_650_10.ncl" on
the <a href="Applications/legend.html#ex10">Legends</a> page.

</ul>

<p>
<a name="NewColorTables6.5.0"></a>
<hr>
<p>
<b>New color tables</b>
<p>

NCL V6.5.0 has 29 new color maps added.<p>

The table below contains a suite of color maps for vegetation</a>.
<p>

<ul>

<li>NEO_<i>xxxx</i> - these four color maps come from
<a href="https://earthobservatory.nasa.gov/">NASA's Earth
Observatory</a> website
<p>

<li>NOC_ndvi - from
<a href="https://oceancolor.gsfc.nasa.gov/">NASA Ocean Color</a>
website
<p>

<li>vegetation_ClarkU - contributed by <a href="https://clarklabs.org/">Clark Labs</a> /
<a href="http://www.clarku.edu/">Clark University</a>
<p>

<li>vegetation_modis - contributed by the vegetation team
at the <a href="http://www.jpss.noaa.gov/">NOAA Joint Polar Satellite System Program Office</a>.
</ul>
<p>

<table border=1 cellpading=5>

<tr>
<td><a href="Document/Graphics/ColorTables/NEO_div_vegetation_a.html">NEO_div_vegetation_a</a>
<td><a href="Document/Graphics/ColorTables/Images/NEO_div_vegetation_a_labelbar.png"><img src="Document/Graphics/ColorTables/Images/NEO_div_vegetation_a_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/NEO_div_vegetation_b.html">NEO_div_vegetation_b</a>
<td><a href="Document/Graphics/ColorTables/Images/NEO_div_vegetation_b_labelbar.png"><img src="Document/Graphics/ColorTables/Images/NEO_div_vegetation_b_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/NEO_div_vegetation_c.html">NEO_div_vegetation_c</a>
<td><a href="Document/Graphics/ColorTables/Images/NEO_div_vegetation_c_labelbar.png"><img src="Document/Graphics/ColorTables/Images/NEO_div_vegetation_c_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/NEO_modis_ndvi.html">NEO_modis_ndvi</a>
<td><a href="Document/Graphics/ColorTables/Images/NEO_modis_ndvi_labelbar.png"><img src="Document/Graphics/ColorTables/Images/NEO_modis_ndvi_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/NOC_ndvi.html">NOC_ndvi</a>
<td><a href="Document/Graphics/ColorTables/Images/NOC_ndvi_labelbar.png"><img src="Document/Graphics/ColorTables/Images/NOC_ndvi_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/vegetation_ClarkU.html">vegetation_ClarkU</a>
<td><a href="Document/Graphics/ColorTables/Images/vegetation_ClarkU_labelbar.png"><img src="Document/Graphics/ColorTables/Images/vegetation_ClarkU_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/vegetation_modis.html">vegetation_modis</a>
<td><a href="Document/Graphics/ColorTables/Images/vegetation_modis_labelbar.png"><img src="Document/Graphics/ColorTables/Images/vegetation_modis_labelbar.sm.png"></a>

<td colspan=2><font size=-1><i>Click on color map name or color bar
for more information or larger image.</i></font>

</table>
<p>

The table below contains a
<a href="https://matplotlib.org/cmocean/">matplotlib suite of
color maps for oceanography</a>. Thanks to Sam McClatchie of NOAA
for the suggestion.
<p>

<table border=1 cellpading=5>
<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_algae.html">cmocean_algae</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_algae_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_algae_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_amp.html">cmocean_amp</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_amp_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_amp_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_balance.html">cmocean_balance</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_balance_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_balance_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_curl.html">cmocean_curl</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_curl_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_curl_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_deep.html">cmocean_deep</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_deep_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_deep_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_delta.html">cmocean_delta</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_delta_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_delta_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_dense.html">cmocean_dense</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_dense_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_dense_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_gray.html">cmocean_gray</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_gray_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_gray_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_haline.html">cmocean_haline</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_haline_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_haline_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_ice.html">cmocean_ice</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_ice_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_ice_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_matter.html">cmocean_matter</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_matter_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_matter_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_oxy.html">cmocean_oxy</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_oxy_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_oxy_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_phase.html">cmocean_phase</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_phase_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_phase_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_solar.html">cmocean_solar</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_solar_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_solar_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_speed.html">cmocean_speed</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_speed_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_speed_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_tempo.html">cmocean_tempo</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_tempo_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_tempo_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/cmocean_thermal.html">cmocean_thermal</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_thermal_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_thermal_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/cmocean_turbid.html">cmocean_turbid</a>
<td><a href="Document/Graphics/ColorTables/Images/cmocean_turbid_labelbar.png"><img src="Document/Graphics/ColorTables/Images/cmocean_turbid_labelbar.sm.png"></a>

<tr>
<td colspan=4><font size=-1><i>Click on color map name or color bar
for more information or larger image.</i></font>

</table>
<p>

The table below contains four random color maps:

<ul>

<li>srip_reanalysis - selected by
the <a href="https://s-rip.ees.hokudai.ac.jp/">SPARC reanalysis
intercomparison project group</a> for reanalysis comparisons. This
group carefully selected colors so that groups of reanalyses worked
well and so colorblind people could use it. The idea is that papers
will have these colors for time-series comparisons. Thanks to Cathy
Smith (NOAA/ESRL PSD and CU CIRES) for bringing it to our attention.
<p>

<li>UKM_hadcrut - from the <a href="https://www.metoffice.gov.uk/">UK Met Office</a>
<p>

<li>GSFC_landsat_udf_density -
from <a href="https://landsat.gsfc.nasa.gov/finding-forests-undisturbed-for-a-quarter-century/">NASA's
Landsat Science "undisturbed forests"</a>
<p>

<li>drought_severity - a drought severity color map
</ul>
<p>

<table border=1 cellpading=5>

<tr>
<td><a href="Document/Graphics/ColorTables/srip_reanalysis.html">srip_reanalysis</a>
<td><a href="Document/Graphics/ColorTables/Images/srip_reanalysis_labelbar.png"><img src="Document/Graphics/ColorTables/Images/srip_reanalysis_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/UKM_hadcrut.html">UKM_hadcrut</a>
<td><a href="Document/Graphics/ColorTables/Images/UKM_hadcrut_labelbar.png"><img src="Document/Graphics/ColorTables/Images/UKM_hadcrut_labelbar.sm.png"></a>

<tr>
<td><a href="Document/Graphics/ColorTables/GSFC_landsat_udf_density.html">GSFC_landsat_udf_density</a>
<td><a href="Document/Graphics/ColorTables/Images/GSFC_landsat_udf_density_labelbar.png"><img src="Document/Graphics/ColorTables/Images/GSFC_landsat_udf_density_labelbar.sm.png"></a>

<td><a href="Document/Graphics/ColorTables/drought_severity.html">drought_severity</a>
<td colspan=3><a href="Document/Graphics/ColorTables/Images/drought_severity_labelbar.png"><img src="Document/Graphics/ColorTables/Images/drought_severity_labelbar.sm.png"></a>

<tr>
<td colspan=4><font size=-1><i>Click on color map name or color bar
for more information or larger image.</i></font>

</table>
<p>


<a name="GraphicsEnhancements6.5.0"></a>
<hr>
<p>
<b>Graphics enhancements</b>
<p>

<ul>

<li><a href="Document/Functions/Built-in/get_color_index.html"><strong>get_color_index</strong></a> / 
<a href="Document/Functions/Built-in/get_color_rgba.html"><strong>get_color_rgba</strong></a> - these functions were enhanced to
allow the third argument to be an array of values. This can
signficantly speed up the routines if you have a lot of calls to these
functions.
<p>

See example <a href="Applications/table.html#ex8">table_8.ncl</a>.
</ul>

<a name="FunctionEnhancements6.5.0"></a>
<hr>
<p>
<b>Function enhancements</b>
<p>

<ul>

<li><a href="Document/Functions/User_contributed/cd_inv_string.html"><strong>cd_inv_string</strong></a> - new
formatting options added for month names, and changed 'f' option
to 'r' to match <a href="Document/Functions/User_contributed/cd_string.html"><strong>cd_string</strong></a>.
<p>

<li><a href="Document/Functions/Built-in/nggcog.html"><strong>nggcog</strong></a> - this procedure was updated to allow
numeric input and/or float and double output. See
example <a href="Applications/polyg.html#ex27">polyg_27.ncl</a> for an 
example.
<p>

</ul>

<a name="OtherEnhancements6.5.0"></a>
<hr>
<p>
<b>Other enhancements</b>
<p>

<ul>
<li><a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> - an "-nc4" option was
added to allow the conversion of files to NetCDF 4.
<p>
</ul>

<a name="FuncProcBugsFixed6.5.0"></a>
<hr>
<p>
<b>Function and procedure bugs fixed</b>
<p>
<ul>

<li><a href="Document/Functions/Built-in/bin_avg.html"><strong>bin_avg</strong></a> - this function expects equal grid
spacing for the destination grid.  The internal test required exact
spacing. However, some grid spacing led to round-off errors which
caused the test to fail. More robust testing was used to address this
issue.
<p>

<li><a href="Document/Functions/Contributed/calculate_daily_values.html"><strong>calculate_daily_values</strong></a>
/ <a href="Document/Functions/Contributed/calculate_monthly_values.html"><strong>calculate_monthly_values</strong></a>
/ <a href="Document/Functions/Contributed/calculate_segment_values.html"><strong>calculate_segment_values</strong></a> - the
documentation for each function was updated to clarify the supported
`data structures. The <a href="Document/Functions/Contributed/calculate_daily_values.html"><strong>calculate_daily_values</strong></a>
and <a href="Document/Functions/Contributed/calculate_monthly_values.html"><strong>calculate_monthly_values</strong></a>
functions now support 5-dimensional structures of the form:
(ncase,time,level,lat,lon) and (time,ncase,level,lat,lon).
<p>

<li><a href="Document/Functions/User_contributed/calendar_decode2.html"><strong>calendar_decode2</strong></a> - no
longer exits with an error if the "calendar" attribute is set to
"proleptic_gregorian".
<p>

<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>
/ <a href="Document/Functions/User_contributed/cd_string.html"><strong>cd_string</strong></a> - the "calendar"
attribute can now be any case ("julian", "JULIAN", "Julian", etc).
<p>

<li><a href="Document/Functions/Contributed/clmDayTLLL.html"><strong>clmDayTLLL</strong></a> - fixed a bug where 
it wasn't handling the 360-day calendar properly.<p>

<li><a href="Document/Functions/Crop/daylight_fao56.html"><strong>daylight_fao56</strong></a> - fixed an issue
which arose when two-dimensional latitude/longitude coordinates
were encountered.
<p>

<li><a href="Document/Functions/Built-in/dim_acumrun_n.html"><strong>dim_acumrun_n</strong></a> - fixed a bug that would cause
this function to crash if you passed in an "lrun" that was greater
than the number of elements of the input array.<p>

<li><a href="Document/Functions/Built-in/dim_pqsort.html"><strong>dim_pqsort</strong></a> / <a href="Document/Functions/Built-in/dim_pqsort_n.html"><strong>dim_pqsort_n</strong></a> -
these functions would fail if you tried to sort an array with more
than two gigabyte values.
<p>


<li><a href="Document/Functions/Built-in/fbinread.html"><strong>fbinread</strong></a> / <a href="Document/Functions/Built-in/fbinwrite.html"><strong>fbinwrite</strong></a> /
<a href="Document/Functions/Built-in/fbindirread.html"><strong>fbindirread</strong></a> /<a href="Document/Functions/Built-in/fbindirwrite.html"><strong>fbindirwrite</strong></a> - these functions
can now read and write &gt; 2 GB variables.<p>

<li><a href="Document/Functions/Built-in/get_isolines.html"><strong>get_isolines</strong></a> - was not correctly checking for
out-of-bounds conditions and sometimes returned non-sensical values.
See the <a href="Applications/isolines.html">isolines examples
page</a> for NCL graphical scripts that use this function.
<p>

<li><a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a> / <a href="Document/Functions/Built-in/lspoly_n.html"><strong>lspoly_n</strong></a>  - 
these functions were potentially returning the wrong coefficients
if multiple least-squares polynominals were input at once. 
<p>

<li><a href="Document/Functions/Contributed/natgrid_Wrap.html"><strong>natgrid_Wrap</strong></a> - was not
correctly attaching the coordinate arrays to the return variable (it
had the rightmost two dimensions swapped).
<p>

<li><a href="Document/Functions/Built-in/paleo_outline.html"><strong>paleo_outline</strong></a> - fixed a bug that was
restricting the string length of the base name of the map files to 512
characters.
<p>

<li><a href="Document/Functions/Contributed/pot_vort_isobaric.html"><strong>pot_vort_isobaric</strong></a> - when <em>opt</em>=1,
this function returned seven variables as elements of a list variable. It was 
supposed to return three variables.  
<p>

<li><a href="Document/Functions/Built-in/product.html"><strong>product</strong></a> - now allows types int64, uint, and
uint64 to be input.
<p>

<li><a href="Document/Functions/Built-in/stat_medrng.html"><strong>stat_medrng</strong></a> - now allows the output arguments to
be scalars as advertised.
<p>

<li><a href="Document/Functions/Built-in/trop_wmo.html"><strong>trop_wmo</strong></a> - was returning -999 for
missing values, but no _FillValue attribute was being set.
<p>

<li><a href="Document/Functions/User_contributed/ut_string_fix.html"><strong>ut_string_fix</strong></a> - was not
calling <a href="Document/Functions/Built-in/ut_calendar_fix.html"><strong>ut_calendar_fix</strong></a> under the hood, and thus it
still had the infamous "60 second" bug.
<p>

<li><a href="Document/Functions/Built-in/wgt_volrmse.html"><strong>wgt_volrmse</strong></a> - was returning the wrong values
due to a value being squared twice.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_intrp2d.html"><strong>wrf_user_intrp2d</strong></a> /
<a href="Document/Functions/WRF_arw/wrf_user_intrp3d.html"><strong>wrf_user_intrp3d</strong></a> - these two
vertical cross section routines weren't including the 0th grid point
when setting up the output domain, causing the output array to be
missing a grid point in the rightmost dimension. In the figures below,
you can see the error by comparing the right edge of each plot.
(<i>Click on color map name or color bar for more information or
larger image.</i></font>)
<P>
 
<a href="files/wrf_user_intrp3d_640.lg.png"><img src="files/wrf_user_intrp3d_640.sm.png"></a>
<a href="files/wrf_user_intrp3d_650.lg.png"><img src="files/wrf_user_intrp3d_650.sm.png"></a>

</ul>
<p>

<a name="GraphicsBugsFixed6.5.0"></a>
<hr>
<p>
<b>Graphics bugs fixed</b>
<p>

<ul>

<li><a href="Document/Graphics/Resources/cn.html#cnLineLabelFormat"><em>cnLineLabelFormat</em></a> - this
resource is now recognized by the gsn_csm contouring routines.<p>

<li><a href="Document/Graphics/Resources/cn.html#cnLowLabelFontColor"><em>cnLowLabelFontColor</em></a> / 
<a href="Document/Graphics/Resources/cn.html#cnHighLabelFontColor"><em>cnHighLabelFontColor</em></a> - these
resources are now recognized by
the <a href="Document/Functions/WRF_contributed/wrf_contour.html"><strong>wrf_contour</strong></a> function.
<p>

<li><a href="Document/Graphics/Resources/cn.html#cnLineLabelFontThicknessF"><em>cnLineLabelFontThicknessF</em></a> /
<a href="Document/Graphics/Resources/cn.html#cnHighLabelFontThicknessF"><em>cnHighLabelFontThicknessF</em></a> / 
<a href="Document/Graphics/Resources/cn.html#cnLowLabelFontThicknessF"><em>cnLowLabelFontThicknessF</em></a> /
<a href="Document/Graphics/Resources/cn.html#cnInfoLabelFontThicknessF"><em>cnInfoLabelFontThicknessF</em></a> - these contour font thickness 
resources are no longer ignored.<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_text.html"><strong>gsn_add_text</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_create_text.html"><strong>gsn_create_text</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_text.html"><strong>gsn_text</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_text_ndc.html"><strong>gsn_text_ndc</strong></a> - fixed a bug in which
missing text strings would show up on the plot as whatever the missing
value was for that string. (Click on images for a larger view.)
<p>

<a href="files/gsn_text_missing_640.lg.png"><img src="files/gsn_text_missing_640.sm.png"></a>
<a href="files/gsn_text_missing_650.lg.png"><img src="files/gsn_text_missing_650.sm.png"></a>
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_streamline_scalar_map_polar.html"><strong>gsn_csm_streamline_scalar_map_polar</strong></a>
- fixed a bug where this function would fail if you tried to turn off
the labelbar by setting <a href="Document/Graphics/Resources/lb.html#lbLabelBarOn"><em>lbLabelBarOn</em></a>
to False.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a> / <a href="Document/Graphics/Resources/gsn.html#gsnXRefLine"><em>gsnXRefLine</em></a>
<p>

<ul>

<li>Fixed a bug where drawing your curves with markers or markers and
lines (<a href="Document/Graphics/Resources/xy.html#xyMarkLineMode"><em>xyMarkLineMode</em></a> = "markers" or
"marklines") would cause extra markers to show up at locations where
the X or Y reference line crossed your curve(s). (Click on images for
a larger view.)
<p> 

<a href="files/xy_ref_line_marker_640.lg.png"><img src="files/xy_ref_line_marker_640.sm.png"></a>
<a href="files/xy_ref_line_marker_650.lg.png"><img src="files/xy_ref_line_marker_650.sm.png"></a>
<p>

<li>Fixed a bug where if you are adding a different number of X and Y
reference lines to a plot via these two resources, then you may get a
fatal error:
<p> 
<pre>
fatal:Number of dimensions on right hand side do not match number of dimension in left hand side
fatal:["Execute.c":8640]:Execute: Error occurred at or near line 6014 in file 
     /usr/local/lib/ncarg/nclscripts/csm/gsn_csm.ncl
</pre>
<p>

If you have NCL V6.4.0 and need a fix for this problem now, download
this
<a href="files/gsn_csm_640_fix.html">gsn_csm_640_fix.ncl</a> file and
load it from your own script after any other load commands.

</ul>
<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a> / <a href="Document/Graphics/Interfaces/gsn_polyline.html"><strong>gsn_polyline</strong></a> 
<p>

<ul>

<li>Fixed a bug in which NCL was not always drawing the shortest path
between two points on a map. (Click on images for a larger view.)
<p>

<a href="files/polyline_issue_640.lg.png"><img src="files/polyline_issue_640.sm.png"></a>
<a href="files/polyline_issue_650.lg.png"><img src="files/polyline_issue_650.sm.png"></a>
<p>

<li>Fixed a bug in which the lines wouldn't be drawn correctly if the
precision exceeded that which could be represented by a float.
<p>
</ul>

<li>Fixed a bug where if you were drawing filled contours or vectors
with transparency applied (for example, via resources like
<a href="Document/Graphics/Resources/cn.html#cnFillOpacityF"><em>cnFillOpacityF</em></a> or
<a href="Document/Graphics/Resources/vc.html#vcGlyphOpacityF"><em>vcGlyphOpacityF</em></a>), the opacity was
also being applied to the map outlines. The map outlines have been
fixed to be fully opaque. (Click on images for a larger view.)
<p>

<a href="files/map_outline_transparency_640.lg.png"><img src="files/map_outline_transparency_640.sm.png"></a>
<a href="files/map_outline_transparency_650.lg.png"><img src="files/map_outline_transparency_650.sm.png"></a>
<p>

<li>gsn_csm_<i>xxxx</i>_map functions - Fixed a bug where
if <a href="Document/Graphics/Resources/mp.html#mpCenterLonF"><em>mpCenterLonF</em></a> was set to
something less than 0  (and
<a href="Document/Graphics/Resources/pm.html#pmTickMarkDisplayMode"><em>pmTickMarkDisplayMode</em></a> was not set
to "Always"), the longitude labels in the eastern hemisphere were
continuing to be labeled with "W".
<p>

<li><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>
/ <a href="Document/Graphics/Resources/gsn.html#gsnPanelLabelBar"><em>gsnPanelLabelBar</em></a> - Fixed a bug where if
you are running a script that calls
<a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a> to panel XY
plots <b>and</b> setting <a href="Document/Graphics/Resources/gsn.html#gsnPanelLabelBar"><em>gsnPanelLabelBar</em></a>
to True, then you would get a fatal error:
<p>

<pre>
fatal:Variable (mono_fill_scl) is undefined
fatal:["Execute.c":8640]:Execute: Error occurred at or near line 6100 \
   in file $NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl
</pre>
<p>

The <a href="Document/Graphics/Resources/gsn.html#gsnPanelLabelBar"><em>gsnPanelLabelBar</em></a> resource cannot be
applied to XY plots anyway, so the solution is to simply not set this
resource. In the next release, NCL will produce a warning instead of
exiting with an error.
<p>

<li><a href="Document/Graphics/Resources/tf.html#tfDoNDCOverlay"><em>tfDoNDCOverlay</em></a> - This resource
used to only be settable to True / False. As of several versions ago,
this resource can now be set with strings. The gsn_csm functions,
however, were still only allowing True/False values. You can
now set this resource either way.
<p>

The following settings show the new values and their allowable equivalents:
<p>

<pre>
res@tfDoNDCOverlay = 0 
res@tfDoNDCOverlay = False 
res@tfDoNDCOverlay = "DataTransform" 

res@tfDoNDCOverlay = 1 
res@tfDoNDCOverlay = True 
res@tfDoNDCOverlay = "NDCViewport" 

res@tfDoNDCOverlay = 2 
res@tfDoNDCOverlay = "NDCDataExtent" 
</pre>
<p>

The string settings are case insensitive, so "DataTransform" is the
same as "datatransform" which is the same as "DaTaTranSfORM".
<p>

To see an example of what the three values mean, see example
<a href="Applications/plot_data_on_map.html#ex14">dataonmap_14.ncl</a>
on
the <a href="Applications/plot_data_on_map.html">Plotting
data on a map</a> examples page.

</ul>
<p>

<a name="OtherBugsFixed6.5.0"></a>
<hr>
<p>
<b>Other bugs fixed</b>
<p>

<ul>
<li>GRIB2 - fixed issues with reading files containing aerosol data.<p>

<li><a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a>
- fixed a bug where this script would not work properly if you give it
more than two files.
<p>

</ul>
<p>


<hr><hr>
<A NAME="6.4.0"></A>
<h2>Version 6.4.0</h2>
<h3>February 28, 2017</h3><p>

<ul>
<li><a href="#NewFunctions6.4.0">New functions</a>
<li><a href="#NewFeatures6.4.0">New features</a>
<ul>
<li><a href="#BlockStyleComments6.4.0">Block style comments</a>
<li><a href="#NCLUserGuide6.4.0">NCL User Guide examples and data files included</a>
<li><a href="#LabelbarsWithTriangleEnds6.4.0">Labelbars with triangle ends</a>
<li><a href="#PreloadedScripts6.4.0">NCL scripts that are now preloaded</a>
</ul>
<li><a href="#BackwardsIncompatibleChanges6.4.0">Backwards-incompatible changes</a>
<ul>
<li><a href="#MapDataBaseVersionUpgrade6.4.0">The "MediumRes" map database will now be the default in some cases</a>
<li><a href="#LabelbarOpacity6.4.0">Labelbar colors will now reflect opacity used in plot</a>
</ul>

<li><a href="#UpdatedFunctions6.4.0">Updated functions</a>
<li><a href="#NewResources6.4.0">New resources</a>
<li><a href="#NewExamples6.4.0">New example pages</a>
<li><a href="#NewColorTable6.4.0">New color table</a>
<li><a href="#FileIOImprovements6.4.0">File I/O Improvements</a>
<li>Bugs fixed
<ul>
<li><a href="#FileIOBugsFixed6.4.0">File I/O bugs</a>
<li><a href="#FuncProcBugsFixed6.4.0">Function and procedure bugs</a>
<li><a href="#DateConversionsBugsFixed6.4.0">Date conversion bugs</a>
<li><a href="#GraphicsBugsFixed6.4.0">Graphics bugs</a>
<li><a href="#MiscellaneousBugsFixed6.4.0">Miscellaneous bugs</a>
</ul>
<li><a href="#MiscellaneousImprovements6.4.0">Miscellaneous improvements</a>
<ul>
<li><a href="#PlottingUnstructuredData6.4.0">Plotting unstructured data</a>
<li><a href="#PlottingWRFData6.4.0">Plotting WRF data</a>
<li><a href="#wrf_user_getvar6.4.0">Improvements to wrf_user_getvar</a>
<li><a href="#GSNColorResourcesRGBA6.4.0">GSN color resources now allow RGB/A values</a>
<li><a href="#X11WindowLarger6.4.0">Default X11 window larger</a>
<li><a href="#ColoradoCountiesUpdated6.4.0">Colorado counties updated</a>
<li><a href="#ConstantFillUpdates6.4.0">Handling of constant and near-constant value fill updated</a>
</ul>
<li><a href="#KnownIssues6.4.0">Known issues</a>

</ul>
<p>


<a name="NewFunctions6.4.0"></a>
<hr>
<p>
<b>New functions</b>
<p>
<ul>

<li><a href="Document/Functions/array_create.html">Array Create</a>,
<a href="Document/Functions/array_query.html">Manipulator</a>,
<a href="Document/Functions/array_query.html">Query</a>

<p>

<ul>

<li><a href="Document/Functions/Built-in/count_unique_values_n.html"><strong>count_unique_values_n</strong></a> - Counts the number
of unique values across a given dimension.
<p>

<li><a href="Document/Functions/Contributed/dim_maxind.html"><strong>dim_maxind</strong></a> - Returns the
index of the first occurrence of a maximum value within the specified
dimension.
<p>

<li><a href="Document/Functions/Contributed/dim_minind.html"><strong>dim_minind</strong></a> - Returns the
index of the first occurrence of a minimum value within the specified
dimension.
<p>

<li><a href="Document/Functions/Built-in/isscalar.html"><strong>isscalar</strong></a> - Determines if a variable is a scalar
(True) or not (False).
<p>

<li><a href="Document/Functions/Built-in/is_string_numeric.html"><strong>is_string_numeric</strong></a> - Returns True for every
element of a string array that contains a numeric value.
<p>

<li><a href="https://en.wikipedia.org/wiki/Venn_diagram">Venn Diagram</a> - 
A small suite of <b>two-set</b> Venn Diagram functions. 
<p>

<ul>
<li><a href="Document/Functions/Contributed/venn2_difference.html"><strong>venn2_difference</strong></a> - Get the unique element 
<a href="https://en.wikipedia.org/wiki/Venn_diagram#/media/File:Venn0110.svg">
<b>Venn diagram difference</b></a> of two arrays.
<p>

<li><a href="Document/Functions/Contributed/venn2_intersection.html"><strong>venn2_intersection</strong></a> - Get the
unique element
<a href="https://en.wikipedia.org/wiki/Venn_diagram#/media/File:Venn0001.svg"><b>Venn
diagram intersection</b></a> of two arrays.
<p>

<li><a href="Document/Functions/Contributed/venn2_union.html"><strong>venn2_union</strong></a> - Get the unique
element
<a href="https://en.wikipedia.org/wiki/Venn_diagram#/media/File:Venn0111.svg">
<b>Venn diagram union</b></a> of two arrays.
<p>

</ul>

</ul>
<p>

<li><a href="Applications/bootstrap.html">Bootstrap functions</a> -
Application of the bootstrap method.

<p>
<ul>

<li><a href="Document/Functions/Bootstrap/bootstrap_correl.html"><strong>bootstrap_correl</strong></a> - Bootstrap
estimates of sample cross correlations (ie, Pearson's correlation
coefficient) between two variables.
<p>

<li><a href="Document/Functions/Bootstrap/bootstrap_diff.html"><strong>bootstrap_diff</strong></a> - Bootstrap mean
differences from two samples.
<p>

<li><a href="Document/Functions/Bootstrap/bootstrap_estimate.html"><strong>bootstrap_estimate</strong></a> -Extract the
user specified element from the bootstrapped values.
<p>

<li><a href="Document/Functions/Bootstrap/bootstrap_regcoef.html"><strong>bootstrap_regcoef</strong></a> - Bootstrap
estimates of the linear regression coefficient.
<p>

<li><a href="Document/Functions/Bootstrap/bootstrap_stat.html"><strong>bootstrap_stat</strong></a> - Bootstrap
estimates of basic statistics derived from a variable.
<p>

</ul>
<p>
<li><a href="Document/Functions/cesm.html">CESM</a>
<p>
<ul>

<li><a href="Document/Functions/Contributed/albedo_ccm.html"><strong>albedo_ccm</strong></a> - Calculates the
albedo given a pair of model radiation variables.
<p>

<li><a href="Document/Functions/Contributed/time_reassign.html"><strong>time_reassign</strong></a> - Reassign
(replace) a Cf-conforming "time" variable by calculating the mid-time
values using the "bounds" attribute.
<p>

<li><a href="Document/Functions/Contributed/time_reassign_cv2var.html"><strong>time_reassign_cv2var</strong></a> -
Reassign (replace) a Cf-conforming "time" coordinate variable
associated with a variable by calculating the mid-time values using
the "bounds" attribute.
<p>

</ul>
<p>

<li><a href="Applications/crop.html">Crop & Evapotranspiration</a> -
A suite of functions for computing crop water requirements based upon
the
<a href="http://www.fao.org/docrep/x0490e/x0490e00.htm">FAO Irrigation
and drainage paper 56</a> including Penman-Monteith estimates (FAO 56)
of reference evapotranspiration.
<p>

<ul>
<li> <a href="Document/Functions/crop.html">23 Crop & Evapotranspiration functions</a> 
</ul>
<p>

<li><a href="Document/Functions/date.html">Date</a>,
<a href="Document/Functions/string.html">String</a>

<p>
<ul>

<li><a href="Document/Functions/User_contributed/cd_inv_string.html"><strong>cd_inv_string</strong></a> - Converts
string time values to numeric values, using the given format string.
<p>

<li><a href="Document/Functions/Contributed/cla_sq.html"><strong>cla_sq</strong></a> - Create a string
that uses single quotes (<b>'</b>) to enclose command line assignment
statements (CLAs) for later use by NCL's <a href="Document/Functions/Built-in/system.html"><strong>system</strong></a>
procedure.
<p>

</ul>
<p>
<li><a href="Applications/extreme_value.html">Extreme Value
Statistics</a> -
A small suite of functions focused on extreme value distributions. 
<p>

<ul>

<li><a href="Document/Functions/Ext_val/extval_frechet.html"><strong>extval_frechet</strong></a> - Calculates
the probability (PDF) and cumulative (CDF) distribution functions of
the Frechet Type II distribution given the shape, scale and location
parameters.
<p>

<li><a href="Document/Functions/Ext_val/extval_gev.html"><strong>extval_gev</strong></a> - Calculates the
probability (PDF) and cumulative (CDF) distribution functions of the
of the Generalized Extreme Value (GEV) distribution given the shape,
scale and location parameters.
<p>

<li><a href="Document/Functions/Ext_val/extval_gumbel.html"><strong>extval_gumbel</strong></a> - Calculates
the probability (PDF) and cumulative (CDF) distribution functions of
the Gumbel (Type I) distribution function given the scale and location
parameters.
<p>

<li><a href="Document/Functions/Ext_val/extval_mlegam.html"><strong>extval_mlegam</strong></a> - Estimates the
shape, scale, location other parameters for the Gamma distribution
using Maximum-Likelihood Estimation.
<p>

<li><a href="Document/Functions/Built-in/extval_mlegev.html"><strong>extval_mlegev</strong></a> - Estimates the shape, scale and
location parameters for the Generalized Extreme-Value (GEV)
distribution using Maximum-Likelihood Estimation.
<p>

<li><a href="Document/Functions/Ext_val/extval_pareto.html"><strong>extval_pareto</strong></a> - Calculates
the probability (PDF) and cumulative (CDF) distribution functions of
the Pareto distributions (Generalized, Type I, TYpe II) given the
shape, scale and location parameters.
<p>

<li><a href="Document/Functions/Ext_val/extval_recurrence_table.html"><strong>extval_recurrence_table</strong></a> -
Calculates the recurrence interval (return period), cumulative and
exceedence probabilities based upon a time series.
<p>

<li><a href="Document/Functions/Ext_val/extval_return_period.html"><strong>extval_return_period</strong></a> -
Calculates the period of an event (eg, flood, heat wave, drought)
occurring given an average event recurrence interval and specified
probability level.
<p>

<li><a href="Document/Functions/Ext_val/extval_return_prob.html"><strong>extval_return_prob</strong></a> -
Calculates the probability of an event (eg, flood, heat wave, drought)
given an average event interval and a specified exceedance period.
<p>

<li><a href="Document/Functions/Ext_val/extval_weibull.html"><strong>extval_weibull</strong></a> - Calculates
the probability (PDF) and cumulative (CDF) distribution functions of
the Weibull Type III distribution given the shape, scale and location
parameters.
<p>

</ul>
<p>
<li><a href="Document/Functions/math.html">General Applied Math</a>
<p>
<ul>
<li><a href="Document/Functions/Contributed/calculate_daily_values.html"><strong>calculate_daily_values</strong></a> -
Calculate daily values [avg, sum, min, max] from high frequency
temporal values.
<p>

<li><a href="Document/Functions/Contributed/calculate_segment_values.html"><strong>calculate_segment_values</strong></a> -
Calculate segment (eg, pentad [5-day], weekly [7-day]) values from
high frequency temporal values.
<p>

<li><a href="Document/Functions/Built-in/ceemdan.html"><strong>ceemdan</strong></a> - Complete ensemble empirical mode
decomposition with adaptive noise.
<p>

<li><a href="Document/Functions/Contributed/cohsq_c2p.html"><strong>cohsq_c2p</strong></a> - Given
coherence-squared and the effective degrees-of-freedom, calculate the
associated probability.
<p>

<li><a href="Document/Functions/Contributed/cohsq_p2c.html"><strong>cohsq_p2c</strong></a> - Calculate the
value(s) of coherence-squared required for a specified significance
level and effective degrees-of-freedom.
<p>

<li><a href="Document/Functions/Contributed/demod_cmplx.html"><strong>demod_cmplx</strong></a> - Perform a
complex demodulation on one or more time series.
<p>

<li><a href="Document/Functions/Built-in/eemd.html"><strong>eemd</strong></a> - Perform ensemble empirical mode
decomposition.
<p>

<li><a href="Document/Functions/Built-in/eofunc_n.html"><strong>eofunc_n</strong></a> / <a href="Document/Functions/Built-in/eofunc_ts_n.html"><strong>eofunc_ts_n</strong></a> /
<a href="Document/Functions/Contributed/eofunc_n_Wrap.html"><strong>eofunc_n_Wrap</strong></a> / 
<a href="Document/Functions/Contributed/eofunc_ts_n_Wrap.html"><strong>eofunc_ts_n_Wrap</strong></a> /
<a href="Document/Functions/Built-in/eof2data_n.html"><strong>eof2data_n</strong></a>
<p>

These are identical to <a href="Document/Functions/Built-in/eofunc.html"><strong>eofunc</strong></a> / <a href="Document/Functions/Built-in/eofunc_ts.html"><strong>eofunc_ts</strong></a> /
<a href="Document/Functions/Contributed/eofunc_Wrap.html"><strong>eofunc_Wrap</strong></a> / 
<a href="Document/Functions/Contributed/eofunc_ts_Wrap.html"><strong>eofunc_ts_Wrap</strong></a> /
<a href="Document/Functions/Built-in/eof2data.html"><strong>eof2data</strong></a>, except you no longer need to reorder the input 
array so that 'time' is the rightmost dimension.
<p>

<li><a href="Document/Functions/Contributed/get_d2r.html"><strong>get_d2r</strong></a> - Return a constant
that converts degrees to radians.
<p>

<li><a href="Document/Functions/Contributed/get_pi.html"><strong>get_pi</strong></a> - Return <b>pi</b> as
a type float or double.
<p>

<li><a href="Document/Functions/Contributed/get_r2d.html"><strong>get_r2d</strong></a> - Return a constant
that converts radians to degrees.
<p>

</ul>
<p>

<li><a href="Applications/heat.html">Heat-Stress functions</a>
<p>
<ul>
<li><a href="Document/Functions/Contributed/fire_index_haines.html"><strong>fire_index_haines</strong></a> -
Calculates the Haines fire index for a sounding.
<p>

<li><a href="Document/Functions/Heat_stress/heat_apptemp.html"><strong>heat_apptemp</strong></a> - Compute apparent
temperature.
<p>

<li><a href="Document/Functions/Heat_stress/heat_discoi.html"><strong>heat_discoi</strong></a> - Compute a
simplified human discomfort index.
<p>

<li><a href="Document/Functions/Heat_stress/heat_discoi_stull.html"><strong>heat_discoi_stull</strong></a> - Compute the
human discomfort index due to excessive heat and humidity using the
Stull wet bulb temperature
(<a href="Document/Functions/Contributed/wetbulb_stull.html"><strong>wetbulb_stull</strong></a>).
<p>

<li><a href="Document/Functions/Heat_stress/heat_esidx_moran.html"><strong>heat_esidx_moran</strong></a> - Compute an
environmental stress index (ESI) which is an alternative to the wet
bulb globe temperature (WBGT).
<p>

<li><a href="Document/Functions/Heat_stress/heat_humidex.html"><strong>heat_humidex</strong></a> - Compute the
'feels-like' temperature for humans.
<p>

<li><a href="Document/Functions/Heat_stress/heat_index_nws.html"><strong>heat_index_nws</strong></a> - Computes the
'heat index' as calculated by the National Weather Service.
<p>

<li><a href="Document/Functions/Heat_stress/heat_swamp_cooleff.html"><strong>heat_swamp_cooleff</strong></a> - Compute
the swamp cooler temperatures at 65% amd 80% efficiency.
<p>

<li><a href="Document/Functions/Heat_stress/heat_thic_thip.html"><strong>heat_thic_thip</strong></a> - Compute the
thermal humidity comfort index (thic) and the thermal humidity
physiology index (thip).
<p>

<li><a href="Document/Functions/Heat_stress/heat_wbgt_inout.html"><strong>heat_wbgt_inout</strong></a> - Compute the
composite Wet-Bulb Globe Temperature (WBGT) index with options for
indoor or outdoor formulations.
<p>

<li><a href="Document/Functions/Heat_stress/heat_wbgt_simplified.html"><strong>heat_wbgt_simplified</strong></a> -
Simplified WBGT index.
<p>

<li><a href="Document/Functions/Contributed/wetbulb_stull.html"><strong>wetbulb_stull</strong></a> - Calculate
wet bulb temperature at standard sea level pressure (1013.25 hPa)
using the method of R.Stull.
<p>

</ul>
<p>
<li><a href="Applications/legend.html">Legends</a>
<p>
<ul>

<li><a href="Document/Functions/Shea_util/simple_legend.html"><strong>simple_legend</strong></a> - Creates a
legend based on user supplied resources. simple_legend gives the user
complete control over the design and placement of the legend, and can
be seen as an easier way to create legends in NCL. See 
examples <a href="Applications/legend.html#ex16">leg_16.ncl</a> and
<a href="Applications/legend.html#ex17">leg_17.ncl</a>.
<p>

</ul>

<p>
<li><a href="Document/Functions/meteo.html">Meteorology</a>
<p>
<ul>
<li><a href="Document/Functions/Contributed/brunt_vaisala_atm.html"><strong>brunt_vaisala_atm</strong></a> - Compute
the Brunt-Vaisala frequency which is a measure of bouyancy in a
continuously stratified atmosphere.
<p>

<li><a href="Document/Functions/Contributed/coriolis_param.html"><strong>coriolis_param</strong></a> - Compute
Coriolis parameter.
<p>

<li><a href="Document/Functions/Contributed/eady_growth_rate.html"><strong>eady_growth_rate</strong></a> - Compute
the Eady maximum baroclinic growth rate.
<p>

<li><a href="Document/Functions/Contributed/epflux.html"><strong>epflux</strong></a> - Compute
quasi-geostrophic Eliassen-Palm fluxes at isobaric levels.
<p>

<li><a href="Document/Functions/Contributed/grad_latlon_cfd.html"><strong>grad_latlon_cfd</strong></a> - Compute
the meridional and zonal gradients of a variable on a global or
limited area rectilinear grid.
<p>

<li><a href="Document/Functions/Contributed/latent_heat_water.html"><strong>latent_heat_water</strong></a> - Estimate
latent heat flux for water: evaporization (condensation), melting
(freezing) or sublimation (deposition).
<p>

<li><a href="Document/Functions/Contributed/pot_temp_equiv.html"><strong>pot_temp_equiv</strong></a> - Compute
equivalent potential temperature..
<p>

<li><a href="Document/Functions/Built-in/pres_hybrid_jra55.html"><strong>pres_hybrid_jra55</strong></a> - Calculates the "full"
hybrid levels for the 60-level Japanese ReAnalysis.
<p>

<li><a href="Document/Functions/Built-in/relhum_ice.html"><strong>relhum_ice</strong></a> / <a href="Document/Functions/Built-in/relhum_water.html"><strong>relhum_water</strong></a> -
Calculates relative humidity with respect to ice/water, given
temperature, mixing ratio, and pressure.
<p>
Contributed by Alan Brammer of the University at Albany - SUNY.
<p>

<li><a href="Document/Functions/Contributed/rigrad_bruntv_atm.html"><strong>rigrad_bruntv_atm</strong></a> - Compute
the atmospheric gradient Richardson number and, optionally, the
Brunt-Vaisala, buoyancy and shear.
<p>

<li><a href="Document/Functions/Contributed/satvpr_water_bolton.html"><strong>satvpr_water_bolton</strong></a> -
Estimate the saturation vapor pressure over water using Bolton's
equation 10.
<p>

<li><a href="Document/Functions/Contributed/satvpr_water_stipanuk.html"><strong>satvpr_water_stipanuk</strong></a> -
Estimate the saturation vapor pressure over water using the Stipanuk
approximation.
<p>

<li><a href="Document/Functions/Built-in/wetbulb.html"><strong>wetbulb</strong></a> - Compute wetbulb temperature. 
<p>

<li><a href="Document/Functions/Contributed/wgt_vertical_n.html"><strong>wgt_vertical_n</strong></a> - Calculate a
weighted vertical average and/or sum (integral).
<p>

<li><a href="Document/Functions/Contributed/wind_speed.html"><strong>wind_speed</strong></a> - Calculate wind
speed from zonal and meridional wind components and return associated
meta data.
<p>

<li><a href="Document/Functions/Contributed/wind_stats.html"><strong>wind_stats</strong></a> - Given a
sequence of wind speeds and directions, compute assorted wind-related
statistics including the standard deviation of the wind direction.
<p>

</ul>
</ul>
<p>
<p>

<a name="NewFeatures6.4.0"></a>
<hr>
<p>
<b>New features</b>
<p>

<a name="BlockStyleComments6.4.0"></a>
<b>Block style comments</b><p>

You can now do "block style" comments in NCL, using <b><em>/;</em></b>
and <b><em>;/</em></b> to start and end a block:
<p>

<pre>
<b>/;</b>
    This is inside an NCL block style comment,
    available in NCL V6.4.0.
<b>;/</b>

  print("A demonstration of block comments")

<b>/;</b>
  print("This line should not be printed")
  print("...nor this one")
  print("...or this one")
<b> ;/</b>
</pre>
<p>

<a name="NCLUserGuide6.4.0"></a>
<b>NCL User Guide examples and data files included</b><p>

All 100+ <a href="Document/Manuals/NCL_User_Guide/index.html">NCL User
Guide</a> (NUG) tutorial scripts and many of the required data files
are included with NCL V6.4.0.
<p>

Look in the directories:

<blockquote>
$NCARG_ROOT/lib/ncarg/nclex/nug<br>
$NCARG_ROOT/lib/ncarg/data/nug<br>
</blockquote>
<p>

or use the "ng4ex" command to generate the full list or run any one of
them individually:

<pre>
  ng4ex -nug -list
  ng4ex NUG_curvilinear_basic
</pre>
<p>

A complete set of scripts and data files can also be found
<a href="Document/Manuals/NCL_User_Guide/index.html">online</a>.
<p>

<a name="LabelbarsWithTriangleEnds6.4.0"></a>
<b>Labelbars with triangle ends</b><p>

You can now generate labelbars with triangle ends instead of rectangle
ends. See the <a href="Document/Graphics/Resources/lb.html#lbBoxEndCapStyle"><em>lbBoxEndCapStyle</em></a> resource
mentioned in the <a href="#NewResources6.4.0">new resources</a> section,
or examples <a href="Applications/labelbar.html#ex16">lb_16.ncl</a>,
<a href="Applications/labelbar.html#ex17">lb_17.ncl</a>,
<a href="Applications/labelbar.html#gpm_1">gpm_1.ncl</a>,
and <a href="Applications/labelbar.html#corel_3">corel_3.ncl</a> on
the <a href="Applications/labelbar.html">labelbar examples page</a>.
<p>

<a name="PreloadedScripts6.4.0"></a>
<b>Preloaded NCL scripts</b><p>

Several NCL scripts are now preloaded, and you no longer need to
explicitly load them at the top of your own scripts. Here's a full
list of the preloaded scripts:
<p>

<pre>
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_csm.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/shea_util.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/bootstrap.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/csm/extval.ncl"
    "$NCARG_ROOT/lib/ncarg/nclscripts/wrf/WRFUserARW.ncl"
</pre>
<p>

It's okay to still load these scripts even though it's no longer required.
<p>In most cases you will not notice but loading these scripts does take a few tenths of a second. 
In certain situations where you want to run many very short scripts the resulting overhead  
may cause a significant slowdown of your work flow. For this case, a new command line option, '-s',
allows you to start NCL without preloading any scripts.
<p>

<a name="BackwardsIncompatibleChanges6.4.0"></a>
<hr>
<p>
<b>Backwards-incompatible changes</b>
<p>

<a name="MapDataBaseVersionUpgrade6.4.0"></a>
<b>The "MediumRes" map database will now be the default in some cases</b><p>

This involves a change to the default value of the
<a href="Document/Graphics/Resources/mp.html#mpDataBaseVersion"><em>mpDataBaseVersion</em></a> resource</b><p>

This resource has a new default value of "Dynamic". This means that the
"LowRes" database (the default in older versions of NCL) will be used,
unless either of the boundary-set resources 
<a href="Document/Graphics/Resources/mp.html#mpFillBoundarySets"><em>mpFillBoundarySets</em></a>
or <a href="Document/Graphics/Resources/mp.html#mpOutlineBoundarySets"><em>mpOutlineBoundarySets</em></a> are set to
anything other than "Geophysical", in which case the "MediumRes"
database will be used.
<p>

This behavior represents a balance between performance and accuracy
for common use cases. For global-scale maps depicting just the
continents and oceans, the LowRes database is more than sufficient,
whereas the more detailed MediumRes database would incur additional
compute overhead. However, the political boundaries of the MediumRes
database are more up-to-date, and are thus favored if any political
boundaries are to be drawn.
<p>

Click on the images below for a comparison with the previous version
of NCL, and note the differences in the righmost panel. The left plot
of both versions shows the default "LowRes" database. The right panel
of NCL V6.3.0 still shows the "LowRes" database, while the right plot
of NCL V6.4.0 automatically defaulted to "MediumRes"
<p>

<table border=1>
<tr>
<tr>
<td align=center><a href="https://www.ncl.ucar.edu/Images/default_map_change_630.png"><img src="https://www.ncl.ucar.edu/Images/default_map_change_630.sm.png"></a>
<td align=center><a href="https://www.ncl.ucar.edu/Images/default_map_change_640.png"><img src="https://www.ncl.ucar.edu/Images/default_map_change_640.sm.png"></a>
</table>
<p><p>

<a name="LabelbarOpacity6.4.0"></a>
<b>Labelbar colors will now reflect opacity used in plot</b><p>

The labelbar associated with filled contour and color vector plots
will now reflect any opacity applied.
<p>

If this behavior is not desired, then set the
new resource <a href="Document/Graphics/Resources/lb.html#lbOverrideFillOpacity"><em>lbOverrideFillOpacity</em></a>
to True.
<p>

Click on the images below for a comparison with the previous version
of NCL, and note the differences in the bottom labelbar.<br>
<p>

<table>
<tr>
<td align=center><a href="https://www.ncl.ucar.edu/Images/labelbar_transparency_6_3_0.png"><img src="https://www.ncl.ucar.edu/Images/labelbar_transparency_6_3_0.sm.png"></a>
<td align=center><a href="https://www.ncl.ucar.edu/Images/labelbar_transparency_6_4_0.png"><img src="https://www.ncl.ucar.edu/Images/labelbar_transparency_6_4_0.sm.png"></a>
</table>
<p>

<a name="UpdatedFunctions6.4.0"></a>
<hr>
<p>
<b>Updated functions</b>
<p>

<ul>

<li><a href="Document/Functions/Built-in/betainc.html"><strong>betainc</strong></a> / <a href="Document/Functions/Built-in/gammainc.html"><strong>gammainc</strong></a> - These
functions no longer require that the input values be float or
double.<p>

<li><a href="Document/Functions/Contributed/calculate_monthly_values.html"><strong>calculate_monthly_values</strong></a> -
This function no longer requires that the time dimension name be
'time'. Also, (i) the algorithm no longer assumes that the values are
equally spaced in time; and (ii) the user may specify that a minimum
number of observation be used for deriving a statistic.
<p>

<li><a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a>
/ <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a> - These functions were enhanced
to allow different numeric types for the input parameters and the
return array. The return array will still default to type "double"
unless the special attribute "return_type" is set to "float", "long",
or "int". Read the function documentation for more details.
<p>

<li><a href="Document/Functions/Built-in/conform.html"><strong>conform</strong></a> / <a href="Document/Functions/Built-in/conform_dims.html"><strong>conform_dims</strong></a> -
These functions have been updated to more easily work on arrays with
degenerate dimensions or arrays that are already the size you want to
conform them to. This should simplify code where you may have had to
check the rank of a variable before conforming it to another variable.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a> - This function
underwent a major overhaul to allow for horizontal curves and bars to
be filled when
<a href="Document/Graphics/Resources/gsn.html#gsnXRefLine"><em>gsnXRefLine</em></a> is set. This is the same
behavior that already existed for
<a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a>. See the
<a href="Applications/bar.html">bar chart page</a> for several
horizontal bar examples.
<p>

<li><a href="Document/Functions/Contributed/printMinMax.html"><strong>printMinMax</strong></a> - The "units"
attribute, if present, is now added to the printed output.
<p>

<li><a href="Document/Functions/Built-in/regCoef-1.html"><strong>regCoef</strong></a> / <a href="Document/Functions/Built-in/regCoef_n.html"><strong>regCoef_n</strong></a> - These
functions now return the y-intercept.<p>

<li><a href="Document/Functions/Contributed/regline_stats.html"><strong>regline_stats</strong></a> - Added
several new attributes related to 95% confidence limits of the slope
and y-intercept, the mean responses, and the prediction
limits. Examples of use were added to the
<a href="Applications/regress.html"><b>regress/trend</b></a>
page. See: <b>regress_1a.ncl</b>, <b>regress_1b.ncl</b>, <b>regress_1c.ncl</b>
and <b>regress_3.ncl</b>. 
<p>

<li><a href="Applications/skewt.html"><b>skewt_func</b></a> - Added
ability to change the thickness of the wind barbs.

<p>
<li><a href="Document/Functions/Built-in/trend_manken.html"><strong>trend_manken</strong></a> - Added recognition of
the <em>opt</em> argument: if <em>opt</em> is set to True, then the
trend is not calculated.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_vert_interp.html"><strong>wrf_user_vert_interp</strong></a> - Added
recognition of a new opt@<em>time</em> attribute that allows you to
specify which time index was used to extract the variables for
interpolation.
<p>

</ul>
<p>

<a name="NewResources6.4.0"></a>
<hr>
<p>
<b>New resources</b>
<p>
<ul>

<li><a href="Document/Graphics/Resources/gsn.html#gsnHistogramBarColors"><em>gsnHistogramBarColors</em></a> - Set individual
colors for bars in a histogram generated by
<a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a>. See
examples <a href="Applications/histo.html#ex6">histo_6.ncl</a>
and <a href="Applications/histo.html#ex7">histo_7.ncl</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelMainString"><em>gsnPanelMainString</em></a> - Set a main title for
paneled plots created from <a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>.
This resource replaces the awkwardly named "txString" 
resource, which will still work for backwards compatibility.
<p>

Other resources were added to allow you to customize the panel title:
<p>
<ul>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelMainFont"><em>gsnPanelMainFont</em></a> - Sets
the font for <a href="Document/Graphics/Resources/gsn.html#gsnPanelMainString"><em>gsnPanelMainString</em></a>.
This resource replaces the awkwardly named "txFont" 
resource, which will still work for backwards compatibility.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelMainFontColor"><em>gsnPanelMainFontColor</em></a> - Sets
the font color for <a href="Document/Graphics/Resources/gsn.html#gsnPanelMainString"><em>gsnPanelMainString</em></a>.
This resource replaces the awkwardly named "txFontColor" 
resource, which will still work for backwards compatibility.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelMainFontHeightF"><em>gsnPanelMainFontHeightF</em></a> - Sets
the font height for <a href="Document/Graphics/Resources/gsn.html#gsnPanelMainString"><em>gsnPanelMainString</em></a>.
This resource replaces the awkwardly named "txFontHeightF" 
resource, which will still work for backwards compatibility.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelPosXF"><em>gsnPanelPosXF</em></a>
/ <a href="Document/Graphics/Resources/gsn.html#gsnPanelPosYF"><em>gsnPanelPosYF</em></a> - Sets the X and Y
positions of the main title using NDC coordinates. Replaces
"txPosXF" and "txPosYF".

</ul>
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnPanelFigureStringsJust"><em>gsnPanelFigureStringsJust</em></a> - Set the
location of the figure strings in a set of paneled plots created
from <a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>. This resource
replaces the awkwardly named "amJust" resource, which will
still work for backwards compatibility.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnLeftXRefLineColor"><em>gsnLeftXRefLineColor</em></a> and
<a href="Document/Graphics/Resources/gsn.html#gsnRightXRefLineColor"><em>gsnRightXRefLineColor</em></a> - Fills
the curve to the left or right of the X reference line specified
by <a href="Document/Graphics/Resources/gsn.html#gsnXRefLine"><em>gsnXRefLine</em></a> with the
given color. See
examples <a href="Applications/xy.html#exvert_21">xy_vert_21.ncl</a>
and <a href="Applications/bar.html#exhrz4">bar_horz_4.ncl</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXRefLineColors"><em>gsnXRefLineColors</em></a>,
<a href="Document/Graphics/Resources/gsn.html#gsnXRefLineDashPatterns"><em>gsnXRefLineDashPatterns</em></a>, 
<a href="Document/Graphics/Resources/gsn.html#gsnXRefLineThicknesses"><em>gsnXRefLineThicknesses</em></a> - These
resources are similar to their counterparts, 
<a href="Document/Graphics/Resources/gsn.html#gsnYRefLineColors"><em>gsnYRefLineColors</em></a>,
<a href="Document/Graphics/Resources/gsn.html#gsnYRefLineDashPatterns"><em>gsnYRefLineDashPatterns</em></a>, and
<a href="Document/Graphics/Resources/gsn.html#gsnYRefLineThicknesses"><em>gsnYRefLineThicknesses</em></a>, and allow you
to set the colors, dash patterns, and thicknesses for X reference
lines drawn with
<a href="Document/Graphics/Resources/gsn.html#gsnXRefLine"><em>gsnXRefLine</em></a>. See
example <a href="Applications/xy.html#ex36">xy_36.ncl</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYLeftFillColors"><em>gsnXYLeftFillColors</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnXYRightFillColors"><em>gsnXYRightFillColors</em></a> - These resources
allow you to set the fill colors for horizontal bar charts, a new
feature added in NCL V6.4.0. See
example <a href="Applications/xy.html#exvert_17">xy_vert_17.ncl</a>.
<p>

<li><a href="Document/Graphics/Resources/lb.html#lbBoxEndCapStyle"><em>lbBoxEndCapStyle</em></a> - Controls the
style of the two outer boxes of a labelbar, which can either be
rectangular or triangular/arrow shaped. See
examples <a href="Applications/labelbar.html#ex16">lb_16.ncl</a>,
<a href="Applications/labelbar.html#ex17">lb_17.ncl</a>,
<a href="Applications/labelbar.html#gpm_1">gpm_1.ncl</a>,
and <a href="Applications/labelbar.html#corel_3">corel_3.ncl</a> on
the <a href="Applications/labelbar.html">labelbar examples page</a>.
<p>

<li><a href="Document/Graphics/Resources/lb.html#lbFillOpacityF"><em>lbFillOpacityF</em></a> - Allows you to
set the fill opacity for labelbars. This is generally meant for
user-created labelbars, and not labelbars created by contour or vector
plots. See
example <a href="Applications/labelbar.html#ex22">lb_22.ncl</a>.

<p>

<li><a href="Document/Graphics/Resources/lb.html#lbOverrideFillOpacity"><em>lbOverrideFillOpacity</em></a> - The
labelbar associated with filled contour plots will now reflect the
opacity of the fill colors. Set this resource to True if you do not
want this behavior. See
example <a href="Applications/overlay.html#ex12">overlay_12.ncl</a>.
<p>

<li><a href="Document/Graphics/Resources/xy.html#xyLineOpacityF"><em>xyLineOpacityF</em></a>, 
<a href="Document/Graphics/Resources/xy.html#xyLineOpacities"><em>xyLineOpacities</em></a>,
<a href="Document/Graphics/Resources/xy.html#xyMarkerOpacityF"><em>xyMarkerOpacityF</em></a>,
<a href="Document/Graphics/Resources/xy.html#xyMarkerOpacities"><em>xyMarkerOpacities</em></a> - These resources
allow you to control the opacity of lines and markers in an XY plot.
See example <a href="Applications/xy.html#ex35">xy_35.ncl</a>.
<p>

</ul>

<a name="NewExamples6.4.0"></a>
<hr>
<p>
<b>New example pages</b>
<p>
<ul> 
<li><a href="Applications/access.html">ACCESS</a> model
<p>
<li><a href="Applications/bootstrap.html">Bootstrapping; Resampling</a>
<p>
<li><a href="Applications/spec.html">Complex Demodulation</a>
<p>
<li><a href="Applications/crop.html">Crop: Evapotranspiration; Penman-Monteith</a>
<p>

<li><a href="Applications/EPflux.html">Eliassen-Palm flux (EP-flux);
Brunt-Vaisala; Eady Growth rate; Gradient Richardson number</a>

<p>

<li><a href="Applications/eemd.html">Extended and Complete Empirical
Mode Decomposition: EEMD and CEEMDAN</b></a>

<p>
<li><a href="Applications/gradients.html">Gradients: Meridional and Zonal</a>
<p>
<li><a href="Applications/heat.html">Heat Index/Stress</a>
<p>
<li><a href="Applications/plot_data_on_map.html">Plotting Data on Map</a>
<p>
<li><a href="Applications/extreme_value.html">Simple Extreme Value Statistics</b></a>
<p>
<li><a href="Applications/task_parallelism.html">Task Parallelism</a>
</ul>
<p>

<p>
<a name="NewColorTable6.4.0"></a>
<hr>
<p>
<b>New color table</b>
<p>

The new default color table for matplotlib,
<a href="Document/Graphics/ColorTables/MPL_viridis.html">MPL_viridis</a>,
was added, thanks to Brian Medeiros of NCAR.<p>

<a href="Document/Graphics/ColorTables/MPL_viridis.html"><img src="Document/Graphics/ColorTables/Images/MPL_viridis_labelbar.sm.png"></a><br>
<p>
<a name="FileIOImprovements6.4.0"></a>
<hr>
<p>
<b>File I/O Improvements</b>
<uL>
<li>The "advanced" file system that supports groups and advanced data types is now the default for HDF5 and NetCDF4 data. 
The old HDF5 module that uses the standard file system is now deprecated and its use is not advised. HDFEOS5 still defaults to the standard
file system (where groups names are appended to variable names to make them unique) because there are 
some remaining issues with the advanced version. The standard file system is also the default for NetCDF3 and NetCDF4 Classic Model files. 
While the <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> "FileStructure" option can still be used to explicitly switch between the "advanced" and "standard" file
systems for certain formats (such as NetCDF3), it is now mostly unnecessary and it is anticipated that this option will soon become obsolete. 
<p>
<li>Support was added for CDF5, a NetCDF3 model variant developed at Argonne National Laboratory, that supports very large variables. Although
CDF5 has a NetCDF3-like interface, NCL needs to use the advanced file system to access data in this format, primarily because it supports additional
atomic types like unsigned and 64-bit integers.
<p>
<li>The syntax for working with groups and variables within groups has been regularized as follows:
  <ul>
    <li>A variable in any group may be read from the top level without further qualification using the syntax:<br>
      <code>v = f->variable_name</code>.<br>
      If more than one variable with the same name exists in the file, the first one encountered will be returned. The search order is
      the same as the order returned by <a href="Document/Functions/Built-in/getfilevarnames.html"><strong>getfilevarnames</strong></a>.
    <li>A slash character ('/') is required as the first character naming a variable in a lower group:<br>
      <code>v = f->/group_name/variable_name</code><br>
      This is needed to for backwards compatibility to disambiguate a reference to a variable in a file from a variable in a file divided (numerically) by a 
      local variable (because NCL has never required spaces separating operators from the operands). The slash that follows directly after the "->"
      operator indicates that any other slashes prior to the next following space are separators between groups or between a 
      group and a variable. This means that you <i>do</i> need
      a space prior to a slash meant for numerical division when a variable is specified using the initial slash character.
    <li>On the other hand, an initial slash is optional for referencing a group:<br>
      <code>g = f=>group1/group2</code><br>
      works as well as<br>
      <code>g = f=>/group1/group2</code><br>
    <li>If group or variable names contain characters, such as punctuation or white space characters, that are not allowed for NCL symbol names, 
      the user can reference the group or variable using <a href="Document/Manuals/Ref_Manual/NclVariables.html#FileStringRef">NCL string references</a>
      or by substituting underscrore '_' characters in place of each character that is not allowed. Of course, it is possible that this substitution would
      lead to ambiguities. In that case, as with variables specified without fully qualifying paths, the first encountered group or variable will be returned.
    <li>NCL printing routines for the advanced file system always print the real names of variables with the actual characters used in the file.
  </ul>
<p>
<li>Compound data can now be accessed either by individual component member or as a complete variable. Accessing by component relies on the dot ('.') character to 
separate the compound variable name from the member name. If using string referencing because either the variable name or the member contains disallowed 
characters, the complete name (everything following the "->" operator) should be quoted. 
<p>Accessing a complete compound variable returns a varible of type <i>list</i> 
to NCL. Each individual component member becomes a list element. Outer dimensions (those applying to the compound variable as a whole) and inner dimensions 
(those applying to individual members) are combined to form the dimensionality of each element of the list.
<p>
<li>Both <a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> and <a href="Document/Tools/ncl_filedump.html">ncl_filedump</a> have been enhanced to 
accept filenames with spaces as parameters on the command line.<p>
<li>NCL can now read certain ECMWF GRIB1 files with records whose size is greater than 256^3, 
the largest size that can be specified in the conventional manner in a GRIB1 file. This was made possible due to some code borrowed from the <b>wgrib</b> tool. 
This code comes from ECMWF and uses an undocumented extension to allow for larger record sizes.<p>
<li>The HDF5 reference type is now supported at a basic level. HDF5 references are pointers to other variables in the same file. If an HDF5 reference is assigned to an NCL
variable it is converted to the NCL string type. The string value will be the full path of the variable that is referenced.<p>
<li>Support for multiple unlimited dimensions in NetCDF4 and HDF5 has been improved.<p>
<li>HDF5 dimensions that are unnamed by HDF5 have a more robust naming scheme.<p>
<li>The NCEP GRIB1 and GRIB2 tables have been updated fairly recently.<p>
<li>NCL can now ususally figure out the format of files that have no extension. The only remaining confusion is distinguishing between NetCDF4 files and HDF5 files that are not NetCDF4.<p>
<li>To enhance performance, the caching of unlimited variable values was eliminated. Testing has shown that this has more or less effect depending on the file format
and the size of the unlimited dimension, but it never caused a slow-down.
</ul>


<a name="FileIOBugsFixed6.4.0"></a>
<hr>
<p>
<b>File I/O bugs fixed</b>
<p>

<ul>
<li>Fixed a major bug in the GRIB1 code that resulted in some elements of the non-horizontal dimensions of a variable 
being presented in the wrong location in NCL's representation. This occurred in certain cases where one or more 
elements at the beginning of the affected dimension were missing. The code that sorts the records into their proper
position was completely rewritten to fix this issue. An intended future benefit of this rewrite is to make it 
easier to add new dimensions as needed.<p>

<li>Fixed a bug where you couldn't read a NetCDF-4 variable that
contains a '.' character; for example, "conc.instant_Cs137".
<p>

<li>Fixed a bug where HDF5 strings in nested groups were not accessible.<p>
<li>Fixed a serious bug where opening an HDF5 file in "w" or "c" mode resulted in
the original file being deleted. Now opening an HDF5 file works as expected in NCL.
<p>
<li>Fixed a bug in which opening some HDF5 files with "new" file
features (like groups, compound data, enum, etc) would cause a
segmentation fault.
<p>

A work-around for V6.3.0 is to call the following before you open the file:
<p>

<pre>
  <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a>("h5", "FileStructure", "Advanced") 
</pre>
<p>

or to use the "-f" option when running ncl:
<p>
<pre>
  ncl -f myscript.ncl
</pre>
<p>

<li>Fixed a bug where deleting a group would delete parts of the file
variable structure.
<p>

<li>Fixed a bug that led to a segmentation fault when trying to read a
variable from a NetCDF4 file opened in "w" mode.
<p>

<li>Fixed a bug that resulted in a segmentation fault when re-writing
string attributes to a NetCDF4 file, even if the attribute values were
unmodified from their previous values in the file.
<p>

<li>Fixed a segmentation fault that occurred when
using <a href="Document/Functions/Built-in/fileattdef.html"><strong>fileattdef</strong></a> to create global attributes in a
NetCDF4 file.
<p>
<li>Fixed a problem that resulted in NCL reading a variable from the wrong
group. Both variables had the same name, but the group traversing code
was incorrect.<p>
<li>Fixed a problem with printing an HDF variable len variable that contained
reference type variables.<p>
<li>Fixed a problem where scalar variables were given an improper dimension
size and the dimension improperly labeled "unlimited" when first created in
a NetCDF4 file.<p>
<li>Eliminated unnecessary warnings for the GRIB "curvilinear orthogonal grid".<p>
<li>Fixed a problem with JRA GRIB1 files where the names of certain variables was
no longer correct because access to some local-to-JRA information was lost
due to a faulty piece of code.<p>
<li>Fixed the HDF5 code to allow access to all the possible string types including
variable length strings, fixed-size NULL byte filled (C-style), and fixed-size space
filled (Fortran-style). This was implemented both for attributes and regular
variables.<p>
<li>Fixed an issue where using the NCL dimension name operator (!) was returning the
wrong dimension name for NetCDF4 files.<p>
<li>Fixed a seg fault with GRIB files that have what may or may not be a bogus negative time
period. The time period is definitely negative. Whether or not this is bogus is not yet 
determined.<p>
<li>Fixed a seg fault that occurred when trying to access a non-existent variable 
attribute in a NetCDF4 file.<p>
<li>Fixed a problem with incorrect forecast times for certain ARPEGE GRIB2 files.<p>
<li>Fixed a problem using the list style delete syntax for deleting
file variables and coordinate variables.<p>
<li>Added some GRIB 2 tables to allow decoding of non-standard MRMS data from NCEP.<p>

<li><a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a> - Fixed a bug that limited file names
to less than 256 characters.<p>

<li><a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> - Fixed a bug with arbitrary
subscripting of an aggregated dimension when the time units vary.
<p>
Note that the time coordinate units attached to the first file in the
file list is always used as the common unit. If other files in the
list have earlier times than the common unit, they will be converted to
negative values. They will still be correct (the correct date string
can be obtained using the usual routines), but if the files in the
list are not in chronological order, the following warning will be
emitted:

<pre>
warning:Aggregated dimension coordinate values are non-monotonic; check aggregated file ordering
</pre><p>
Also fixed a subsequent issue with the coordinate values being calculated incorrectly and an issue
where the aggregated dimension has no associated coordinate array.

<li><a href="Document/Functions/Built-in/fbinread.html"><strong>fbinread</strong></a> / <a href="Document/Functions/Built-in/fbinwrite.html"><strong>fbinwrite</strong></a> /
<a href="Document/Functions/Built-in/fbindirread.html"><strong>fbindirread</strong></a> / <a href="Document/Functions/Built-in/fbindirwrite%20.html"><strong>fbindirwrite </strong></a> -
Fixed a bug where these functions would fail if you tried to write
more than 2 GB to a file.<p>

<li><a href="Document/Functions/Built-in/write_table.html"><strong>write_table</strong></a> - Fixed a bug that didn't allow you
to write logicals to a file.<p>
<p>

</ul>
<p>

<a name="FuncProcBugsFixed6.4.0"></a>
<p>
<b>Functions and procedures bugs fixed</b>
<p>

<ul>

<li>advect_var - This function was incorrectly named in NCL
V6.3.0. The correct name
is <a href="Document/Functions/Contributed/advect_variable.html"><strong>advect_variable</strong></a>.
<p>

<li>Fixed an issue with math functions like <a href="Document/Functions/Built-in/stddev.html"><strong>stddev</strong></a>
where if a "ubyte" type was used, the _FillValue was ignored.
<p>

<li><a href="Document/Functions/Built-in/area_conserve_remap.html"><strong>area_conserve_remap</strong></a> - Fixed a bug where if
missing values were input for a 2D grid, then the output grid was not
returning all missing values.
<p>

<li><a href="Document/Functions/Contributed/decimalPlaces.html"><strong>decimalPlaces</strong></a> - Fixed a bug
to make this function round correctly.
<p>

<li><a href="Document/Functions/Built-in/dim_acumrun_n.html"><strong>dim_acumrun_n</strong></a> - Fixed a bug where this function
was returning float output, even if integers were input. This function
will now return the type that matches the type of the input array,
except in the case of bytes or shorts, then integers will be
returned.
<p>

<li><a href="Document/Functions/Built-in/dpres_plevel.html"><strong>dpres_plevel</strong></a> - Fixed a bug for a pathological
case where if psfc and ptop are between levels, the function would
fail.
<p>

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> - Fixed a bug where
this function would sometimes produce an incorrect error about not
having the correct number of triangles for the internal triangular
mesh that it generates.<p>

<li><a href="Document/Functions/Contributed/f2foshv_Wrap.html"><strong>f2foshv_Wrap</strong></a>
/ <a href="Document/Functions/Contributed/fo2fshv_Wrap.html"><strong>fo2fshv_Wrap</strong></a> - Removed
incorrect syntax that subtracted or added one to the size of the
latitude arrays of uNew and vNew and prevented the functions from
working at all.
<p> 

<li><a href="Document/Functions/Built-in/gc_latlon.html"><strong>gc_latlon</strong></a> - This function now uses a more
general algorithm to hopefully prevent NaNs from being returned
when input points are very close to each other. <p>

<li><a href="Document/Functions/Contributed/generate_sample_indices.html"><strong>generate_sample_indices</strong></a> -
replaced the method used with a similar but more robust method.
<p>

<li><a href="Document/Functions/Built-in/int2p.html"><strong>int2p</strong></a>, <a href="Document/Functions/Built-in/int2p_n.html"><strong>int2p_n</strong></a> - Fixed a bug
which occurred when the input and output pressure levels were not
monotonically decreasing. The functions now work regardless of the
input or output pressure level ordering.
<p>

<li><a href="Document/Functions/Built-in/kolsm2_n.html"><strong>kolsm2_n</strong></a> - Fixed a bug in which using
multiple dimensions (for example, in the time dimension) would
cause the results to be wrong. 
<p>

<li><a href="Document/Functions/Contributed/pot_vort_isobaric.html"><strong>pot_vort_isobaric</strong></a> - Andy
Show (12/15) reported that the term [ R/(s*p) ] should be [ 1/s ].
<p>

<li><a href="Document/Functions/Contributed/rm_single_dims.html"><strong>rm_single_dims</strong></a> - Fixed a
bug where dimension names of non coordinate variables would get removed
from the output array.
<p>

<li><a href="Document/Functions/Contributed/stat_dispersion.html"><strong>stat_dispersion</strong></a> - Fixed a
bug where setting the <em>opt</em>=True but not associating any
attributes resulted in a fatal error.
<p>

<li><a href="Document/Functions/Contributed/table_attach_rows.html"><strong>table_attach_rows</strong></a> - Removed
debugging print statements.
<p>

<li><a href="Document/Functions/Built-in/thornthwaite.html"><strong>thornthwaite</strong></a> - This function will now exit more
gracefully if time is not a multiple of 12. It will also allow a
scalar time value.<p>

<li><a href="Document/Functions/Built-in/trend_manken.html"><strong>trend_manken</strong></a> - Fixed bug in which passing a
really large array (i.e. 400 MB) would cause this routine to hang
and/or produce a segmentation fault. The issue was with the internal
sorting algorithm used, which is required to calculate the trend. A
new sorting algorithm was implemented, and also the option to not
calculate the trend was added.
<p>

<li><a href="Document/Functions/Built-in/triple2grid.html"><strong>triple2grid</strong></a> - Fixed a bug where the output
results were sometimes shifted by one pixel in both directions. The
value for "domain" now defaults to 1 instead of 0.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_map_resources.html"><strong>wrf_map_resources</strong></a> - Fixed
a bug in which rotated projection parameters were not
always set correctly.<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a> - Fixed
the following bugs:
<p>
<ul>
<li>"cape_2d" and "cape_3d" - Fixed a bug in which the PSFC variable
was not being converted to hPa as required by these routines.
<p>


<li>"ctt" (cloud top temperature)<P>
<ul>

<li>This function now returns its values in degrees Celsius (it was
previously returning them in degrees Kelvin). This is to stay
consistent with other diagnostics that are returned in Celsius.

<li>Fixed a bug where the pressure values were not being converted
properly.

<li>Fixed the interface to allow "ctt" to be calculated for multiple
timesteps when used with <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>.

</ul>
<p>

<li>"helicity" - Fixed the interface to allow helicity to be
calculated for multiple timesteps.
<p>

<li>"omg" (omega) - Fixed a bug in which the calculation was
incorrectly using the temperature values for the water vapor mixing
ratio, making the output results nonsensical.

</ul>

</ul>
<p>

<a name="DateConversionsBugsFixed6.4.0"></a>
<p>
<b>Date conversion routines bugs fixed</b>
<p>

<ul>

<li><a href="Document/Functions/User_contributed/calendar_decode2.html"><strong>calendar_decode2</strong></a> - This
function has been updated to call <a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>
instead of <a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a>. This helps address some
issues found with the Udunits code, like the infamous
<a href="#DateConversion60SecondBug6.4.0">60 second bug</a> mentioned
in this document. There are still occasions where the 60 second bug
may occur. If it does, try the
temporary <a href="Document/Functions/User_contributed/calendar_decode2_fix.html"><strong>calendar_decode2_fix</strong></a>
function.
<p>


<li><a href="Document/Functions/Contributed/cd_convert.html"><strong>cd_convert</strong></a> - This function
was fixed to recognize the "calendar" attribute.
<p>

<li><a href="Document/Functions/Built-in/day_of_year.html"><strong>day_of_year</strong></a> / <a href="Document/Functions/Built-in/days_in_month.html"><strong>days_in_month</strong></a> /
<a href="Document/Functions/Built-in/day_of_week.html"><strong>day_of_week</strong></a> / <a href="Document/Functions/Built-in/isleapyear.html"><strong>isleapyear</strong></a> - These
functions now correctly set the _FillValue attribute if there are
potentially missing values returned.
<p>

<li><a href="Document/Functions/User_contributed/time_axis_labels.html"><strong>time_axis_labels</strong></a> - Fixed a bug 
where this function wasn't recognizing the "calendar" attribute.
<p>

<a name="DateConversion60SecondBug6.4.0"></a>
<li>New temporary date conversion routines introduced to address "60
second" bug<p>

Many users reported a "60 second" bug in several of NCL's date
conversion routines, in which you get a value of "<i>n</i> minutes, 60
seconds" instead of "<i>n+1</i> minutes, 0 seconds". See details in
the example scripts below.<p>

In order to address this problem, several new date conversion routines
have been <b><i>temporarily</i></b> introduced in NCL V6.4.0 to see if
they are acceptable replacements for their original counterparts:

<ul>
<li><a href="Document/Functions/Built-in/ut_calendar_fix.html"><strong>ut_calendar_fix</strong></a>
<li><a href="Document/Functions/Built-in/ut_inv_calendar_fix.html"><strong>ut_inv_calendar_fix</strong></a>
<li><a href="Document/Functions/User_contributed/ut_string_fix.html"><strong>ut_string_fix</strong></a>
<li><a href="Document/Functions/Contributed/ut_convert_fix.html"><strong>ut_convert_fix</strong></a>
<li><a href="Document/Functions/User_contributed/calendar_decode2_fix.html"><strong>calendar_decode2_fix</strong></a>
<li><a href="Document/Functions/Contributed/time_to_newtime_fix.html"><strong>time_to_newtime_fix</strong></a>
</ul>
<p>

These functions are all based on
the <a href="http://meteora.ucsd.edu/~pierce/calcalcs/">Calcalcs</a>,
a software package created by David W. Pierce of UCSD, who is also the
author
of <a href="http://meteora.ucsd.edu/~pierce/ncview_home_page.html">Ncview</a>.
An important note is that this software treats year 0 and year 1
separately.
<p>

Here's a script that illustrates the "60 second" bug:
<p>

<pre>
  load "$NCARG_ROOT/lib/ncarg/nclscripts/contrib/calendar_decode2.ncl"

  time = 300
  time@units = "seconds since 2013-11-01 00:00:0.0"
  utx = ut_calendar(time,-5)
  cdx = cd_calendar(time,-5)
  cd2x = calendar_decode2(time,-5)
  print("time:             " + time)
  print("units:            " + time@units)
  print("ut_calendar:      " + str_join(""+utx,",")) 
  print("cd_calendar:      " + str_join(""+cdx,","))              
  print("calendar_decode2: "  + str_join(""+cd2x,","))              

  time = 876595
  time@units = "hours since 1901-01-01 00:00:00"
  time@calendar = "gregorian"
  utx := ut_calendar(time,-5)
  cdx := cd_calendar(time,-5)
  cd2x := calendar_decode2(time,-5)
  print("time:             " + time)
  print("units:            " + time@units)
  print("ut_calendar:      " + str_join(""+utx,",")) 
  print("cd_calendar:      " + str_join(""+cdx,","))              
  print("calendar_decode2: "  + str_join(""+cd2x,","))              
</pre>

The minutes/second (and sometimes hour) values are inconsistent across
three similar routines. The blue text indicates the expected values,
while the red text indicates the bug:

<p>
<pre>
    time:             300
    units:            seconds since 2013-11-01 00:00:0.0
    ut_calendar:      2013,11,1,0,<font color=blue>5,0</font>
    cd_calendar:      2013,11,1,0,<font color=red>4,60</font>
    calendar_decode2: 2013,11,1,0,<font color=red>4,60</font>

    time:             876595
    units:            hours since 1901-01-01 00:00:00
    ut_calendar:      2000,12,31,<font color=red>18,59,60</font>
    cd_calendar:      2000,12,31,<font color=blue>19,0,0</font>
    calendar_decode2: 2000,12,31,<font color=red>19,59,60</font>
</pre>

The results aren't necessarily wrong, but they are not consistent. In 
general, the preference is to never get the value 60 for seconds.
<p>

Here's a short script contributed by Jared Lee, that further
illustrates the inconsistency using the
<a href="Document/Functions/User_contributed/cd_string.html"><strong>cd_string</strong></a>
and <a href="Document/Functions/User_contributed/ut_string.html"><strong>ut_string</strong></a> functions:

<pre>
  load "$NCARG_ROOT/lib/ncarg/nclscripts/contrib/cd_string.ncl"
  load "$NCARG_ROOT/lib/ncarg/nclscripts/contrib/ut_string.ncl"

  do testSec = 0, 360, 60
     testSec@units = "seconds since 1970-01-01 00:00:00"
     print("testSec (cd_string) = "+testSec+" -> "+cd_string(testSec, "%N/%D/%Y, %H:%M:%S"))
     print("testSec (ut_string) = "+testSec+" -> "+ut_string(testSec, "%N/%D/%Y, %H:%M:%S"))
  end do
</pre>
<p>

The inconsistent values are noted in red:

<pre>
     testSec (cd_string) =   0 -> 01/01/1970, 00:00:0
     testSec (ut_string) =   0 -> 01/01/1970, 00:00:00
     testSec (cd_string) =  60 -> 01/01/1970, <font color=red>00:00:60</font>
     testSec (ut_string) =  60 -> 01/01/1970, <font color=blue>00:01:00</font>
     testSec (cd_string) = 120 -> 01/01/1970, 00:02:00
     testSec (ut_string) = 120 -> 01/01/1970, 00:02:00
     testSec (cd_string) = 180 -> 01/01/1970, 00:03:00
     testSec (ut_string) = 180 -> 01/01/1970, 00:03:00
     testSec (cd_string) = 240 -> 01/01/1970, <font color=red>00:03:60</font>
     testSec (ut_string) = 240 -> 01/01/1970, <font color=blue>00:04:00</font>
     testSec (cd_string) = 300 -> 01/01/1970, <font color=red>00:04:60</font>
     testSec (ut_string) = 300 -> 01/01/1970, <font color=blue>00:05:00</font>
     testSec (cd_string) = 360 -> 01/01/1970, 00:06:00
     testSec (ut_string) = 360 -> 01/01/1970, 00:06:00
</pre>
<p>

In an attempt to fix this problem, we searched for other calendar
software packages, and found one called
"<a href="http://meteora.ucsd.edu/~pierce/calcalcs/">Calcalcs</a>",
created by David W. Pierce of UCSD, who is also the author
of <a href="http://meteora.ucsd.edu/~pierce/ncview_home_page.html">Ncview</a>. This
software fixes the "60 second" bug, but it doesn't treat year 0 and year 1 as the same.
<p>

Instead of replacing the buggy code in the cd_<i>xxxx</i> and
ut_<i>xxxx</i> routines, we decided to create temporary new routines
that use Calcalcs under the hood. We want users to get the chance to
try them out before we make any decisions about what to do with all of
the calendaring routines.
<p>

</ul>

<a name="GraphicsBugsFixed6.4.0"></a>
<p>
<b>Graphics bugs fixed</b>
<p>

<ul>

<li>The labelbar associated with filled contour and color vector plots
will now reflect any transparency applied. See the section
on <a href="#BackwardsIncompatibleChanges6.4.0">Backwards-incompatible
changes in 6.4.0</a> for more information.
<p>

<li>Improved some issues with triangular meshes, which are used under
the hood for contouring unstructured data. This included fixes for
using triangular meshes with WRF and ICON data.<p>

<li>Fixed some issues where contour fill plots were missing small fill areas
around the edges of the plot. These were most likely to occur when an axis was
reversed and/or a logarithmic or irregular transformation was in effect.<p>

<li>Fixed an issue that resulting in a seg fault when using the "CurlyVector" mode
for plotting vectors. This seg fault did not impact the graphics output
but was annoying and could prevent continued work in the same script or 
interactive session.<p>

<li>Fixed a seg fault involving CellFill contouring using the TriangularGrid method.<p>

<li>Fixed a problem that led in some cases to the left half of a CylindricalEquidistant
contour plot being left blank. The issue involved the boundary at the cyclic point of
the map.<p>

 
<li>Fixed a bug where CellFill contouring wasn't recognizing
the <a href="Document/Graphics/Resources/cn.html#cnMissingValFillColor"><em>cnMissingValFillColor</em></a>
resource. This was reported in relation to plotting ICON data.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_attach_plots.html"><strong>gsn_attach_plots</strong></a> - Fixed a bug
where attaching plots along the X axis, when the Y axis labels
weree of different sizes, the plots would be misaligned.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_create_text.html"><strong>gsn_create_text</strong></a> - Fixed a bug
which didn't allow for multiple text strings to be input, as
advertised.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_vector.html"><strong>gsn_csm_pres_hgt_vector</strong></a> - Fixed
a bug where this function didn't
recognize <a href="Document/Graphics/Resources/pm.html#pmLabelBarWidthF"><em>pmLabelBarWidthF</em></a>
or <a href="Document/Graphics/Resources/pm.html#pmLabelBarHeightF"><em>pmLabelBarHeightF</em></a> settings for
controlling the size of the labelbar.
<p>


<li><a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map.html"><strong>gsn_csm_vector_scalar_map</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map.html"><strong>gsn_csm_vector_scalar_map</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_ce.html"><strong>gsn_csm_vector_scalar_map_ce</strong></a> /
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_polar.html"><strong>gsn_csm_vector_scalar_map_polar</strong></a> - 
Fixed a bug in which you'd get a warning:
<p>

<pre>
warning:vcRefAnnoFontHeightF is not a valid resource in 
         gsn_csm_vector_scalar_map_contour at this time
</pre>
<p>

and the vector reference annotation may have been larger than expected.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a> - Fixed a bug where
NCL would fail if you used really long names (&gt; 320 characters) for
output graphics filenames.<p>

<li><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a> - This function
now allows you to set more resources to customize the panel labelbar,
like <a href="Document/Graphics/Resources/lb.html#lbLabelAlignment"><em>lbLabelAlignment</em></a>.<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a> / 
<a href="Document/Graphics/Resources/gsn.html#gsnAboveYRefLineColor"><em>gsnAboveYRefLineColor</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnBelowYRefLineColor"><em>gsnBelowYRefLineColor</em></a> 
- Fixed a bug that didn't allow you to use a mix of scalar values or arrays for
these resoures, if you had multiple curves.
<p>

<li><a href="Document/Functions/Shea_util/pie_chart.html"><strong>pie_chart</strong></a> - Fixed a bug that
caused an unnecessary fatal error:
<p>

<pre>
fatal:fspan: number of elements parameter is less-than-or-equal-to one, can't continue
</pre>

</ul>

<a name="MiscellaneousBugsFixed6.4.0"></a>
<p>
<b>Miscellaneous bugs fixed</b>
<p>

<ul>

<li>Fixed a catastrophic failure that occurred if the "shea_util.ncl"
script was loaded multiple times from the same script.<p>

Many users of <a href="https://www.esmvaltool.org/">ESMValTool</a>
reported not being able to use NCL V6.3.0 because it would seg fault.
This was caused by a missing <a href="Document/Functions/Built-in/undef.html"><strong>undef</strong></a> statement in the
"shea_util.ncl" library for the "mreg_part_corr" function. This bug
has been fixed and we've taken extra steps to make sure all the other
loaded NCL scripts have "undef" statements before every function and procedure.
<p>

<li>Fixed an issue where interactive NCL would not resume after a &lt;ctrl&gt;-z<p>

On Mac systems, if you ran ncl interactively and then typed &lt;ctrl&gt;-z, you
couldn't resume ncl by typing "fg". This has been fixed.
<p>

<li>Fixed a seg fault that occurred when you tried to use basic NCL
syntax on plot variables.<p>

For example:
<p>
<pre>
  wks = gsn_open_wks("x11","") ;; tested png and x11 both fail
  plots = new(5, graphic)
  do p=0,4
    plots(p) = gsn_csm_blank_plot(wks, res)
  end do
  plots = plots(::-1) ; seg fault would occur here
</pre>
<p>
<li>Fixed an issue with NCL failing after a very great many variables had been created. The code for 
growing the relevant data structure was at fault.<p>
<li>Fixed an incorrect warning from the function <a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a>.
</ul>

<p>
<a name="MiscellaneousImprovements6.4.0"></a>
<hr>
<p>
<b>Miscellaneous improvements</b>
<p>

<ul>
<a name="PlottingUnstructuredData6.4.0"></a>
<li>Plotting unstructured or "random" data<p>

When using one of the gsn_csm_<i>xxxx</i>_map functions to plot
unstructured or "random" data represented by one-dimensional lat/lon
arrays, you can now attach these arrays as special attributes called
"lat1d" and "lon1d" attributes to your data array, instead of having
to set the <a href="Document/Graphics/Resources/sf.html#sfXArray"><em>sfXArray</em></a>
and <a href="Document/Graphics/Resources/sf.html#sfYArray"><em>sfYArray</em></a> resources. This
is similar to how the "lat2d" and "lon2d" attributes work for
curvilinear data.
<p>

For some examples, see
the <a href="Applications/plot_data_on_map.html">Plotting data on a
map</a> examples page.
<p>

<a name="PlottingWRFData6.4.0"></a>
<li>Plotting WRF data<p>

If you plot WRF-ARW data using the gsn_csm_<i>xxx</i> scripts, you
will no longer get these warning messages:
<p>

<pre>
  warning:start_lat is not a valid resource in wrf_gsn_contour at this time
  warning:start_lon is not a valid resource in wrf_gsn_contour at this time
  warning:end_lat is not a valid resource in wrf_gsn_contour at this time
  warning:end_lon is not a valid resource in wrf_gsn_contour at this time
  warning:mpNestTime is not a valid resource in map at this time
</pre>
<p>
Note: you can safely ignore these warnings with older versions of NCL.
<p>

You can now use <a href="Document/Graphics/Resources/cn.html#cnFillPalette"><em>cnFillPalette</em></a>
with <a href="Document/Functions/WRF_arw/wrf_contour.html"><strong>wrf_contour</strong></a> without getting
the following error:
<p>

<pre>
warning:ContourPlotSetValues: color index (255) exceeds size of palette,
        defaulting to foreground color for entry (11) 
</pre>
<p>

<a name="wrf_user_getvar6.4.0"></a>
<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a><p>

Overhauled this code to improve the handling of multiple timesteps,
either in one WRF file or across multiple files.
<p>

<a name="GSNColorResourcesRGBA6.4.0"></a>
<li>Overhauled special "gsn" color resources to allow RGB/A entries<p>

Many of the special"gsn" Color resources now allow all types
of color entries, including color index values, named colors ("red"),
RGB values, and RGBA values. Use of RGBA allows you
to make filled areas partially transparent. 
<p>

The updated resources include:

<ul>
<li><a href="Document/Graphics/Resources/gsn.html#gsnAboveYRefLineBarColors"><em>gsnAboveYRefLineBarColors</em></a> / 
<a href="Document/Graphics/Resources/gsn.html#gsnBelowYRefLineBarColors"><em>gsnBelowYRefLineBarColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnAboveYRefLineColor"><em>gsnAboveYRefLineColor</em></a> / 
<a href="Document/Graphics/Resources/gsn.html#gsnBelowYRefLineColor"><em>gsnBelowYRefLineColor</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnHistogramBarColors"><em>gsnHistogramBarColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXYAboveFillColors"><em>gsnXYAboveFillColors</em></a> / 
<a href="Document/Graphics/Resources/gsn.html#gsnXYBelowFillColors"><em>gsnXYBelowFillColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartColors"><em>gsnXYBarChartColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartColors2"><em>gsnXYBarChartColors2</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXYFillColors"><em>gsnXYFillColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXYLeftFillColors"><em>gsnXYLeftFillColors</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnXYRightFillColors"><em>gsnXYRightFillColors</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnYRefLineColor"><em>gsnYRefLineColor</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnXRefLineColor"><em>gsnXRefLineColor</em></a>
<li><a href="Document/Graphics/Resources/gsn.html#gsnYRefLineColors"><em>gsnYRefLineColors</em></a>
</ul>
<p>

<a name="X11WindowLarger6.4.0"></a>
<li>Default X11 window now larger<p>

When sending NCL graphics to an X11 window, the default size is now
1000 x 1000 (it was 512 x 512).
<p>

<a name="ColoradoCountiesUpdated6.4.0"></a>
<li>Colorado counties improved<p>

The Colorado counties in NCL's map database were updated to include
Broomfield and the correct boundaries for existing counties.
See example <a href="Applications/maponly.html#ex28">maponly_28.ncl</a>.
<p>
<a name="ConstantFillUpdates6.4.0"></a>
<li>Handling of constant and near-constant value fill updated<p>

Traditionally NCL has not been able to contour areas that have constant value when using the 
AreaFill method since it
depended on the presence of at least one virtual contour line to decide that there was
anything to draw. The problem included not only true constant value data, but also data
where the only the area mapped into the viewport was constant, or where the data was not 
constant but fell entirely within two adjacent specified contour levels. Prior versions of
NCL have included a work-around fix that often, but certainly not always, worked to allow
these areas to be drawn with the proper color. This fix was activated by setting the 
resource <a href="Document/Graphics/Resources/cn.html#cnConstFEnableFill"><em>cnConstFEnableFill</em></a> True. 
<p>Now a new and hopefully
more robust solution to this issue has been implemented. For now, <a href="Document/Graphics/Resources/cn.html#cnConstFEnableFill"><em>cnConstFEnableFill</em></a>
still needs to be set True only in the case of truly constant data. The intention is that within one or two 
releases the default for this resource will change from False to True, so that plots of constant data 
are always filled. 
<p>Note that there are a few cases where fill of constant data still does not work. These
are rare but mostly encountered when using a TriangularMesh grid for contouring.
<p>
See example <a href="Applications/coneff.html#ex17">coneff_17.ncl</a>.
<p>
</ul>
<p>

<a name="KnownIssues6.4.0"></a>
<hr>
<p>
<b>Known issues</b>
<p>

<ul>

<li>There's a bug
in <a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a>
that causes it to not work properly if you give it more than two
files.  This bug will be fixed in the next release of NCL. If you need
the fix now, you can download this
<a href="files/ncl_convert2nc.html">new version of ncl_convert2nc</a>.
<p>


<li>There are two bugs in the 6.4.0 version
of <a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a> associated
with adding an X or Y reference line(s):
<p>

<ol>
<li>Drawing your curves with markers or markers and lines
(<a href="Document/Graphics/Resources/xy.html#xyMarkLineMode"><em>xyMarkLineMode</em></a> = "markers" or
"marklines") - this causes extra markers to show up at locations where
the X or Y reference line crosses your curve(s).
<p>

[See this sample <a href="files/xyreflinebug.html">xyreflinebug.ncl</a>
script and <a href="files/xyreflinebug.png">image</a>.]
<p>

<li>Drawing a different number of X and Y reference lines
via <a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a> and
<a href="Document/Graphics/Resources/gsn.html#gsnXRefLine"><em>gsnXRefLine</em></a> in one plot - this causes the
following error message:
<p> 

<pre>
fatal:Number of dimensions on right hand side do not match number of dimension in left hand side
fatal:["Execute.c":8640]:Execute: Error occurred at or near line 6014 in file 
     /usr/local/lib/ncarg/nclscripts/csm/gsn_csm.ncl
</pre>
<p>

[See this sample <a href="files/xyreflinesbug.html">xyreflinesbug.ncl</a> script and
<a href="files/xyreflinesbug.png">image</a>.]
<p>

To fix both problems, download this
<a href="files/gsn_csm_640_fix.html">gsn_csm_640_fix.ncl</a> script and
load it from your own script after any other load commands.
<p>

<li>If you are running a script that panels XY plots and getting this error:
<p>

<pre>
fatal:Variable (mono_fill_scl) is undefined
fatal:["Execute.c":8640]:Execute: Error occurred at or near line 6100 \
   in file $NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl
</pre>
<p>

then the issue is that you are setting 
<a href="Document/Graphics/Resources/gsn.html#gsnPanelLabelBar"><em>gsnPanelLabelBar</em></a> to True, which is not
recognized for XY plots. To fix, simply comment this resource setting
or remove it.

</ul>
<p>

<hr><hr>
<A NAME="6.3.0"></A>
<h2>Version 6.3.0</h2>
<h3>March 18, 2015</h3><p>

<ul>
<li><a href="#NewFunctions6.3.0">New functions</a>
<li><a href="#UpdatedFunctions6.3.0">Updated functions</a>
<li><a href="#BackwardsIncompatibleChanges6.3.0">Potential
backwards-incompatible changes</a>
<li><a href="#Improvements6.3.0">Improvements</a>
<li><a href="#NewColorTable6.3.0">New color table</a>
<li><a href="#BugsFixed6.3.0">Bugs fixed</a>
<li><a href="#KnownBugs6.3.0">Known bugs</a>

</ul>
<p>

<a name="NewFunctions6.3.0"></a>
<hr>
<p>
<b>New functions</b>
<p>

<ul>

<li><a href="Document/Functions/Contributed/advect_var.html"><strong>advect_var</strong></a> - Advect a
variable horizontally: <b>U*(dQ/dlon) + V*(dQ/dlat)</b>. This function
was inadvertently advertised as <b>advect_variable</b>. The 6.3.1
release will support <b>advect_variable</b> name as an alias. 
<p>

<li><a href="Document/Functions/Built-in/bw_bandpass_filter.html"><strong>bw_bandpass_filter</strong></a> - Applies a butterworth bandpass
filter optimized for narrow bandwidths to time series.
<p>

<li><a href="Document/Functions/Built-in/count_unique_values.html"><strong>count_unique_values</strong></a> - Counts the number of
unique values in the given array.
<p>

<li><a href="Document/Functions/Built-in/determinant.html"><strong>determinant</strong></a> - Calculates the determinant of a
square real matrix.
<p>

<li><a href="Document/Functions/Built-in/ezfftf_n.html"><strong>ezfftf_n</strong></a> - Performs a Fourier analysis on a
real periodic sequence on the given dimension.
<p>

This is identical to <a href="Document/Functions/Built-in/ezfftf.html"><strong>ezfftf</strong></a>, except it allows you
to specify the dimension of which to do the analysis on.
<p>

<li><a href="Document/Functions/Built-in/ezfftb_n.html"><strong>ezfftb_n</strong></a> - Performs a Fourier synthesis from
real and imaginary coefficients on the given dimension.
<p>

This is identical to <a href="Document/Functions/Built-in/ezfftb.html"><strong>ezfftb</strong></a>, except it allows you
to specify the dimension of which to do the synthesis on.
<p>

<li><a href="Document/Functions/Built-in/draw_color_palette.html"><strong>draw_color_palette</strong></a> - Draws the given colors or
color map as a series of filled boxes.
<p>

<li><a href="Document/Functions/Contributed/eofunc_north.html"><strong>eofunc_north</strong></a> - Use North et
al (MWR, 1982) equation 24 to evaluate eigenvalue separation.
<p>

<li><a href="Document/Functions/Built-in/fftshift.html"><strong>fftshift</strong></a> - Rearranges an array in a manner
similar to
Matlab's <a href="http://www.mathworks.com/help/matlab/ref/fftshift.html"><b>fftshift</b></a>
function.
<p>

<li><a href="Document/Functions/Contributed/generate_sample_indices.html"><strong>generate_sample_indices</strong></a> -
Generate indices (subscripts) for resampling: with and without
replacement.
<p>

<li><a href="Document/Functions/Built-in/get_unique_values.html"><strong>get_unique_values</strong></a> - Returns the unique values
of the given array.
<p>

<li>New "gsm_csm_streamline_scalar<i>_xxxx</i>" routines were added<br>
(thanks to Alan Brammer of UAlbany for the contribution)
<p>

<ul>
<li><a href="Document/Graphics/Interfaces/gsn_csm_streamline_scalar.html"><strong>gsn_csm_streamline_scalar</strong></a>
<li><a href="Document/Graphics/Interfaces/gsn_csm_streamline_scalar_map.html"><strong>gsn_csm_streamline_scalar_map</strong></a>
<li><a href="Document/Graphics/Interfaces/gsn_csm_streamline_scalar_map_ce.html"><strong>gsn_csm_streamline_scalar_map_ce</strong></a>
<li><a href="Document/Graphics/Interfaces/gsn_csm_streamline_scalar_map_polar.html"><strong>gsn_csm_streamline_scalar_map_polar</strong></a>
</ul>
<p>

<li><a href="Document/Functions/Built-in/kmeans_as136.html"><strong>kmeans_as136</strong></a> -
Perform k-means clustering via the Hartigan and Wong AS-136 algorithm. 
<p>

<li><a href="Document/Functions/Built-in/ListIndexFromName.html"><strong>ListIndexFromName</strong></a> - Returns the index of a
variable in a list given its name.
<p>

<li><a href="Document/Functions/Contributed/pot_temp.html"><strong>pot_temp</strong></a> - Computes
potential temperatures.
<p>

<li><a href="Document/Functions/Contributed/pot_vort_hybrid.html"><strong>pot_vort_hybrid</strong></a> - Computes
potential vorticity on hybrid levels and a global grid.
<p>

<li><a href="Document/Functions/Contributed/pot_vort_isobaric.html"><strong>pot_vort_isobaric</strong></a> - Computes
potential vorticity on isobaric levels and a global grid.
<p>

<li><a href="Document/Functions/Built-in/str_match_ic_regex.html"><strong>str_match_ic_regex</strong></a> - Matches the given
string against a list of strings using regular expression syntax (case
insensitve).
<p>

<li><a href="Document/Functions/Built-in/str_match_ind_regex.html"><strong>str_match_ind_regex</strong></a> - Matches the given
string against a list of strings using regular expression syntax (case
sensitve) and returns index values.
<p>

<li><a href="Document/Functions/Built-in/str_match_ind_ic_regex.html"><strong>str_match_ind_ic_regex</strong></a> - Matches the given
string against a list of strings using regular expression syntax (case
insensitve) and returns index values.
<p>

<li><a href="Document/Functions/Built-in/str_match_regex.html"><strong>str_match_regex</strong></a> - Matches the given string
against a list of strings using regular expression syntax (case
sensitve).
<p>


<li><a href="Document/Functions/Contributed/static_stability.html"><strong>static_stability</strong></a> -
Computes static stability.
<p>

<li><a href="Document/Functions/Built-in/thornthwaite.html"><strong>thornthwaite</strong></a> - Estimates the potential
evapotranspiration (PET) via the Thornthwaite method.
<p>

<li><a href="Document/Functions/Built-in/trend_manken.html"><strong>trend_manken</strong></a> - Mann-Kendall non-parametric
test for monotonic trend plus the Theil-Sen robust estimate of linear
trend. 
<p>

<li><a href="Document/Functions/Built-in/weibull.html"><strong>weibull</strong></a> - Derives the shape and scale
parameters for the Weibull distribution via maximum likelihood
estimates.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_vert_interp.html"><strong>wrf_user_vert_interp</strong></a> -
Vertically interpolates ARW WRF variables given the type of surface
and a set of new levels.
<p>

</ul>
<p>

<a name="UpdatedFunctions6.3.0"></a>
<hr>
<p>
<b>Updated functions</b>
<p>

<ul>

<li><a href="Document/Functions/Built-in/dim_spi_n.html"><strong>dim_spi_n</strong></a> - Added second method for
calculating SPI, by applying a type III Pearson distribution.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a> - Updated to recognize
streamline plots, so you can panel multi-color streamline plots with a
common labelbar.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a> - a
new "cloud top temperature" diagonistic was added ("ctt").
<p>

</ul>
<p>

<a name="BackwardsIncompatibleChanges6.3.0"></a>
<hr>
<p>
<b>Potential backwards-incompatible changes</b>

<ul>
<a name="gsnAddCyclicChange6.3.0"></a>
<li>Change to <a href="Document/Graphics/Resources/gsn.html#gsnAddCyclic"><em>gsnAddCyclic</em></a> behavior -
When plotting lat/lon data, a longitude cyclic point will not be added
if you have a longitude coordinate array whose range is greater than
360. Previously, you would get a warning and potentially incorrect
results:
<p>

<pre>
    gsn_add_cyclic: Warning: The range of your longitude coordinate array is at least 360. 
    You may want to set gsnAddCyclic to False to avoid a warning 
    message from the spline function.
</pre>
<p>

<li>The behavior of polylines and polygons drawn over maps was
modified slightly in order to avoid ambiguity concerning cyclic
longitude values.  Now map polylines and polygons always use the
shortest path around the globe between any two points. (This is a
possible backwards incompatibility for anyone who formerly drew a
continuous circle around the globe using only 2 points (0 and 360).
Now you must use 4 points to accomplish the same thing, e.g.: (0 120
240 0).
<p>
</ul>
<p>

<a name="Improvements6.3.0"></a>
<hr>
<p>
<b>Improvements</b>
<p>

<b>File I/O improvements</b>

<ul>

<li>HDF5 reader - a number of improvements have been made to NCL's
HDF5 reader to better handle:
<p>

<ul>
<li>dimension names
<li>coordinate variables (if any)
<li>the _FillValue attribute (which sometimes comes in as a string called "MissingCode")
</ul>
<p>

<li>Added a new <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> option called
"KeepOpen" for <a href="Document/Functions/Built-in/fbinrecread.html"><strong>fbinrecread</strong></a> to improve the
efficiency of reading records in sequential order. This option is
logically-valued and available for the "bin" format only. When
finished reading the file the user must
call <a href="Document/Functions/Built-in/fbinrecread.html"><strong>fbinrecread</strong></a> once with "KeepOpen" set False in
order to close the file.
<p>

<li>Updated the existing ECMWF GRIB 1 tables and added 6 new ones:
213,214,215,217,218,219,220, and 221. (these are not yet documented in
our docs). Also updated the NCEP GRIB1 tables and the NCEP GRIB2 code
tables.
<p>

<li>NCL now looks all the way through a file if necessary to find a
valid GRIB record.
<p>

<li>Fixed several memory management issues both for GRIB 1 and GRIB 2.
<p>

<li>File list variable assignment from <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> is
now more tolerant of cases where one or more of the input files do not
contain the variable specified. It no longer crashes, and instead gives
an error like:
<p>
<pre>
  A valid instance of variable HGT_P0_L100_GLL0 was not 
   found in one or more elements of the file list.
</pre>
<p>

If no files contain an instance of the variable, a fatal error is
returned; otherwise it's a warning.
<p>

<li><a href="Document/Functions/Contributed/readAsciiTable.html"><strong>readAsciiTable</strong></a></a> has been
made 'thread-safe' with the addition of code suggested by Kyle
S. Griffin (University of Wisconsin - Madison).  Daniel Leuenberger
(Federal Office of Meteorology and Climatology MeteoSwiss) contributed
to the discussion.
<p>

</ul>
<p>

<b>Computational function improvements</b>

<ul>

<li><a href="Applications/mjoclivar.html"><b>MJO
CLIVAR:</b></a> Diagnostic <b>mjoclivar_14.ncl</b>
<p>

<ul>

<li>Will automatically determine the appropriate sign of the EOFs
using an approach suggested by (Eun-Pa Lim, Centre for Australian
Weather and Climate Research [CAWCR]).  This was added on 20 October
2014.
<p>

<li>Calculates the percent variance for each component in the
multivariate EOF. The code segment was provided by Marcus N. Morgan
(Florida Institute of Technology). This was added on 4 March 2015.

</ul>
</ul>
<p>

<b>Graphical improvements</b>

<ul>
<li>You can now set <a href="Document/Graphics/Resources/tr.html#trLineInterpolation"><em>trLineInterpolation</em></a>
False for map plots in order to draw straight-edged polylines or
polygons. This means there now are three options:
<p>

<ol>

<li>res@<a href="Document/Graphics/Resources/tr.html#trLineInterpolation"><em>trLineInterpolation</em></a> = True 
(the default)<p>
Lines will be interpreted in the lat/lon coordinate space.

<li>res@<a href="Document/Graphics/Resources/mp.html#mpGreatCircleLinesOn"><em>mpGreatCircleLinesOn</em></a> = True and
res@<a href="Document/Graphics/Resources/tr.html#trLineInterpolation"><em>trLineInterpolation</em></a> = True<p>
Lines will follow a great circle path.

<li>res@<a href="Document/Graphics/Resources/tr.html#trLineInterpolation"><em>trLineInterpolation</em></a> = False<p>
Lines between points will appear straight in the projected space.

</ol>
<p>

<li>Large triangular meshes (greater than approximately 40,000,000
triangles) no longer fail due to limits implicit in the Shewchuck
Triangle code. Now when meshes exceeding this limit are encounterd,
the mesh is decomposed into 2 or more tiles which are triangulated
separately. Along with this were some major performance enhancements.
<p>

<li>Support for OpenMP raster graphics has been improved, such that
this capability is at better than beta level reliability. Note that
support for OpenMP relies on the same tiling mechanism used to handle
large meshes.  OpenMP now can be used with any map projection, and the
artifacts, including visible lines between the tiles, have been
eliminated.  See the entry in
the <a href="prev_releases.html#6.2.0">6.2.0 release notes</a> for
notes on how to use the OpenMP capability.
<p>

</ul>
<p>

<b>Miscellaneous improvements</b>

<ul>
<li>Any numeric type can now be used for coordinate subscripting;
subscripts no longer need to be the same type as the coordinate variable.
<p>
</ul>
<p>

<p>
<a name="NewColorTable6.3.0"></a>
<hr>
<p>
<b>New color table</b>
<p>

A small color table was added with two whites in the middle:
<a href="Document/Graphics/ColorTables/BlAqGrWh2YeOrReVi22.html">BlAqGrWh2YeOrReVi22</a>.
<p>

<a name="BugsFixed6.3.0"></a>
<hr>
<p>
<b>Bugs fixed</b>
<p>

<ul>

<li><a href="Applications/mjoclivar.html"><b>MJO CLIVAR:</b></a> Diagnostic <b>mjoclivar_16.ncl</b> 
phase composites were off by half a cycle. This has been corrected. 
This is immediately available for download as of 20 October 2014.
<p>

<li><a href="Document/Functions/Built-in/bin_avg.html"><strong>bin_avg</strong></a> / <a href="Document/Functions/Built-in/bin_sum.html"><strong>bin_sum</strong></a> - fixed a
bug where the binning was done incorrectly if the observation
locations were outside the region spanned by the user provided
grid. These functions weren't explicitly checking for this situation.
<p>

<li><a href="Document/Functions/Built-in/delete.html"><strong>delete</strong></a> - fixed a problem with deleting
coordinate arrays in a list-type argument.
<p>

<li><a href="Document/Functions/Built-in/dewtemp_trh.html"><strong>dewtemp_trh</strong></a> - fixed a bug where if <em>rh</em>
was &lt; 0.0, then a NaN (not-a-number) was returned.  The function
now returns a missing value.
<p>

<li><a href="Document/Functions/Built-in/dim_avg_wgt_n.html"><strong>dim_avg_wgt_n</strong></a>
/ <a href="Document/Functions/Built-in/dim_sum_wgt_n.html"><strong>dim_sum_wgt_n</strong></a> - fixed a bug where the return
value had no dimensionality (0 bytes) if "x" was a 1D array.
<p>

<li><a href="Document/Functions/Built-in/dim_sum_wgt.html"><strong>dim_sum_wgt</strong></a> / <a href="Document/Functions/Built-in/dim_sum_wgt_n.html"><strong>dim_sum_wgt_n</strong></a>
- fixed a bug where if "opt" was 0 and there were missing values in
the input array, then a non-missing value was being returned.
According to the documentation, a missing value should have been
returned instead.
<p>

<li><a href="Document/Functions/Built-in/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> - fixed a bug where if the
"neareststod" or "nearestdtos" interpolation methods were used, the
"remap" attribute attached to the regridded variable still said
"bilinear".
<p>

The "remap" attribute now uses the "ESMF_regrid_method" attribute
attached to the weights file, and hence will be more verbose than it
previously was.
<p>

Old:
<pre>
  remap : remapped via ESMF_regrid_with_weights: patch
  remap : remapped via ESMF_regrid_with_weights: conserve
</pre>
<p>

New:
<pre>
  remap : remapped via ESMF_regrid_with_weights: Higher-order Patch
  remap : remapped via ESMF_regrid_with_weights: First-order Conservative
</pre>



<li><a href="Document/Graphics/Interfaces/gsn_merge_colormaps.html"><strong>gsn_merge_colormaps</strong></a> - this
function gives you a warning if you try to merge two colormaps.
<p>

<pre>
  Warning: namedcolor2rgb: 'gsdtol' is not a valid named color.
  Will return missing values for this color.
</pre>
<p>

Despite this warning, the function still works as advertised.  This
warning has been removed in V6.3.0.
<p>


<li><a href="Document/Functions/Contributed/stat_dispersion.html"><strong>stat_dispersion</strong></a> - The
second returned element returned was the sample variance and not the
sample standard deviation as is documented. In 6.3.0, the sample
standard deviation will be returned.
<p>

<li> <a href="Document/Functions/Built-in/svd_lapack.html"><strong>svd_lapack</strong></a> - Fixed a memory leak. Results were not affected.
<p>

<li><a href="Document/Functions/Built-in/ListPop.html"><strong>ListPop</strong></a> - fixed a bug when pop an unnamed
variable (or value) from a list.
<p>

<li>Fixed a problem with CellFill plotting when using
the <a href="Document/Graphics/Resources/mp.html#mpFreeAspect"><em>mpFreeAspect</em></a> parameter. Cells
that were specially drawn to fill in the edges of the plot were not
appearing in the correct location.  Now it works as expected and most
of the special handling was able to be removed.
<p>

<li>Fixed a problem with HDFEOS5 attributes where they were all being
processed as string types whether or not they really were.
<p>

<li>Fixed a problem where non-geographic 2D plots were not being drawn
correctly. The "Spherical" transformation was incorrectly being used
for all types of 2D coordinate overlays, when the more general
"Curvilinear" transformation should have been employed.
<p>

<li>Fixed a problem with tickmark formatting where numbers that should
have become zero, given the number of significant digits, were instead
set to small decimal values with lots of zeros,
<p>


</ul>
<p>

<a name="KnownBugs6.3.0"></a>
<hr>
<p>
<b>Known bugs</b>
<p>

<ul>

<li>If you try to execute NCL on a system where there are no user home
directories, then you may run into an issue where it's looking for a
"<a href="Document/Graphics/hlures.html">~/.hluresfile</a>" file.
<p>

As a work-around, a system administrator can create a blank
file called "hluresfile", put it wherever he/she wants (for example,
$NCARG_ROOT/lib/ncarg), and then have every user set the
<a href="Document/Language/env.html#NCARG_USRRESFILE">NCARG_USRRESFILE</a>
environment variable to point this dummy file:
<p>

<pre>
export NCARG_USRRESFILE=$NCARG_ROOT/lib/ncarg/hluresfile
</pre>

<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> - there is a potential rounding bug
in this routine if you have a units of "minutes since" or "seconds
since". It sometimes causes the minutes/seconds to be returned as
something like "0/60" (0 minutes/60 seconds) rather than "1/0" (1
minute/0 seconds).  We have an email in to the developers of this
code, but until we get a fix, you can
use <a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a> as a work-around, if you are using
a "standard" calendar.<p>
 
<li><a href="Document/Functions/Built-in/kolsm2_n.html"><strong>kolsm2_n</strong></a> - Fixed bug in which using multiple
dimensions (for example, in the time dimension) would cause the
results to be wrong.  Please visit the documentation for this function
for more details and a work-around. This has been fixed for NCL
Version 6.3.1.
<p>

<li>For HDF5 files with variables within "groups", the use
of <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> with <a href="Document/Functions/Built-in/ListSetType.html"><strong>ListSetType</strong></a> (f,
"join") does not work. The default mode
where <a href="Document/Functions/Built-in/ListSetType.html"><strong>ListSetType</strong></a> (f, "cat") does work.
</ul>


<hr><hr>
<A NAME="6.2.1"></A>
<h2>Version 6.2.1</h2>
<h3>September 2, 2014</h3><p>

<ul>
<li><a href="#BackwardsIncompatibleChanges6.2.1">Backwards-incompatible changes</a>
<li><a href="#NewFunctions6.2.1">New functions</a>
<li><a href="#UpdatedFunctions6.2.1">Updated functions</a>
<li><a href="#BugsFixed6.2.1">Bugs fixed</a>
</ul>
<p>


<a name="BackwardsIncompatibleChanges6.2.1"></a>
<hr>
<p>
<b>Backwards-incompatible changes</b>

<ul>

<li><a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a> - This function has been updated
to behave as originally intended: as companion test for checking if a
file exists before trying to open it with <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>.
<p>

To check for the existence of any file, regardless of what kind of
file it is, use the new <a href="Document/Functions/Built-in/fileexists.html"><strong>fileexists</strong></a> function.
<p>

<li><a href="Document/Graphics/ColorTables/circular_1.html">circular_1.rgb</a>
/ <a href="Document/Graphics/ColorTables/circular_2.html">circular_2.rgb</a>
- The RGB tables have been altered to provide more color
differentiation in the 'green' colors. For example, in circular_1.rgb:
<p>

<pre>
          ncolors=12
          # R    G    B
            255    0    0     red
            255  125    0     orange
            255  255    0     yellow
            125  255    0     spring green
              0  255    0     green                ==> 102  204    0  ; new color
              0  255  125     turquoise            ==> 102  255  178  ; new color
              0  255  255     cyan
              0  125  255     ocean
              0    0  255     blue
            125    0  255     violet
            255    0  255     magenta
            255    0  125     raspberry
</pre>
<p>
</ul>
<p>

<a name="NewFunctions6.2.1"></a>
<hr>
<p>
<b>New functions</b><p>

<ul>

<li><a href="Document/Functions/Built-in/dim_acumrun_n.html"><strong>dim_acumrun_n</strong></a> - Calculates individual
accumulated sums of sequences ('runs') of a specified length.
<p>

<li><a href="Document/Functions/Built-in/escorc_n.html"><strong>escorc_n</strong></a> - Computes sample cross-correlations
at lag 0 only, across the given dimensions.
<p>


<li><a href="Document/Functions/Built-in/fileexists.html"><strong>fileexists</strong></a> - Checks for existence of any UNIX file.
<p>

<li><a href="Document/Functions/Contributed/pdfxy_conform.html"><strong>pdfxy_conform</strong></a> - An interface to pdfxy that allows the input arrays to be different sizes. 
<p>

<li><a href="Document/Functions/Built-in/regCoef_n.html"><strong>regCoef_n</strong></a> - Calculates the linear regression
coefficient between two variables on the given dimensions. 
<p>
</ul>

<a name="UpdatedFunctions6.2.1"></a>
<hr>
<p>
<b>Updated functions</b><p>

<ul>

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a>
/ <a href="Document/Functions/ESMF/ESMF_regrid_gen_weights.html"><strong>ESMF_regrid_gen_weights</strong></a>
<p>

Options added:
<ul>

<li>"<b>NetCDF4</b>" - If set to True, then the intermediate
source/destination description files and the weights file will be
written as NetCDF-4 files (instead of NetCDF-3).

<p>

<li>"<b>NoPETLog</b>" - If set to True, then the
"PET0.RegridWeightGen.Log" file will not be generated.]
<p>

<li>"<b>Check</b>" - If set to True, then extra analytic output will be
computed and printed, including the mean relative error between the
destination and analytic field, and the relative error between the
mass of the source and destination fields in the conservative case.
<p>

</ul>
<p>

<li><a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a> - this function
was updated to allow RGB or RGBA values to be used for the gsnShadeLow,
gsnShadeMid, or gsnShadeHigh resources.
<p>

<li><a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a> - see note above in
the <a href="#BackwardsIncompatibleChanges6.2.1">backwards-incompatible
changes</a> section.<p>

<li><a href="Document/Functions/Contributed/smthClmDayTLL.html"><strong>smthClmDayTLL</strong></a>
and <a href="Document/Functions/Contributed/smthClmDayTLLL.html"><strong>smthClmDayTLLL</strong></a> - Made these
functions less restrictive; they now work on daily SST data which have
_FillValue over land.
<p>

<li><a href="Document/Functions/Built-in/taper.html"><strong>taper</strong></a> / <a href="Document/Functions/Built-in/taper_n.html"><strong>taper_n</strong></a> - added
an option to allow the series to be tapered to 0.0.  These functions
currently only taper to the series mean.
<p>

</ul>

<a name="BugsFixed6.2.1"></a>
<hr>
<p>

<b>Bugs fixed</b><p>

<ul>

<li>Fixed a serious bug where assigning a variable as an attribute of
another variable caused the original variable's _FillValue to be
modified.<p>

Here's a sample script that demonstrates the problem in V6.2.0:
<p>

<pre>
  x = new (2, float)

  print("any(ismissing(x)) should be True")
  print("  actual value is " + any(ismissing(x)))

;---Assign "x" as an attribute of "y"
  y   = True
  y@x = x

  print("any(ismissing(x)) should be True")
  print("  actual value is " + any(ismissing(x)))  ; will be False in V6.2.0
</pre>
<p>

<li><a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a> - fixed a bug where if you inputted 1 for
the third argument (the number of points to return), this function
was returning a single value equal to 0.  This function now prints
an error for anything less than 2 points.
<p>


<li><a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a> - this
function was fixed so it doesn't fail if "gsnShadeMid" is set, but
only one contour level is found between the low and high values input.
<p>

<li><a href="Document/Functions/Built-in/mixhum_ptrh.html"><strong>mixhum_ptrh</strong></a> - a bug was fixed in which negative
"iswhit" values were not being properly recognized.
<p>

<li><a href="Document/Functions/Contributed/month_to_annual_weighted.html"><strong>month_to_annual_weighted</strong></a> -
fixed error related to the calendar attribute.  It referred to
"yyyymmdd" when it should have referred to "yyyymm".
<p>

<li><a href="Document/Functions/Contributed/pdfxy.html"><strong>pdfxy</strong></a> - Fixed 'y' bounding box boundary error discovered by Maria Gehne (NOAA/CIRES). Specifically:  
<pre>

   Changed
        binyBound(nbinsy) = <b>binxBound</b>(nbinsy) + epsy*binyBound(nbinsy)
   To
        binyBound(nbinsy) = <b>binyBound</b>(nbinsy) + epsy*binyBound(nbinsy)
</pre>

<p>
<li><a href="Document/Functions/Contributed/yyyymmddhh_to_yyyyfrac.html"><strong>yyyymmddhh_to_yyyyfrac</strong></a> -
fixed error related to the calendar attribute. It referred to
"yyyymmdd" when it should have referred to "yyyymmddhh".
<p>

<li><a href="Document/Functions/Built-in/uv2dv_cfd.html"><strong>uv2dv_cfd</strong></a> - a bug (brought to out attention by Wei-Jen Tseng) was fixed 
when <b>extrapolating</b> values to the lower boundary.
<pre>

    Changed 
        x(ml,nl) = (2.d0*x(ml,<b>nl-2</b>)-x(ml,nl-2)+2.d0*x(ml-1,nl)-x(ml-2,nl))*0.5d0 
    To
        x(ml,nl) = (2.d0*x(ml,<b>nl-1)</b>-x(ml,nl-2)+2.d0*x(ml-1,nl)-x(ml-2,nl))*0.5d0
</pre>
<p>

<li>A bug was fixed when trying to write a single string variable to a
NetCDF-4 file.
<p>

<li><a href="Document/Functions/Contributed/wallClockElapseTime.html"><strong>wallClockElapseTime</strong></a> - minor
fix to have "date" returned in the correct format expected.
<p>

<li>The GRIB2 reader was updated to recognize the level information for
records with Product Definition Template (PDT) numbers greater than
14. The PDT number is the first value in the quadruple value of the
GRIB2 variable attribute
"parameter_template_discipline_category_number". The result of this
fix is that a level dimension may be present where previously none
appeared because the various level records were seen as
duplicates. Also the name of the variable will be different to account for 
the level type. For example, where a variable in an affected file
prior to the fix had the name, 'CAT_P15_GLL0_max' and 2 dimensions
(lat_0, lon_0), it now has the name 'CAT_P15_L100_GLL0_avg' and 3
dimensions (lv_ISBL0, lat_0, lon_0).
<p>

<li>The GRIB2 reader's handling of forecast time units of a month or more was 
improved to more accuractely compute the forecast time dimension values. In certain
cases, this fixes a problem that led to fewer elements along the 
forecast time dimension than there should have been.
<p>

<li>A bug fixed to allow NCL recognizing string coordinate variable.

</ul>

<hr><hr>
<A NAME="6.2.0"></A>
<h2>Version 6.2.0</h2>
<h3>April 2, 2014</h3><p>

<ul>

<li><a href="#BackwardsIncompatibleChanges6.2.0">Potential backwards-incompatible changes</a>
<ul>
  <li><a href="#RasterAndMissingValueAreas6.2.0">Significant change to raster contouring</a>
  <li><a href="#PrintingDoubles6.2.0">Printing double-precision values</a>
  <li><a href="#LoadingScripts6.2.0">Automatic loading of scripts</a>
  <li><a href="#ChangesTostr_matchFunctions6.2.0">Changes to str_match behavior</a>
  <li><a href="#ChangesToMapDrawingBehavior6.2.0">Changes to map drawing behavior</a>
</ul>
<li><a href="#FileIOImprovements6.2.0">Significant improvements and
bug fixes to NetCDF, HDF, and GRIB readers</a>
<li><a href="#ContouringImprovements6.2.0">Contouring improvements</a>
<li><a href="#ShapefileImprovements6.2.0">Significant
improvements to the speed of drawing shapefile lines or polygons</a>
<li><a href="#ESMFRegridding6.2.0">Improvements and bug fixes to ESMF regridding routines</a>
<li><a href="#ThinLineIssue6.2.0">Improvement to "thin line" graphical issue</a>

<li><a href="#NewFunctions6.2.0">New functions</a>
<li><a href="#NewResources6.2.0">New graphical resources</a>
<li><a href="#NewGraphicalOutputFormat.2.0">New graphical output format</a>
<li><a href="#NewColorTables6.2.0">New color tables</a>
<li><a href="#GEToolsLibrary6.2.0">Library for generating KML output from NCL</a>
<li><a href="#UpdatedFunctions6.2.0">Updated functions</a>
<li><a href="#BugsFixed6.2.0">Bugs fixed</a>
<li><a href="#BuildInstructions6.2.0">Change in HDF4 build instructions</a>
</ul>
<p>

<a name="BackwardsIncompatibleChanges6.2.0"></a>
<hr>
<p>
<b>Potential backwards-incompatible changes</b>

<ul>
<a name="RasterAndMissingValueAreas6.2.0"></a>
<li><b>Significant change to raster contouring</b><p>

There are two important things to know about with regard
to raster contouring:

<ol>

<li>Raster contouring now supports transparency. This means that
missing value areas will now be transparent rather than filled in the
background color.
<p>

If you are drawing raster contours over maps and have missing values
in your data, you may now see gray-filled missing value areas instead of
white-filled areas. This is not a bug.  :-)
<p>

This is because any gray-filled land that was underneath the missing
value areas will now be visible. If this is undesired, set:

<pre>
   res@<a href="Document/Graphics/Resources/cn.html#cnMissingValFillColor"><em>cnMissingValFillColor</em></a> = "white"
</pre>
<p>

Click on the following images for a "before" and "after" example of how this might look:
<p>

<table border=1>
<tr>
<th align=center>Version 6.1.2 <th align=center>Version 6.2.0
<tr>
<td><a href="files/raster_missing_6.1.2.png"><img src="files/raster_missing_6.1.2.sm.png"></a>
<td><a href="files/raster_missing_6.2.0.png"><img src="files/raster_missing_6.2.0.sm.png"></a>
</table>
<p>

<li>If you are sending your graphics to a PostScript file and seeing
horizontal rows of cells that seem wrong, then this is likely a bug in
the tool you're using to display the PS file.
<p>

Graphics display tools like gv, gs, evince, and ImageMagick's display
depend on ghostscript; older versions of ghostscript have a bug that
is sometimes triggered by raster graphics containing transparent cells
output to PostScript. This bug was fixed sometime between versions
8.70 and 9.06 of ghostscript. Updating your version of ghostscript
should fix this issue.
</ol>
<p>

<a name="PrintingDoubles6.2.0"></a>
<li><b>Printing double-precision values</b><p>

You will see more precision when printing doubles with functions
like <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>. This could cause a problem
if you are using <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a> or other printing functions
to write to ASCII files, where you are expecting a certain precision.
<p>

For example the following 2-line code:
<p>

<pre>
  d = -62.02990341186519d
  print("d = " + d)
</pre>
<p>

will produce the following output:<p>

Version 6.2.0:

<pre>
    d = -62.02990341186519d
</pre>
<p>

Version 6.1.2 and older:

<pre>
    d = -62.0299
</pre>
<p>

<a name="LoadingScripts6.2.0"></a>
<li><b>Automatic loading of scripts</b><p>

You no longer need to include these load commands at the top of your NCL script:
<p>

<pre>
  load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl"
  load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_csm.ncl"
  load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"
</pre>
<p>

Your scripts will still work if you load these scripts, so you may not want to remove them
if you need older versions of NCL to still work.<p>

There's a bug where if you try to load these scripts after the "begin" command:

<pre>
begin
load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"
end
</pre>
<p>


We recommend in general that you load these scripts before the "begin" command.
<p>

<a name="ChangesTostr_matchFunctions6.2.0"></a>

<li><b>Changes to str_match behavior</b><p>

The str_match family of functions:
  <ul>
    <li><a href="Document/Functions/Built-in/str_match.html"><strong>str_match</strong></a>
    <li><a href="Document/Functions/Built-in/str_match_ic.html"><strong>str_match_ic</strong></a>
    <li><a href="Document/Functions/Built-in/str_match_ind.html"><strong>str_match_ind</strong></a>
    <li><a href="Document/Functions/Built-in/str_match_ind_ic.html"><strong>str_match_ind_ic</strong></a>
  </ul>
    <p>
    now only match literal occurrences of the sub-string expression argument and no longer recognize regular expression syntax. This is how these
    functions have always been documented.  Recognition of regular expressions required the user to escape special characters such as '*', '[', and '?' with a '\'
    character. This behavior was confusing to many users and was more complicated than initially intended for these functions. In the future, we hope to introduce
    other functions for matching using regular expressions.
 <p>
<a name="ChangesToMapDrawingBehavior6.2.0"></a>

<li><b>Changes to map drawing behavior</b><p>

Previously, drawing a polyline around the equator, for example, could be specified using 2 element arrays in X (0.0,  360.0) and Y (0.0, 0.0). Now, however, in order
to eliminate a number of ambiguous situations and to make user code simpler in most cases, a new behavior has been introduced: the line between 2 points on the globe 
always follows the shortest path. In the example above, the new behavior leads to a 0-length line. Now the recommended approach for drawing a line around
the equator is to use four points, such that the distance from one to the next is always less than 180 degrees. For example you could use longitudes (0.0, 120.0, 240.0, 360.0).

<p>It is possible to use only three points with longitude (0.0, 180.0, 360.0), owing to the rule for distances that are exactly 180 degrees apart: in this case, with valid longitudes
values ranging from -540 to +540, the line extends from the lower longitude in the direction of increasing longitude values. 

<p>This new behavior should considerably simplify the code required to ensure that lines crossing the prime meridian follow the desired trajectory. It applies as well
to polygons.
<p>




</ul>
<p>

<a name="FileIOImprovements6.2.0"></a>
<hr>
<p>
<b>Improvements to NetCDF, HDF, and GRIB readers</b><p>

<ul>

<li>Numerous improvements and bug fixes have been made to the NetCDF-4
file I/O:
<p>

<ol>
<li>Fixed issues with writing NetCDF4Classic files.
<li>Fixed issues with reading multiple NetCDF4 files.
<li>Fixed issues handling groups with special characters.
<li><a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> now works on NetCDF4 files.
</ol>

<li>Variables read off HDF-EOS2 files will now have all the metadata
included, without having to first read the file as an HDF file,
and then as an HDF-EOS file.
<p>

<li>GRIB improvements:
<p>
<ol>
<li>Implemented support for reading GRIB2 files that are greater than 2GB in size. (Support for reading files larger than 2GB has
been available for GRIB1 files for a number of years.)
<p>
<li>If a center id is not recognized, NCL still gives a warning but
the center attribute will be set to "unknown", rather than eliminating
the attribute.
<p>

<li>The sub_center attribute was incorrectly giving the name of NCEP
sub-centers for centers other than NCEP. One non-NCEP subcenter is
explcitly recognized: the Max Plank Institute for Meterology. When
there is no information to identify a subcenter, the id number
(converted to a string) is given as the sub_center value, unless it is
0 or 255, which means there is no sub_center, in which case the
sub_center attribute is not generated.
<p>

<li>NCL was crashing if a text version of a parameter table was
specified using the NCL_GRIB_PTABLE_PATH, but the file contained no
header line (4 colon-separated numbers starting with -1).
<p>

This has been fixed, and now a warning about an invalid ptable file is issued.
<p>

<li>NCL now gives NCEP table 2 values for parameters above 127 in
cases where it does not recognize a valid parameter table / center
combination. A warning is still issued for these parameters.
<p>

<li>Some updates to the NCEP sub-center description strings, based on
the current docs at the NCEP GRIB site.
<p>

<li>An attribute called "generating_process_type" is now conditionally added to distinguish
variables in GRIB2 files with otherwise identical metadata. In this situation the variable names are only
distinguished with the addition of a suffix '_n', where 'n' is an integer. This was necessary to 
properly decode certain NCEP RTMA (Real-Time Mesoscale Analysis) products.
<p>

<li>Fix for problem of improperly separating variables in certain ECMWF ERA files based on faulty comparison of
their Grid Description Sections.
<p>

<li>Fix for problem of excessive memory growth when using <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> to read many GRIB files.
<p>

<li>Added a new naming convention and a new set of attributes to handle GRIB1 variables with "time period indicators" greater than 50. These indicate
various types of statistical processing. Low numbered values of this indicator continue to be represented with string suffixes such as "_avg" and "acc",
but the higher numbered values have more verbose descriptions. They are distinguished with a new suffix '_Sn', where n is the 2 or 3 digit number of the
time period indicator. Attributes have been added to describe the statistical process, including "statistical_process_descriptor", "statistical_process_duration",
and "N". "N" indicates the number of inputs to the statistical process used, and may be an array if the N varies, for example in monthly averages due to the
different number of days in each month.
<p>

<li>Implemented support for JRA55 (Japanese 55-year reanalysis project). This required supporting alternate definitions for certain level types and statistical processes 
where the JRA55 has local definitions that are different the NCEP definitions.
<p>

<li>Added support for GRIB1 parameter tables from the Max Planck Institute for Meterology: tables 128, 180, 181, 199.
<p>

<li>Fixed a problem that occurred when the first record of a variable is missing. 
<p>
 
</ol>
<p>

</ul>
<p>

<a name="ContouringImprovements6.2.0"></a>
<hr>
<p>
<b>Contouring improvements</b><p>

<ul>

<li>See the above section  on a <a href="#RasterAndMissingValueAreas6.2.0">significant change to raster contouring</a>.
<p>

<li>There are significant improvements to the speed of raster contouring.
<p>

<li>There is alpha-level support for using OpenMP to generated raster graphics using multiple threads. Currently availablity is limited to graphics generated by using 1D values for the resources
<a href="Document/Graphics/Resources/sf.html#sfDataArray"><em>sfDataArray</em></a>, <a href="Document/Graphics/Resources/sf.html#sfXArray"><em>sfXArray</em></a>, and <a href="Document/Graphics/Resources/sf.html#sfYArray"><em>sfYArray</em></a> and not setting 
<a href="Document/Graphics/Resources/sf.html#sfXCellBounds"><em>sfXCellBounds</em></a>, <a href="Document/Graphics/Resources/sf.html#sfYCellBounds"><em>sfYCellBounds</em></a>, or <a href="Document/Graphics/Resources/sf.html#sfElementNodes"><em>sfElementNodes</em></a>. 
Set the environment variable "OMP_NUM_THREADS" to a number greater than one to activate this capability. 
Currently using more than 9 or so threads sometimes causes artifacts to appear in the plot. Also using map projections other than cylindrical equidistant may result in lines
appearing at the edge of the blocks assigned to each thread.
<p>

<li>The CellFill contouring method can now render data on unstructured grids, including triangular grids, quadrilateral grids such as HOMME, 
and geodesic grids with 5, 6, or more sided cells. The outlines of each cell
can be rendered by setting the resource <a href="Document/Graphics/Resources/cn.html#cnCellFillEdgeColor"><em>cnCellFillEdgeColor</em></a> to a non-transparent color. 
The user must specify the cell vertices using the resources <a href="Document/Graphics/Resources/sf.html#sfXCellBounds"><em>sfXCellBounds</em></a> and <a href="Document/Graphics/Resources/sf.html#sfYCellBounds"><em>sfYCellBounds</em></a>. 
Also to avoid errors, the resources <a href="Document/Graphics/Resources/sf.html#sfXArray"><em>sfXArray</em></a> and <a href="Document/Graphics/Resources/sf.html#sfYArray"><em>sfYArray</em></a> must be specified. 
However, this requirement will be eliminated in the future.
<p>

<li>In most cases, users can now have constant or near-constant fields rendered as a filled area, 
rather than having the contoured area remain blank. In order to activate this behavior, set the newly implemented resource,
<a href="Document/Graphics/Resources/cn.html#cnConstFEnableFill"><em>cnConstFEnableFill</em></a>, to True. By default, the constant field informational text box will still appear; 
turn it off by setting <a href="Document/Graphics/Resources/cn.html#cnConstFLabelOn"><em>cnConstFLabelOn</em></a> to False. In the future, <a href="Document/Graphics/Resources/cn.html#cnConstFEnableFill"><em>cnConstFEnableFill</em></a> will likely default to True, 
with <a href="Document/Graphics/Resources/cn.html#cnConstFLabelOn"><em>cnConstFLabelOn</em></a> defaulting to False unless contour line drawing is enabled. 
<p>

<li>Better error reporting in situations where out-of-range (lat-lon) coordinate values cannot be handled. The error message suggests a possible fix for the problem: switching to use of the triangular mesh algorithm for 
plotting.
<p>

</ul>
<p>

<a name="ShapefileImprovements6.2.0"></a>
<hr>
<p>
<b>Significant improvements to the speed of drawing shapefile
polylines or polygons</b><p>

The
<a href="Document/Graphics/Interfaces/gsn_add_shapefile_polylines.html"><strong>gsn_add_shapefile_polylines</strong></a> and
<a href="Document/Graphics/Interfaces/gsn_add_shapefile_polygons.html"><strong>gsn_add_shapefile_polygons</strong></a> functions
were significantly sped up via the use of a new resource called
<a href="Document/Graphics/Resources/gs.html#gsSegments"><em>gsSegments</em></a>. Previously, an
object was created for every segment added, which could cause
thousands of objects to be created. Now, only one object is created.
<p>

We saw speed ups of 80 times faster in the case of drawing the France
"Fra_adm5.shp" shapefile
from <a href="http://www.gadm.org/country">gadm.org/country</a> which
has 37,188 polyline segments.
<p>

Note, too, that the use of these two functions is not really needed,
since attaching shapefile polylines and polygons is now simplified.
The following two segments of code are identical, assuming "plot"
is some map plot that you want to attach shapefile polylines
or polygons to:
<p>

Method 1:<br>

<pre>
  f = addfile("file.shp","r")
  lnres             = True
  lnres@gsLineColor = "NavyBlue"
  lnres@gsSegments  = f->segments(:,0)
  poly = gsn_add_polyline(wks, plot, f->x, f->y, lnres)
  draw(plot)
  frame(wks)
</pre>
<p>

Method 2:<br>

<pre>
  lnres             = True
  lnres@gsLineColor = "NavyBlue"
  polyid = gsn_add_shapefile_polylines(wks,plot,"file.shp",lnres)
  draw(plot)
  frame(wks)
</pre>


<a name="ESMFRegridding6.2.0"></a>
<hr>
<p>
<b>Improvements to ESMF regridding routines</b><p>

<ul>

<li>Two new interpolation methods have been added: "neareststod" and "nearestdtos".
<p>

<li>When regridding to or from
an <a href="Document/glossary.html#UnstructuredGrid">unstructured grid</a>, a
triangular mesh is generated internally by NCL. This can be a slow and
memory intensive operation, so a new option was added to allow the
user to input their own triangular mesh via <em>SrcTriangularMesh</em>
or <em>DstTriangularMesh</em>.
<p>

<li>Large file (opt@LargeFile=True) support is now turned on by default.
<p>

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> / 
<a href="Document/Functions/ESMF/ESMF_regrid_gen_weights.html"><strong>ESMF_regrid_gen_weights</strong></a> - 
A bug was fixed in which the "pole" option was only being recognized
if you set it as "pole" and not "Pole".
<p>
</ul>

<p>
<a name="ThinLineIssue6.2.0"></a>
<hr>
<p>
<b>Improvement to "thin line" graphical issue</b><p>
<p>

On rare occasions, plots from postscript, pdf, or SVG workstations may
exhibit faint, light-colored gaps between adjacent filled regions. The
effect is most noticeable when the regions are of the same color, and
share a long, straight boundary. This artifact is believed to be
caused by a bug in the underlying <a href="http://cairographics.org/">cairographics</a> library.
The problem has been reported to them.
<p>

We've improved the appearance of the plots by implementing
a temporary internal work-around for NCL V6.2.0. See the two sets of
images below for comparison (click on either thumbnail to see the
problem more clearly.)
<p>

The first set of images is a modified version of the "ng4ex" example
"<a href="Applications/BasicExamples/Contour/cn05.html">cn05n</a>".
The second set of images were generated by
this <a href="files/map_thin_line.html">map_thin_line.ncl</a> script.
<p>

<a href="files/contour_thin_lines_6.1.2.png"><img src="files/contour_thin_lines_6.1.2.sm.png"></a>
<a href="files/contour_thin_lines_6.2.0.png"><img src="files/contour_thin_lines_6.2.0.sm.png"></a>
<p>


<a href="files/map_thin_line_6.1.2.png"><img src="files/map_thin_line_6.1.2.sm.png"></a>
<a href="files/map_thin_line_6.2.0.png"><img src="files/map_thin_line_6.2.0.sm.png"></a>
<p>

<p>
<a name="NewFunctions6.2.0"></a>
<hr>
<p>
<b>New Functions</b><p>
<p>
<ul>

<li><a href="Document/Functions/Built-in/area_poly_sphere.html"><strong>area_poly_sphere</strong></a> - Finds the area enclosed by
an arbitrary polygon on the sphere.
<p>

<li><a href="Document/Functions/Contributed/calculate_monthly_values.html"><strong>calculate_monthly_values</strong></a> -
Calculate monthly values [avg, sum, min, max] from high frequency
temporal values.
<p>

<li><a href="Document/Functions/Built-in/kolsm2_n.html"><strong>kolsm2_n</strong></a> - Test if two samples are compatible
with coming from the same distribution using the Kolmogorov-Smirnov
two sample test.
<p>


<li><a href="Document/Functions/Built-in/lspoly_n.html"><strong>lspoly_n</strong></a> - This function is the same
as <a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a>, except it allows you to provide a
dimension on which to calculate a set of coefficients for a weighted
least squares polynomial fit to the given
data. <a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a> always operates on the rightmost
dimension.
<p>

See the <a href="#BugsFixed6.2.0">"bugs fixed" section</a>
below about a bug fix to <a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a>.
<p>

<li><a href="Document/Functions/Contributed/omega_to_w.html"><strong>omega_to_w</strong></a> - Convert omega
vertical velocity (Pa/s) to (m/s).
<p>

<li><a href="Document/Functions/Contributed/print_clock.html"><strong>print_clock</strong></a> - Prints the
given string along with a current timestamp.<p>

<li><a href="Document/Functions/Contributed/reg_multlin_stats.html"><strong>reg_multlin_stats</strong></a> - 
Performs multiple linear regression analysis including confidence 
estimates and creates an ANOVA table. This is a driver which invokes the builtin 
<a href="Document/Functions/Built-in/reg_multlin.html"><strong>reg_multlin</strong></a> function. It is the preferred function 
for performing multiple linear regression.<p>  

<li><a href="Document/Functions/Contributed/regline_stats.html"><strong>regline_stats</strong></a> - 
Performs simple linear regression analysis including confidence 
estimates and creates an ANOVA table.  It is the preferred function 
for performing simple linear regression.<p>  

<li><a href="Document/Functions/Contributed/w_to_omega.html"><strong>w_to_omega</strong></a> - Convert w
vertical velocity (m/s) to (Pa/s).
<p>

<li>New WRF functions:
<ul>

<li><a href="Document/Functions/Built-in/wrf_omega.html"><strong>wrf_omega</strong></a> - Calculates approximate omega, based
on vertical velocity, water vapor mixing ratio, temperature, and
pressure.
<p>

<li><a href="Document/Functions/Built-in/wrf_virtual_temp.html"><strong>wrf_virtual_temp</strong></a> - Calculates virtual
temperature, given temperature and mixing ratio.<p>
<p>

<li><a href="Document/Functions/Built-in/wrf_wetbulb.html"><strong>wrf_wetbulb</strong></a> - Calculates wet bulb temperature,
given pressure, temperature, and water vapor mixing ratio.<p>

<p>
</ul>
<p>

<li>New color-related functions:
<ul>

<li><a href="Document/Functions/Built-in/color_index_to_rgba.html"><strong>color_index_to_rgba</strong></a> - Converts one or more absolute
color index values into its equivalent RGBA quadruplet. This is useful for 
discovering the RGBA values encoded into the high-numbered integers that 
may be returned from performing a <a href="Document/Functions/Built-in/getvalues.html"><strong>getvalues</strong></a> call for a 
color-related resource such as <a href="Document/Graphics/Resources/cn.html#cnFillColors"><em>cnFillColors</em></a>. Note this function
does not currently work for color indexes less than 256 that are dependent on the
setting of <a href="Document/Graphics/Resources/wk.html#wkColorMap"><em>wkColorMap</em></a>.
<p>

<li><a href="Document/Functions/Built-in/get_color_index.html"><strong>get_color_index</strong></a> - Chooses a color index for a
scalar value, given a color map and a range of values.
<p>

<li><a href="Document/Functions/Built-in/get_color_rgba.html"><strong>get_color_rgba</strong></a> - Chooses an RGB triplet or RGBA
quadruplet for a scalar value, given a color map and a range of
values.
<p>

<li><a href="Document/Graphics/Interfaces/namedcolor2rgba.html"><strong>namedcolor2rgba</strong></a> - Returns the
RGBA quadruplets of the given list of named colors. <p>

<li><a href="Document/Functions/Built-in/rgba_to_color_index.html"><strong>rgba_to_color_index</strong></a> - Converts one or more RGBA quadruplets
into its equivalent absolute color index.
<p>

<li><a href="Document/Functions/Built-in/span_color_indexes.html"><strong>span_color_indexes</strong></a> - Given the number of
desired color values, return an array of indexes that nicely span the
given color map.
<p>

<li><a href="Document/Functions/Built-in/span_color_rgba.html"><strong>span_color_rgba</strong></a> - Given the number of desired
color values, return an array of RGB triplets or RGBA quadruplets that
nicely span the given color map.
<p>

</ul>
</ul>
  
<p>

<a name="NewResources6.2.0"></a>
<hr>
<p>
<b>New graphical resources</b><p>

<ul>
<li><a href="Document/Graphics/Resources/cn.html#cnConstFEnableFill"><em>cnConstFEnableFill</em></a> - Setting
this to True will force constant contour fields, or fields that fall
between two contour levels, to be filled in the appropriate color
or shaded pattern.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnCenterStringFuncCode"><em>gsnCenterStringFuncCode</em></a>, 
<a href="Document/Graphics/Resources/gsn.html#gsnLeftStringFuncCode"><em>gsnLeftStringFuncCode</em></a>,
<a href="Document/Graphics/Resources/gsn.html#gsnRightStringFuncCode"><em>gsnRightStringFuncCode</em></a>,
<a href="Document/Graphics/Resources/gsn.html#gsnStringFuncCode"><em>gsnStringFuncCode</em></a> - resources for
setting the function code character for the three subtitles at the top
of a plot.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillDotSizeF"><em>gsnXYBarChartFillDotSizeF</em></a> - increases the
dot size in stipple-filled <a href="Applications/bar.html">bar charts</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillLineThicknessF"><em>gsnXYBarChartFillLineThicknessF</em></a> -
increases the thickness of lines in a
pattern-filled <a href="Applications/bar.html">bar chart</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillScaleF"><em>gsnXYBarChartFillScaleF</em></a> - changes the
fill scale for pattern-filled <a href="Applications/bar.html">bar
charts</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillOpacityF"><em>gsnXYBarChartFillOpacityF</em></a> - sets the
opacity for solid-filled <a href="Applications/bar.html">bar
charts</a>.
<p>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYFillOpacities"><em>gsnXYFillOpacities</em></a> - sets an array of
opacities for solid-filled <a href="Applications/bar.html">bar
charts</a> which corresponds with
the <a href="Document/Graphics/Resources/gsn.html#gsnXYFillColors"><em>gsnXYFillColors</em></a> array.
<p>

<li><a href="Document/Graphics/Resources/gs.html#gsColors"><em>gsColors</em></a> - This resource
allows you to set an array of fill or line colors for
polygons or line segments being attached to a plot via
the new  <a href="Document/Graphics/Resources/gs.html#gsSegments"><em>gsSegments</em></a> resource.
<p>

<li><a href="Document/Graphics/Resources/gs.html#gsSegments"><em>gsSegments</em></a> - This resource
allows you specify the start and end of line or polygon segments via
one large array. Using this resource can significantly speed up code
(we saw one script run 80 times faster) that is adding thousands of
segments to a plot. It is only available with polyline and polygon
drawing codes like <a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a>
and
<a href="Document/Graphics/Interfaces/gsn_add_polygon.html"><strong>gsn_add_polygon</strong></a>.
<p>

<li><a href="Document/Graphics/Resources/mp.html#mpPolyMode"><em>mpPolyMode</em></a> - This new resource
takes three possible values: "StandardPoly", "FastPoly", and
"AutoPoly". It should be used to set what method to use when
adding polygons to a map plot.
<p>

The default is "AutoPoly", meaning that the drawing code decides which
type of polygon to draw based on the great circle distance of each
component line segment, and on the polygon's graphic style
attributes. If the great circle distance of any component line segment
is greater than 10 degress or if any fill pattern other than solid is
in effect, the "standard" method that was used in NCL versions 6.1.2
and earlier is used. Otherwise a faster method introduced in version
6.2.0 is used. The faster method may sometimes fail for polygons that 
have complicated crossing with the visible edges of curvilinear map projections.

<p>
<li><a href="Document/Graphics/Resources/lb.html#lbBoxSeparatorLinesOn"><em>lbBoxSeparatorLinesOn</em></a> - Setting this resource
False allows you to have a perimeter line drawn around the "bar" of the LabelBar without
having lines separating each component box within the bar.


</ul>
<p>

<a name="NewGraphicalOutputFormat.2.0"></a>
<hr>
<p>
<b>New graphical output format</b><p>

The "SVG" format is now supported in NCL. It can be used  with
<a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a> in the same way 
as other formats like "png" and "pdf":
<p>

<pre>
   wks = gsn_open_wks("svg","example")      ; Will create "example.svg"
</pre>
<p>

<a name="NewColorTables6.2.0"></a>
<hr>
<p>
<b>New color tables</b><p>

Over 120 new color tables were added to NCL. You can view and download
these color tables now via the
<a href="Document/Graphics/color_table_gallery.html"><b>color table
gallery</b></a>.  Special thanks to Nicolas Barrier of Laboratoire de
Physique des Oc&eacute;ans, Melissa Bukovsky of NCAR, and Carl Schreck
of Cooperative Institute for Climate and Satellites - North Carolina
for contributing these tables, which came from <a href="http://colorbrewer2.org/">ColorBrewer</a>, <a href="http://gmt.soest.hawaii.edu/">GMT</a>,
<a href="http://www.iges.org/grads/">GrADS</a>,
<a href="http://matplotlib.org/">matplotlib</a>,
and <a href="http://meteora.ucsd.edu/~pierce/ncview_home_page.html">Ncview</a>.
<p>

<a name="GEToolsLibrary6.2.0"></a>
<hr>
<p>
<b>Library for generating KML output from NCL</b><p>

<a href="Document/Manuals/GETools/NCL_GETools.html">NCL_GETools</a>
is a library for generating KML output with NCL.  It was developed by
Mohammad Abouali during the summer 2013
<a href="http://www.cisl.ucar.edu/siparcs">SIParCS</a> internship
program. The library is being made available on a preliminary basis to
gauge user interest and to gather further use-cases and requirements.
<p>

<a name="UpdatedFunctions6.2.0"></a>
<hr>
<p>
<b>Updated functions</b><p>

<ul>
<li> All 'date' related functions in contributed.ncl have been 
updated to recognize the <i>calendar</i> attribute. 
<p>

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> /
<a href="Document/Functions/ESMF/unstructured_to_ESMF.html"><strong>unstructured_to_ESMF</strong></a> - See
<a href="#ESMFRegridding6.2.0">ESMF Regridding improvements</a> above.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_shapefile_polylines.html"><strong>gsn_add_shapefile_polylines</strong></a> / 
<a href="Document/Graphics/Interfaces/gsn_add_shapefile_polygons.html"><strong>gsn_add_shapefile_polygons</strong></a> - See the
discussion in the "<a href="#ShapefileImprovements6.2.0">Significant
improvements to the speed of drawing shapefile lines or polygons</a>"
section.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_vector.html"><strong>gsn_csm_pres_hgt_vector</strong></a> - The
<a href="Document/Graphics/Resources/vc.html#vcMapDirection"><em>vcMapDirection</em></a> resource now 
defaults to False for this function. It remains set to True for
all other gsn_xxx_vector routines for now.
<p>

<li><a href="Document/Functions/Built-in/print.html"><strong>print</strong></a> - you will see more precision when
printing doubles. For example, "-62.02990341186519" instead of
"62.0299".
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a> - Three
new diagonistics were added:

<ol>
<li>"tw" - wet bulb temperature
<li>"omg" - omega
<li>"vt" - virtual temperature  
</ol>

</ul>
<p>

<a name="BugsFixed6.2.0"></a>
<hr>
<p>

<b>Bugs fixed</b><p>

<ul>
<li>A bug was fixed where byte value were being printed in hexadecimal format
instead of decimal format, when using <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>.<p>

<li><a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>: if the aggregated time coordinate has
different units in the individual aggregated files, the values are now adjusted to
conform to the units of the first file in the aggregation.

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> / 
<a href="Document/Functions/ESMF/ESMF_regrid_gen_weights.html"><strong>ESMF_regrid_gen_weights</strong></a> - - See
<a href="#ESMFRegridding6.2.0">ESMF Regridding improvements</a> above.
<p>

<li><a href="Document/Functions/Built-in/ezfftf.html"><strong>ezfftf</strong></a> / <a href="Document/Functions/Built-in/ezfftb.html"><strong>ezfftb</strong></a> - A bug was
fixed for the case where the number of points is odd.<p>

<li><a href="Document/Functions/Built-in/covcorm.html"><strong>covcorm</strong></a> - A bug was fixed in which "iopt" 
behaved the opposite of how it was described in the documentation:
<p>

<ul>

<li><em>iopt</em>=(/0,1/) behaves as if you had set <em>iopt</em>=(/1,0/)

<li><em>iopt</em>=(/1,0/) behaves as if you had set <em>iopt</em>=(/0,1/)

<li><em>iopt</em>=(/0,0/) or (/1,1/) works as described

</ul>
<p>

<li><a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a> - A bug was
fixed that didn't allow you to use
the <i>gsnShadeHigh</i>, <i>gsnShadeMid</i>, and
<i>gsnShadeLow</i> resources together.
<p>

<li><a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a> - This function was failing in certain
cases where the input data were "scaled" down. We decided to replace
this routine with a <a href="http://www.netlib.org/slatec/">SLATEC
version</a>. It takes the same arguments, but uses a different
algorithm under the hood.  You can get the "old" (pre NCL V6.2.0)
version of lspoly by using "lspoly_old", but we don't recommend it for
regular use.
<p>

<li><a href="Document/Functions/Contributed/pdfxy.html"><strong>pdfxy</strong></a> - Fixed a bug in which
values that exactly matched the rightmost edge of the rightmost
bin were not getting counted. There should be minimal effect on user
results.
<p>

<li><a href="Document/Functions/Built-in/poisson_grid_fill.html"><strong>poisson_grid_fill</strong></a> - Fixed a bug that when the
data are cyclic, the leftmost boundary index was off-by-one. The bug
will have little or no impact on most users.
<p>

<li><a href="Document/Functions/Built-in/read_colormap_file.html"><strong>read_colormap_file</strong></a> - This function
now works on any NCL color map (previously, it only worked
on *.rgb color maps in $NCARG_ROOT/lib/ncarg/colormaps).
<p>

<li><a href="Document/Functions/Built-in/relhum.html"><strong>relhum</strong></a> - A bug was fixed in which all variables
had to have the _FillValue attribute if any one of the input variables
had an _FillValue attribute. Note that there is a potential incompatible 
change with this fix.  The return missing value is now whatever the 
default missing value is for the type being returned, and *not* 
the _FillValue associated with the input variable '<em>t</em>', 
as it was in the past.
<p>

<li><a href="Document/Functions/Contributed/stat_dispersion.html"><strong>stat_dispersion</strong></a> - Fixed a
bug that caused this function to fail when large arrays contained lots
or all missing values.
<p>

<li><a href="Document/Functions/Built-in/str_split_csv.html"><strong>str_split_csv</strong></a> - A bug was fixed in which if
you had a mix of commas and quotes, the fields were not
parsed properly.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_map_overlays.html"><strong>wrf_map_overlays</strong></a> - A bug was 
fixed to correctly plot rotated lat-lon grids.
<p>

</ul>

<a name="BuildInstructions6.2.0"></a>
<hr>
<p>

<b>Change in HDF4 build instructions</b><p>

If you are planning to build NCL V6.2.0 from source code, then take
note that there's a change in where it expects to find the HDF4
include files.
<p>

Previously, you had to install them to an "hdf" subdirectory via a
special "--includedir" option on the "configure" line.  This is no
longer required.  This means if you are linking against
previously-compiled versions of HDF4, you may need to move the include
files out of "/<i>xxxx</i>/include/hdf" to "/<i>xxxx</i>/include".


<hr><hr>
<A NAME="6.1.2"></A>
<A NAME="6.1.1"></A>
<h2>Version 6.1.1 / Version 6.1.2</h2>
<h3>February 4, 2013 / February 7, 2013</h3><p>

<font color=red>Note:</font> almost immediately
after <a href="prev_releases.html#6.1.1">V6.1.1</a> was released, a
few users reported a bug that warranted a V6.1.2 release immediately.
For more information, see the
discussion <a href="#KnownIssues6.1.1">below</a> on the
<a href="Document/Graphics/Resources/ws.html#wsMaximizeSize"><em>wsMaximizeSize</em></a> resource.
<p>
<hr>
<p>

Since V6.1.1 had a number of new features, we will include the "what's
new" for V6.1.1. V6.1.2 is a bug fix release only and doesn't contain
any new features.
<p>

<ul>
<li><a href="#NewOperator6.1.1">New reassignment operator</a>
<li><a href="#NewFunctions6.1.1">New functions</a>
<li><a href="#NewColorTables6.1.1">New color tables</a>
<li><a href="#NetCDF4Support6.1.1">Better support for NetCDF-4 files</a>
<li><a href="#FileIOImprovements6.1.1">File I/O improvements</a>
<li><a href="#BugsFixed6.1.1">Bugs fixed</a>
<li><a href="#KnownIssues6.1.1">Known issues with version 6.1.1 and 6.1.2</a>
</ul>
<p>

<a name="#NewOperator6.1.1"></a>
<p>
<b>New reassignment operator</b><p>

There's a new operator, ":=", that allows you to reassign variables
without having to delete them first.<br>
For example:
<p>

<pre>
   x = fspan(-10.5,20.8,0.1)    ; array of floats
;  x = "This is a string"       ; this won't work
   x <b>:=</b> "This is a string"      ; single string
</pre>
<p>

This operator works for attributes as well, but not for coordinate arrays.
<p>

<a name="NewFunction6.1.1"></a>
<p>
<b>New functions</b><p>

<ul>

<li><a href="Document/Functions/Built-in/covcorm_xy.html"><strong>covcorm_xy</strong></a> - Calculates a covariance or
correlation matrix given two separate arrays.
<p>

<li><a href="Document/Functions/Built-in/dgeevx_lapack.html"><strong>dgeevx_lapack</strong></a> - Given a square (N,N) real
non-symmetric matrix, compute the eigenvalues and, optionally, the left
and/or right eigenvectors via the LAPACK subroutine
<a href="http://www.netlib.org/lapack/patch-3.0/src/dgeevx.f"><b>dgeevx</b></a>.
<p>

<li><a href="Document/Functions/Built-in/get_isolines.html"><strong>get_isolines</strong></a> - Retrieves the points that define
a contour line.
<p>

<li><a href="Document/Functions/Built-in/totype.html"><strong>totype</strong></a> - Converts values of any snumeric data
type or string to values of the given type.
<p>

</ul>

<a name="NewColorTables6.1.1"></a>
<p>
<b>New color tables</b><p>

Joe Grim of NCAR/RAL contributed three new color tables to help
colleagues who have difficulty discerning colors.

<p>

You can download these tables now and use them. Click on the "download
now" link of the desired table, and then go to the "Move file to
appropriate directory" section of the
"<a href="Document/Graphics/create_color_table.html">create
your own color table</a>" page for information on adding this new
table to your current version of NCL.
<p>

<table>
<tr>

<td><a href="Document/Graphics/ColorTables/Images/cb_9step.png">cb_9step</a><br>(<a href="files/cb_9step.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/cb_rainbow.png">cb_rainbow</a><br>(<a href="files/cb_rainbow.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/cb_rainbow_inv.png">cb_rainbow_inv</a><br>(<a href="files/cb_rainbow_inv.rgb">download
now</a>)

<tr>
<td><img src="Document/Graphics/ColorTables/Images/cb_9step.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/cb_rainbow.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/cb_rainbow_inv.sm.png">

</table>
<p>

<a name="NetCDF4Support6.1.1"></a>
<p>
<b>Better support for NetCDF-4 files</b><p>

<b><i>Support for NetCDF-4 files is in beta-testing in
V6.1.1.</i></b><br> We encourage people to test it out and give us
feedback on our <a href="Support/email_lists.html">ncl-talk email
list</a>.
<p>

A number of improvements were made to NCL's "advanced file structure"
that was added in V6.1.0 to address new data features in
<a href="Document/glossary.html#netCDF4">NetCDF-4</a>, like groups, compound
data types, variable length arrays, and multiple unlimited
dimensions. There are some examples of these new features on the
"<a href="Applications/writ3e_netcdf.html">Write
to NetCDF</a>" section of the examples page.
<p>


<a name="FileIOImprovements6.1.1"></a>
<p>
<b>File input/output improvements</b><p>

<ul>

<li>Improved the handling of record marker sizes when reading/writing
Fortran binary files.  You can now specify the record marker size by
setting the "RecordMarkerSize" parameter in a call
to <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a>
<p>

<li>Added support for GRIB1 GDS grid 205, described as "Arakawa Non-E
Staggered rotated Latitude/Longitude Grid".
<p>

</ul>

<a name="BugsFixed6.1.1"></a>
<p>

<b>File input/output bugs fixed</b><p>

<ul>

<li>Several NetCDF bugs were fixed (in reference to NetCDF-4 files,
and <em>not</em> NetCDF "classic" files, which have worked as they always
have):
<p>

<ol>
<li>Writing an undefined variable directly to a file.
<li>Writing a scalar to a file.
<li>Printing a variable's attribute when it is double.
<li>Adding global attributes to an existing file.
<li>If two files are opened, where the first one is NetCDF3 and second
one is NetCDF4, then there was a problem operating on the first file.

<p>

</ol>

</ul>

<b>Function and procedure bugs fixed</b>
<p>

<ul>
<li><a href="Document/Functions/Built-in/dtrend_quadratic_msg_n.html"><strong>dtrend_quadratic_msg_n</strong></a> - The "remove_mean"
parameter was behaving the opposite of what the documentation
states. This has been fixed.
<p>

<li><a href="Document/Functions/Built-in/reshape.html"><strong>reshape</strong></a> / <a href="Document/Functions/Built-in/reshape_ind.html"><strong>reshape_ind</strong></a>  - 
The first argument was unnecessarily being restricted to "numeric".
It now works with strings.
<p>

<li><a href="Document/Functions/Contributed/rgrid2rcm_Wrap.html"><strong>rgrid2rcm_Wrap</strong></a> - Fixed two
bugs: (a) the argument sequence was incorrect, and (b) a named
dimension was corrected.
<p>

<li><a href="Document/Functions/Built-in/str_split_by_length.html"><strong>str_split_by_length</strong></a> - Fixed bug with
where a string terminator wasn't properly added, if the
string didn't split into nice even chunks.
<p>
</ul>
<p>

<b>Graphical bugs fixed</b>
<p>

<ul>
<li>Fixed a contouring bug for unstructured data that sometimes caused
the message "fatal:ContourPlotDraw: CTTMTL/ICAEDG - LOGIC ERROR" to
appear.
<p>

<li>Fixed a bug where the <a href="Document/Graphics/Resources/lg.html#lgItemOrder"><em>lgItemOrder</em></a> resource didn't
work correctly with <a href="Document/Graphics/Interfaces/gsn_legend_ndc.html"><strong>gsn_legend_ndc</strong></a>.
<p>

<li>Fixed a bug where
the <a href="Document/Graphics/Resources/cn.html#cnLowLabelBackgroundColor"><em>cnLowLabelBackgroundColor</em></a>
resource was affected by the setting of
the <a href="Document/Graphics/Resources/cn.html#cnHighLabelBackgroundColor"><em>cnHighLabelBackgroundColor</em></a>
resource.
<p>

</ul>
<p>

<a name="KnownIssues6.1.1"></a>
<p>
<b>Known issues with version 6.1.1</b><p>

<ul>

<li>There's a bug in this version of NCL that can cause contour
plotting scripts to fail with the message:
<p>

<pre>
fatal:_NhlUseWorkspace: Allocation of workspace would exceed maximum total size
fatal:ContourPlotDraw: error reserving label area map workspace
fatal:ContourPlotDraw: Error reserving workspace
fatal:ContourPlotDraw: draw error
warning:WorkstationDeactivate: workstation not active or not opened
</pre>
<p>

This occurs when you have
a <a href="Document/Graphics/Resources/ws.html#wsMaximizeSize"><em>wsMaximizeSize</em></a> setting in your
.hluresfile, and the value is something "small" like 32556688.  If you
remove this setting, or bump it up to a larger number like 100000000,
then contouring should work again.
<p>

This bug was fixed in V6.1.2. We recommend you download that version.
<p>

<li>There is a bug in Apple's new XQuartz windowing system that causes
NCL's cairo X11 window to not display properly on Mac systems running
MacOS 10.8 or later, or on Macs that have been upgraded to use XQuartz
2.7.x as the default X11 window system.
<p>

<b>Note: as of November 10, 2013, this bug has been fixed by
XQuartz. You need to download and install version 2.7.5
from <a href="http://xquartz.macosforge.org/">http://xquartz.macosforge.org/</a>. Be
sure to kill any old XQuartz servers that are still running.</b>
<p>

If you can't upgrade your XQuartz for some reason, then a work-around
is to use "ncl.xq.fix". You must use this executable in place of
"ncl":
<p>

<pre>
  ncl.xq.fix myscript.ncl
</pre>

If this seems to fix the problem, then you can make this your default "ncl":
<p>

<pre>
  mv $NCARG_ROOT/bin/ncl $NCARG_ROOT/bin/ncl.bkp
  mv $NCARG_ROOT/bin/ncl.xq.fix $NCARG_ROOT/bin/ncl
</pre>

<li>If you have an NCL script that calls ImageMagick's "convert" utility
to convert from a PS/PDF file to another format, then you need to make
sure you delete the workstation before you call convert:
<p>

<pre>
   delete(wks)
   system( "convert -trim file.ps file.gif")
</pre>
<p>

This ensures that the "file.ps" file is properly closed before you 
convert it. In versions 6.0.0 and earlier, this wasn't required,
but it was always recommended. It is now required for V6.1.x.
<p>

<li>PS files are quite a bit larger than they were in V6.0.0 and
earlier. PDF files are smaller.
<p>

</ul>

<hr><hr>
<A NAME="6.1.0"></A>
<h2>Version 6.1.0</h2>
<h3>October 28, 2012</h3><p>

<ul>
<li><a href="#NewColorDisplayModel6.1.0">New color display model</a>
<li><a href="#DefaultGraphicalChanges6.1.0">Changes to graphical defaults</a>
<li><a href="#CompilationChanges6.1.0">Changes to compiling NCAR Graphics and HLU codes</a>
<li><a href="#TroubleShooting6.1.0">Trouble-shooting potential differences in graphics</a>
<li><a href="#ESMFRegridding6.1.0">New regridding capabilities via ESMF software</a>
<li><a href="#NewFunctions6.1.0">New functions</a>
<li><a href="#NewResources6.1.0">New resources</a>
<li><a href="#NewNetCDF4Capabilities6.1.0">Reading new NetCDF4 features</a>
<li><a href="#NewColorTables6.1.0">New color tables</a>
<li><a href="#UpdatedFunctions6.1.0">Updated functions</a>
<li><a href="#UpdatedFonts6.1.0">Southern hemisphere font symbols added</a>
<li><a href="#GRIBChanges6.1.0">Changes and additions to GRIB1/GRIB2 reader</a>
<li><a href="#FileIOTools6.1.0">Improvements and bug fixes to
ncl_convert2nc and ncl_filedump</a>
<li><a href="#BugsFixed6.1.0">Bugs fixed</a>
<li><a href="#KnownIssues6.1.0">Known issues with version 6.1.0</a>
</ul>
<p>

<a name="NewColorDisplayModel6.1.0"></a>
<hr><hr>
<p>
<b>New color display model</b></a>
<p>

With the 6.1.0
release, <a href="http://www.cairographics.org/">cairo</a> is the
default software used for our graphical display model.  This will
allow for:
<p>

<ul>
<li>The use of 32-bit colors (R,G,B,alpha)

<li>The ability to have transparent colors

<li>The use of named colors without first adding them to the existing
color map

<li>The use of more than 256 colors per image

</ul>
<p>

These features will only work with "ps", "pdf", "png", and "x11"
output.  The "ncgm" output format is still limited to 8-bit color.
<p>

Visit the <a href="Applications/rgbacolor.html">new color capabilities</a>
examples page for details.
<p>

This upgrade might result in some plots having looking different.
Please see the section on
potential <a href="#DefaultGraphicalChanges6.1.0">backwards-incompatibilites</a>
for more information.
<p>

If you think you've run across a real problem with this upgrade,
please see our "<a href="report_bug.html">Reporting NCL Bugs</a>"
page.<p>

<a name="DefaultGraphicalChanges6.1.0"></a>
<hr><hr>
<p>
<b>Changes to graphical defaults</b>
<p>

With the introduction of
the <a href="#NewColorDisplayModel6.1.0">new color display
model</a>, we decided to change some long-standing graphical defaults
NCL. While these changes may cause some backwards-incompatibility in
the look of your graphics, we think these changes are for the better.
See this side-by-side comparison:
<p>

[<i>Click on images for a larger version.</i>]<p>

<table border=1 cellpadding=5>
<tr>
<th align=center>NCL V6.0.0 <th align=center>NCL V6.1.0
<tr>
<td><a href="https://www.ncl.ucar.edu/Images/NCL600.png"><img width=200 height=200 src="https://www.ncl.ucar.edu/Images/NCL600.png"></a>
<td><a href="https://www.ncl.ucar.edu/Images/NCL610.png"><img width=200 height=200 src="https://www.ncl.ucar.edu/Images/NCL610.png"></a>
</table>
<p>

Here are the changes you need to be aware of:
<ol>

<li><b>Default color table is a new one with 256 colors.</b><p>

The default color table has been changed from the default one called
"<a href="Document/Graphics/ColorTables/Images/default.png">default</a>"
to a new color table called
"<a href="Document/Graphics/ColorTables/Images/ncl_default.png">ncl_default</a>".<p>


<table border=1 cellpadding=5>
<tr>
<th align=center>NCL V6.0.0 <th align=center>NCL V6.1.0
<tr>
<td><a href="Document/Graphics/ColorTables/Images/default.png"><img src="Document/Graphics/ColorTables/Images/default.sm.png"></a>
<td><a href="Document/Graphics/ColorTables/Images/ncl_default.png"><img src="Document/Graphics/ColorTables/Images/ncl_default.sm.png"></a>
</table>
<p>

<li><b>Default font is now helvetica</b>.<p>

The default font is now
"<a href="Document/Graphics/Images/font21.png">helvetica</a>" instead
of "<a href="Document/Graphics/Images/font0.png">times-roman</a>".
<p>

<li><b>Default function code is now "~"</b>.<p>

The old default <a href="Applications/fcodes.html">function code</a>
was a colon ":" which is a common character to use in titles.
<p>

<li><b>Color map will automatically be spanned for color contours,
vectors, and streamlines</b>.<p>

This is effectively the same as
setting <a href="Document/Graphics/Resources/gsn.html#gsnSpreadColors"><em>gsnSpreadColors</em></a> to True.
However, this resource has been superceded by new
resources <a href="Document/Graphics/Resources/cn.html#cnSpanFillPalette"><em>cnSpanFillPalette</em></a>,
<a href="Document/Graphics/Resources/vc.html#vcSpanLevelPalette"><em>vcSpanLevelPalette</em></a>, and
<a href="Document/Graphics/Resources/st.html#stSpanLevelPalette"><em>stSpanLevelPalette</em></a>, which all
default to True.
<p>

<a href="Document/Graphics/Resources/gsn.html#gsnSpreadColors"><em>gsnSpreadColors</em></a> will still work, but it
will only have an
effect if <a href="Document/Graphics/Resources/gsn.html#gsnSpreadColorStart"><em>gsnSpreadColorStart</em></a>
and/or <a href="Document/Graphics/Resources/gsn.html#gsnSpreadColorEnd"><em>gsnSpreadColorEnd</em></a> are set to
something other than their default values of 2 and -1.
<p>

<li><b>Labelbar labels will automatically be strided if they
overlap.</b><p>

Basically, <a href="Document/Graphics/Resources/lb.html#lbLabelAutoStride"><em>lbLabelAutoStride</em></a> now defaults
to True.</b><p>

</ol>
<p>

<a name="CompilationChanges6.1.0"></a>
<hr><hr>
<p>
<b>Changes to compiling NCAR Graphics and HLU codes</b>
<p>

If you are compiling NCAR Graphics or HLU programs using this new
version, you are now required to link several new libraries. This is
due to the new <a href="http://www.cairographics.org/">cairo
graphics</a> that are now being used for graphical display.
<p>

If you use any of the ncargf77, ncargcc, nhlf77, or nhlcc scripts to
compile your code, you will notice that they now link one or more of
the additional libraries:


<pre>
   -lcairo -lfontconfig -lpixman-1 -lfreetype -lexpat -lbz
</pre>

You will need to have these libraries installed on your system, and
they may already be there. If not, you can easily install them on
a Linux system using something like <a href="http://yum.baseurl.org/">yum</a>
or <a href="http://linux.die.net/man/8/apt-get">apt-get</a>, or
<a href="http://en.opensuse.org/YaST_Software_Management">YaST</a>,
and on a Mac system using <a href="http://www.macports.org/">MacPorts</a>.
<p>

The package(s) to install are "libcairo-devel", "libpixman-devel",
"libfontconfig-devel", etc. It is very likely that once you install
"libcairo-devel", the other packages will get installed automatically,
so check for this before you install all the packages.
<p>


<a name="TroubleShooting6.1.0"></a>
<hr><hr>
<p>
<b>Trouble-shooting potential differences in graphics</b></a>
<p>

Here are some possible situations where you'll notice a different
in your graphics:

<ul>

<li><b>You are suddenly seeing gray-filled land in your map plots.</b><p>

This is because the gsn_csm_xxx_map functions all fill the land in
gray by default. In older (pre V6.1.0) versions of NCL, you had to
have gray in your color map in order to see gray-filled land. This is
no longer the case.
<p>

If you don't want any map land fill, set:

<pre>
  res@mpFillOn = False
</pre>

<li><b>The colors in your plot (especially a filled contour or vector
plot) are different.</b><p>

This could be due to one of two issues:

<ol>

<li>If you are not
calling <a href="Document/Graphics/Interfaces/gsn_define_colormap.html"><strong>gsn_define_colormap</strong></a> to
change the color map, then the issue is likely that the new default
color map is being used. To fix this, you can load the original
default color map with:
<p>

<pre>
  <a href="Document/Graphics/Interfaces/gsn_define_colormap.html"><strong>gsn_define_colormap</strong></a>(wks,"default")
</pre> 

<li>If you are setting your own color map, <i>and</i> you are creating
a filled vector or contour plot, then the change may be due to the
fact that your full colormap is getting spanned. This is because of
the new
resources <a href="Document/Graphics/Resources/cn.html#cnSpanFillPalette"><em>cnSpanFillPalette</em></a>
and <a href="Document/Graphics/Resources/vc.html#vcSpanLevelPalette"><em>vcSpanLevelPalette</em></a>, which
default to True. Try setting the appropriate resource to False:
<p>

<pre>
  res@cnSpanFillPalette = False
  res@vcSpanLevelPalette = False
</pre>

</ol>

<li><b>You are getting helvetica font instead of times-roman font</b><p>

If you really want times-roman font, then create a file called
".hluresfile" in your home directory and add this line to it:
<p>

<pre>
*Font : times-roman
</pre>

You can see a sample file <a href="Document/Graphics/hlures.html">here</a>.
<p>

<li><b>The labelbar labels look different</b>.<p>

This is likely due
to <a href="Document/Graphics/Resources/lb.html#lbLabelAutoStride"><em>lbLabelAutoStride</em></a> now defaulting
to True. If you don't like the result, set this resource to False.

<pre>
  res@lbLabelAutoStride = False
</pre>

<li><b>Skew-T plots have different colors</b>.<p>

This is actually due to a bug fix. The Skew-T code was using named
colors like "PalgeGreen" and "Tan" to draw some features. In older
versions of NCL, if you didn't have these colors in your color map,
then the closest match was used. In 6.1.0 and later, named colors
will now get used, regardless if they are in your color map.
</ul>

<p>

<a name="ESMFRegridding6.1.0"></a>
<hr><hr>
<p>
<b>New regridding capabilities via ESMF software</b></a>
<p>

We have incorporated
the <a href="http://www.earthsystemmodeling.org/">Earth System
Modeling Framework</a> (ESMF) regridding software into NCL. 
This software allows you to regrid 
<a href="Document/glossary.html#RectilinearGrid">rectilinear</a>,
<a href="Document/glossary.html#CurvilinearGrid">curvilinear</a>, and
<a href="Document/glossary.html#UnstructuredGrid">unstructured</a> data,
using three different interpolation methods.
<p>

Visit the <a href="Applications/ESMF.html">ESMF regridding</a>
examples page for details.
<p>

<a name="NewFunctions6.1.0"></a>
<hr><hr>
<p>
<b>New functions</b><p>

<ul>

<li><a href="Document/Functions/Contributed/cd_convert.html"><strong>cd_convert</strong></a> - Converts a
time variable from one set of units to another.
This function is identical to
<a href="Document/Functions/Contributed/ut_convert.html"><strong>ut_convert</strong></a>, except it
uses <a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>
and <a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a> internally.  (Original routine
contributed by Carl Schreck.)
<p>

<li><a href="Document/Functions/User_contributed/cd_string.html"><strong>cd_string</strong></a> - Converts time
values into nicely formatted strings. This function is identical to
<a href="Document/Functions/User_contributed/ut_string.html"><strong>ut_string</strong></a>, except it
uses <a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> internally.  (Original routine
contributed by Carl Schreck and Arindam Chakraborty.)
<p>


<li><a href="Document/Functions/Built-in/depth_to_pres.html"><strong>depth_to_pres</strong></a> - Convert ocean depth to pressure. 
<p>
  
<li><a href="Document/Functions/Contributed/dim_min_n_Wrap.html"><strong>dim_min_n_Wrap</strong></a> / 
<a href="Document/Functions/Contributed/dim_max_n_Wrap.html"><strong>dim_max_n_Wrap</strong></a> - Computes the
minimum/maximum of a variable's given dimensions at all other
dimensions and retains metadata. The <a href="Document/Functions/Built-in/dim_min_n.html"><strong>dim_min_n</strong></a>
/ <a href="Document/Functions/Built-in/dim_max_n.html"><strong>dim_max_n</strong></a> functions have existed since version
5.1.1.<p>

<li><a href="Document/Functions/Built-in/dim_gamfit_n.html"><strong>dim_gamfit_n</strong></a> - Fits data to the two parameter
gamma distribution.
<p>

<li><a href="Document/Functions/Built-in/dim_numrun_n.html"><strong>dim_numrun_n</strong></a> - Counts the number of "runs"
(sequences) within a series containing zeros and ones.
<p>

<li><a href="Document/Functions/Built-in/dim_spi_n.html"><strong>dim_spi_n</strong></a> - Calculate the standardized
precipitation index (SPI).
<p>

<li><a href="Document/Functions/Contributed/dpres_plevel_Wrap.html"><strong>dpres_plevel_Wrap</strong></a>
- Calculates the pressure layer thicknesses of a constant pressure
level coordinate system, and retains metadata. This is identical
to <a href="Document/Functions/Built-in/dpres_plevel.html"><strong>dpres_plevel</strong></a>, except for the metadata retention.
<p>

<li><a href="Document/Functions/Built-in/dtrend_quadratic_msg_n.html"><strong>dtrend_quadratic_msg_n</strong></a> - Estimates and removes
the least squares quadratic trend of the given dimension from all grid
points. Missing values are allowed.  <font color=red>Note: in V6.1.0
there was a bug in which <em>remove_mean</em> was behaving the
opposite of its intended behavior. This will be fixed in
<a href="#6.1.1">V6.1.1</a></font>.

<p>

<li>ESMF functions:

<ul>

<li><a href="Document/Functions/ESMF/curvilinear_to_SCRIP.html"><strong>curvilinear_to_SCRIP</strong></a> - Writes
the description of a curvilinear grid to a SCRIP file.

<li><a href="Document/Functions/ESMF/latlon_to_SCRIP.html"><strong>latlon_to_SCRIP</strong></a> - Writes the
description of a lat/lon grid to a SCRIP file.

<li><a href="Document/Functions/ESMF/rectilinear_to_SCRIP.html"><strong>rectilinear_to_SCRIP</strong></a> - Writes
the description of a rectilinear grid to a SCRIP file.

<li><a href="Document/Functions/ESMF/unstructured_to_ESMF.html"><strong>unstructured_to_ESMF</strong></a> - Writes
the description of an unstructured grid to an ESMF file.

<li><a href="Document/Functions/ESMF/ESMF_regrid.html"><strong>ESMF_regrid</strong></a> -
Regrids data from one grid to another, using ESMF software.

<li><a href="Document/Functions/ESMF/ESMF_regrid_gen_weights.html"><strong>ESMF_regrid_gen_weights</strong></a> -
Writes a weight file using the offline ESMF weight generator.

<li><a href="Document/Functions/ESMF/ESMF_regrid_with_weights.html"><strong>ESMF_regrid_with_weights</strong></a> -
Using the provided weight file, regrids data from one grid to another.

</ul>
<p>

<li><a href="Document/Functions/Built-in/gamma.html"><strong>gamma</strong></a> - Evaluates the complete gamma function.
<p>

<li><a href="Document/Functions/Built-in/get_cpu_time.html"><strong>get_cpu_time</strong></a> - Returns the CPU time used by NCL.
<p>

<li>Functions to use with "groups": <a href="Document/Functions/Built-in/filegrpdef.html"><strong>filegrpdef</strong></a>, 
<a href="Document/Functions/Built-in/getfilegrpnames.html"><strong>getfilegrpnames</strong></a> <p>

<li><a href="Document/Graphics/Interfaces/gsn_add_shapefile_polygons.html"><strong>gsn_add_shapefile_polygons</strong></a> -
Attaches shapefile polygon data to the given plot using randomly
filled polygons.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_shapefile_polylines.html"><strong>gsn_add_shapefile_polylines</strong></a> -
Attaches shapefile polyline or polygon data to the given plot using polylines.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_shapefile_polymarkers.html"><strong>gsn_add_shapefile_polymarkers</strong></a> -
Attaches shapefile point data to the given plot using markers.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_coordinates.html"><strong>gsn_coordinates</strong></a>
- draws or attaches the data coordinate locations on the given plot as
grid lines or markers.
<p>

<li>Functions to use with "List" type: <a href="Document/Functions/Built-in/ListCount.html"><strong>ListCount</strong></a>, 
<a href="Document/Functions/Built-in/ListIndex.html"><strong>ListIndex</strong></a>, <a href="Document/Functions/Built-in/ListPop.html"><strong>ListPop</strong></a>, 
<a href="Document/Functions/Built-in/ListPush.html"><strong>ListPush</strong></a>, <a href="Document/Functions/Built-in/NewList.html"><strong>NewList</strong></a>
<p>

<li><a href="Document/Functions/Built-in/mixed_layer_depth.html"><strong>mixed_layer_depth</strong></a> - calculates a quantity
derived from the Potential Density of significance.

<p>

<li><a href="Document/Functions/Built-in/potmp_insitu_ocn.html"><strong>potmp_insitu_ocn</strong></a> - Calculate seawater potential
temperature at an arbitrary reference pressure given insitu
temperature, salinity and depth.
<p>

<li><a href="Document/Functions/Built-in/print_table.html"><strong>print_table</strong></a> / <a href="Document/Functions/Built-in/write_table.html"><strong>write_table</strong></a> -
Writes all elements in a List to a file or stdout.
<p>

<li><a href="Document/Graphics/Interfaces/read_colormap_file.html"><strong>read_colormap_file</strong></a> - Reads an
NCL system colormap file or a user-defined colormap.
<p>

<li><a href="Document/Functions/Built-in/reshape.html"><strong>reshape</strong></a> - Reshapes a multi-dimensional array to
another multi-dimensional array.
<p>

<li><a href="Document/Functions/Built-in/reshape_ind.html"><strong>reshape_ind</strong></a> - Places values from a smaller
one-dimensional array to a larger one-dimensional array, and reshapes
it.
<p>

<li><a href="Document/Functions/Contributed/rm_single_dims.html"><strong>rm_single_dims</strong></a> - Removes
singleton (degenerate) dimensions from an array while preserving meta
data.
<p>

<li><a href="Document/Functions/Built-in/sparse_matrix_mult.html"><strong>sparse_matrix_mult</strong></a> - Multiples a sparse matrix
with a dense matrix.
<p>

<li><a href="Document/Functions/Built-in/spcorr_n.html"><strong>spcorr_n</strong></a> - Computes Spearman rank order
correlation coefficient across the given dimension.
<p>

<li><a href="Document/Functions/Built-in/str_split_csv.html"><strong>str_split_csv</strong></a> - Splits strings into an array of
strings using the given delimiter (usually a comma ',').
<p>

<li><a href="Document/Functions/Built-in/wgt_area_smooth.html"><strong>wgt_area_smooth</strong></a> - performs a 5-point 2D
area-weighted smoother.
<p>

<li><a href="Document/Functions/Contributed/wind_component.html"><strong>wind_component</strong></a> - Calculate zonal 
and meridional wind components from wind speed and wind direction. 
<p>

<li><a href="Document/Functions/Contributed/wind_direction.html"><strong>wind_direction</strong></a> - Calculate 
meteorological wind direction from zonal and meridional wind components.
<p>

<li><a href="Document/Functions/WRF_arw/wrf_map_resources.html"><strong>wrf_map_resources</strong></a> - sets 
map plotting resources based on an input WRF-ARW file.
<p>

</ul>
<p>

<a name="NewResources6.1.0"></a>
<hr><hr>
<p>
<b>New resources</b><p>

This set of resources were added allowing you to have transparency
in some graphical components:

<ul>
<li><a href="Document/Graphics/Resources/cn.html#cnFillOpacityF"><em>cnFillOpacityF</em></a> - 
sets the opacity of all colors in a contour plot

<li><a href="Document/Graphics/Resources/gs.html#gsFillOpacityF"><em>gsFillOpacityF</em></a> - 
sets opacity for color-filled polygons

<li><a href="Document/Graphics/Resources/gs.html#gsLineOpacityF"><em>gsLineOpacityF</em></a> - 
sets opacity for boundaries of polygons, polylines, etc.</td></tr>

<li><a href="Document/Graphics/Resources/gs.html#gsMarkerOpacityF"><em>gsMarkerOpacityF</em></a> - 
sets opacity for marker-based graphics

<li><a href="Document/Graphics/Resources/st.html#stLineOpacityF"><em>stLineOpacityF</em></a> - 
sets the opacity of all streamlines in a streamline plot

<li><a href="Document/Graphics/Resources/tx.html#txFontOpacityF"><em>txFontOpacityF</em></a> - 
sets opacity for textual graphics

<li><a href="Document/Graphics/Resources/vc.html#vcGlyphOpacityF"><em>vcGlyphOpacityF</em></a> - 
sets the opacity of all vector glyphs in a vector plot

</ul>
<p>

This set of resources allows you to specify color palettes and
behavior for each plot type.<br>
They are are meant to replace the behavior
of <a href="Document/Graphics/Resources/gsn.html#gsnSpreadColors"><em>gsnSpreadColors</em></a>:
<p>

<ul>
<li><a href="Document/Graphics/Resources/cn.html#cnFillPalette"><em>cnFillPalette</em></a> / 
<a href="Document/Graphics/Resources/cn.html#cnSpanFillPalette"><em>cnSpanFillPalette</em></a>
<li><a href="Document/Graphics/Resources/vc.html#vcLevelPalette"><em>vcLevelPalette</em></a> / 
<a href="Document/Graphics/Resources/vc.html#vcSpanLevelPalette"><em>vcSpanLevelPalette</em></a>
<li><a href="Document/Graphics/Resources/st.html#stLevelPalette"><em>stLevelPalette</em></a> /
<a href="Document/Graphics/Resources/st.html#stSpanLevelPalette"><em>stSpanLevelPalette</em></a>
</ul>
<p>

New resources added in <font color=red>6.1.0</font>:<p>

<ul>
<li><a href="Document/Graphics/Resources/mp.html#mpCountyLineColor"><em>mpCountyLineColor</em></a>, 
<a href="Document/Graphics/Resources/mp.html#mpCountyLineDashPattern"><em>mpCountyLineDashPattern</em></a>,
<a href="Document/Graphics/Resources/mp.html#mpCountyLineDashSegLenF"><em>mpCountyLineDashSegLenF</em></a>,
<a href="Document/Graphics/Resources/mp.html#mpCountyLineThicknessF"><em>mpCountyLineThicknessF</em></a>
- new resources that allow you to control the look of U.S. county
lines.
</ul>
<p>

<a name="NewNetCDF4Capabilities6.1.0"></a>
<hr><hr>
<p>
<b>Reading new NetCDF4 features</b><p>
<ul>

<li>NCL uses a different file structure to represent NetCDF4 files at
    the low-level.  When NCL detects a NetCDF4 file, this new file
    structure is activited automatically.
<p>

<li>Starting from 6.1.0, NCL can handle NetCDF4 groups and other data
    types, such as string, vlen, enum, opaque, and compound.
<p>

<li>Example of manipulating a NetCDF4 group:
    <a href="Document/Manuals/Scripts/nc4_group.html">nc4_group.ncl</a>
<p>

<li>Example of reading NetCDF4 strings:
    <a href="Document/Manuals/Scripts/nc4_read_string.html">nc4_read_string.ncl</a>
<p>

<li>Example of reading NetCDF4 enum:
    <a href="Document/Manuals/Scripts/nc4_read_enum.html">nc4_read_enum.ncl</a>
<p>

<li>Example of reading NetCDF4 opaque:
    <a href="Document/Manuals/Scripts/nc4_read_opaque.html">nc4_read_opaque.ncl</a>
<p>

<li>Example of reading NetCDF4 vlen:
    <a href="Document/Manuals/Scripts/nc4_read_vlen.html">nc4_read_vlen.ncl</a>
<p>
<p>

<li>Example of reading NetCDF4 compound:
    <a href="Document/Manuals/Scripts/nc4_read_compound.html">nc4_read_compound.ncl</a>
<p>
</ul>

Note that in V6.1.0, there were some issues reading and writing
NetCDF4 files (not including classic model NetCDF4 files). These were
resolved in <a href="#6.1.1">V6.1.1</a>.
<p>

<a name="NewColorTables6.1.0"></a>
<hr><hr>
<p>
<b>New color tables</b><p>

Matthew Long of NCAR/ASP contributed three new "cmp" color tables,
and several other tables have been added by the NCL team.
<p>

You can download these tables now and use them. Click on the "download
now" link of the desired table, and then go to the "Move file to
appropriate directory" section of the
"<a href="Document/Graphics/create_color_table.html">create
your own color table</a>" page for information on adding this new
table to your current version of NCL.
<p>

<table>
<tr>

<td><a href="Document/Graphics/ColorTables/Images/amwg256.png">amwg256</a><br>(<a href="files/amwg256.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/cmp_b2r.png">cmp_b2r</a><br>(<a href="files/cmp_b2r.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/cmp_flux.png">cmp_flux</a><br>(<a href="files/cmp_flux.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/cmp_haxby.png">cmp_haxby</a><br>nice for topography<br>(<a href="files/cmp_haxby.rgb">download
now</a>)

<tr>
<td><img src="Document/Graphics/ColorTables/Images/amwg256.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/cmp_b2r.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/cmp_flux.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/cmp_haxby.sm.png">

<tr>
<td><a href="Document/Graphics/ColorTables/Images/GHRSST_anomaly.png">GHRSST_anomaly</a><br>nice for topography<br>(<a href="files/GHRSST_anomaly.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/ncl_default.png">ncl_default</a><br>(new default for NCL)<br>(<a href="files/ncl_default.rgb">download now</a>) 
<td><a href="Document/Graphics/ColorTables/Images/seaice_1.png">seaice_1</a><br>(<a href="files/seaice_1.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/seaice_2.png">seaice_2</a><br>(<a href="files/seaice_2.rgb">download
now</a>)

<tr>
<td><img src="Document/Graphics/ColorTables/Images/GHRSST_anomaly.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/ncl_default.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/seaice_1.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/seaice_2.sm.png">

<tr>
<td><a href="Document/Graphics/ColorTables/Images/matlab_hot.png">matlab_hot</a><br>(<a href="files/matlab_hot.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/matlab_hsv.png">matlab_hsv</a><br>(<a href="files/matlab_hsv.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/matlab_jet.png">matlab_jet</a><br>(<a href="files/matlab_jet.rgb">download
now</a>)

<td><a href="Document/Graphics/ColorTables/Images/matlab_lines.png">matlab_lines</a><br>(<a href="files/matlab_lines.rgb">download
now</a>)

<tr>
<td><img src="Document/Graphics/ColorTables/Images/matlab_hot.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/matlab_hsv.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/matlab_jet.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/matlab_lines.sm.png">

</table>

<a name="UpdatedFunctions6.1.0"></a>
<hr><hr>
<p>
<b>Updated functions</b><p>

<ul>

<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> - option=4 will now work with the
various calendars that this function recgonizes.
<p>

<li><a href="Document/Functions/Built-in/day_of_year.html"><strong>day_of_year</strong></a>, <a href="Document/Functions/Built-in/days_in_month.html"><strong>days_in_month</strong></a>,
<a href="Document/Functions/Built-in/isleapyear.html"><strong>isleapyear</strong></a>, <a href="Document/Functions/Built-in/monthday.html"><strong>monthday</strong></a>
- these functions have been upgraded to recognize various calendars,
and missing values.
<p>

<li>All <a href="Document/Graphics/Interfaces/index.html">gsn_xxxx_streamline</a>
routines - some of these functions weren't creating a labelbar
if <a href="Document/Graphics/Resources/st.html#stMonoLineColor"><em>stMonoLineColor</em></a> was set to
False. <a href="Document/Graphics/Resources/gsn.html#gsnSpreadColors"><em>gsnSpreadColors</em></a> is now recognized,
although it's somewhat moot because of the new
<a href="Document/Graphics/Resources/st.html#stSpanLevelPalette"><em>stSpanLevelPalette</em></a> resource.
<p>


<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> / <a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a> -
added recognition of the "none" calendar.
<p>

<li><a href="Document/Functions/Built-in/day_of_week.html"><strong>day_of_week</strong></a>, <a href="Document/Functions/Built-in/day_of_year.html"><strong>day_of_year</strong></a>, <a href="Document/Functions/Built-in/days_in_month.html"><strong>days_in_month</strong></a>,
<a href="Document/Functions/Built-in/isleapyear.html"><strong>isleapyear</strong></a>, <a href="Document/Functions/Built-in/monthday.html"><strong>monthday</strong></a>, <a href="Document/Functions/Built-in/jul2greg.html"><strong>jul2greg</strong></a>, <a href="Document/Functions/Built-in/greg2jul.html"><strong>greg2jul</strong></a> - these were updated to recognize missing values.
<p>

<li><a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a> - updated to do calculations in double
precision, giving it better precision.<p>

<li><a href="Document/Functions/Built-in/regCoef-1.html"><strong>regCoef</strong></a> - now returns the y-intercepts.<p>

<li><a href="Document/Functions/Contributed/short2flt.html"><strong>short2flt</strong></a> - now works with
ushort.<p>

<li><a href="Document/Functions/User_contributed/time_axis_labels.html"><strong>time_axis_labels</strong></a> - Updated
to internally use <a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> instead
of <a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a>.
<p>

<li><a href="Document/Functions/Built-in/wgt_area_smooth.html"><strong>wgt_area_smooth</strong></a>
- A second "opt" argument was added to this function to make it more
general. We generally will not modify a function's argument list after
the function has been released, but since this was only released as
part of a beta version, we made an exception here.
<p>


<li><a href="Document/Functions/Built-in/wrf_cape_2d.html"><strong>wrf_cape_2d</strong></a> / <a href="Document/Functions/Built-in/wrf_cape_3d.html"><strong>wrf_cape_3d</strong></a> /
<a href="Document/Functions/Built-in/rip_cape_2d.html"><strong>rip_cape_2d</strong></a>
/ <a href="Document/Functions/Built-in/rip_cape_3d.html"><strong>rip_cape_3d</strong></a>
these functions used to return -0.1 for "out-of-range" values, but no
missing value ("_FillValue" attribute) was set. In V6.1.0, this value
was replaced with a missing value, and a "_FillValue" attribute is
also set. The <a href="Document/Language/fillval.html">value of the
missing value</a> depends on the type of the return array (float or
double).
<p>


<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a> - added
"sreh", which calculates helicity.
<p>

</ul>
<p>

<a name="UpdatedFonts6.1.0"></a>
<hr><hr>
<p>
<b>Southern hemisphere font symbols added</b><p>

We added southern hemisphere versions of our tropical storm
and hurricane symbols. Thanks to Joan Fernon for bringing
this to our attention.
<p>

See letter "k" in font tables <a href="Document/Graphics/Images/font35.png">35</a>
and <a href="Document/Graphics/Images/font135.png">135</a>, and 
letter "s" in font tables <a href="Document/Graphics/Images/font37.png">37</a>
and <a href="Document/Graphics/Images/font137.png">137</a>.
<p>

You can use these new fonts now with any version of NCL. You may
need to get a system adminstrator to execute some of these steps:
<p>

<ul>
<li>Save the files <a href="files/font35.html">font35.fc</a> and
<a href="files/font37.html">font37.fc</a>.<p>

<li>Generate binary versions of these files with:<p>

<pre>
  fontc font35.fc font35
  fontc font37.fc font37
</pre>

Font tables 135 and 137 don't need to be generated. They get their
information from these two files.<p>

<li>Make copies of your old font35 and font37 files, just in case:<p>

<pre>
cp $NCARG_ROOT/lib/ncarg/fontcaps/font35 $NCARG_ROOT/lib/ncarg/fontcaps/font35.bkup
cp $NCARG_ROOT/lib/ncarg/fontcaps/font37 $NCARG_ROOT/lib/ncarg/fontcaps/font37.bkup
</pre>

<li>Move the files font35 and font37 to $NCARG_ROOT/lib/ncarg/fontcaps:<p>

<pre>
mv font35 font37 $NCARG_ROOT/lib/ncarg/fontcaps/font35 $NCARG_ROOT/lib/ncarg/fontcaps/.
</pre>

<li>To test, run this <a href="files/FontTables.html">FontTables.ncl</a>
script. This will create four X11 windows that you need to click on
to advance to the next one. You should see the new S.H. symbol in all of these.
</ul>
<p>

<a name="GRIBChanges6.1.0"></a>
<hr><hr>
<p>
<b>Changes to GRIB1/GRIB2 reader</b><p>

<ul>
<li>Added support for complex packing in GRIB1. (It's already
available for GRIB2 files.)<P>

<li>GRIB1 changes<p>

Time range indicator 10, which indicates that time parameter P1
occupies 2 bytes, is now treated the same as time range indicator 0
for the purposes of generating the forecast time dimension. This means
that GRIB1 variable names that used to have '_10' appended no longer
will.  And, in a very small number of cases, two forecast time
dimensions may be concatenated into a single dimension that is the
union of the two.

<li>New GRIB2 tables added<p>

Details to be added soon.
</ul>
<p>


<a name="FileIOTools6.1.0"></a>
<hr><hr>
<p>
<b>Improvements and bug fixes to
<a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a>
and <a href="Document/Tools/ncl_filedump.html">ncl_filedump</a></b><p>

<ul>
<li>ncl_convert2nc:
<ul>
<li>wasn't working if the file was not in the current directory

<li>wasn't working if the file didn't have a file extension
(i.e. ".grb")

<li>fixed bug with converting single string variables to netcdf
character variables

<li>wasn't always creating unique names for the temporary NCL script
it creates

<li>will now determine the name for an unlimited time-related
dimension when given the option -u without a name parameter
</ul>

<li>ncl_filedump
<ul>
<li>now works with OPeNDAP files
</ul>
</ul>
<p>

<a name="BugsFixed6.1.0"></a>
<hr><hr>
<p>
<b>Bugs fixed</b><p>

<b>File input/output bugs</b><p>

<ul>

<li>GRIB
<ul>

<li>Fixed problem reading GRIB2 files larger than 2 GB.

<li>Fixed confusion over whether to start from "La1" or "La2"
in a GRIB1 or GRIB2 file.

<li>Fixed a bug when you tried to open a GRIB file that didn't
have a ".grb" extension.

<li>Fixed a GRIB2 bug where if a statistically processed variable had
too many time periods (necessitating division into multiple variables)
it was resulting in an overrun of a while loop and a core
dump.

</ul>

<li>NetCDF4
<ul>
<li>Removed the limit of being able to write only 2048 variables to a
NetCDF file.

<li>Fixed a bug with reading NetCDF4 aggregate coordinate information.

<li>Fixed a bug with using <a href="Document/Functions/Built-in/getvardims.html"><strong>getvardims</strong></a> with a NetCDF
4 file.

<li>Fixed a bug with writing string attributes to a NetCDF 4
file.

<li>Fixed a bug in trying to read hundreds of NetCDF4
files.


</ul>

<li>HDF5
<ul>
<li>Fixed a bug with trying to convert an HDF file with no scientific
datasets.

<li>Fixed a bug in <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> in which it
wouldn't work for HDF5 files if the first argument was a format string
(like "h5"), rather than a file type variable.

</ul>

<li>HDF-EOS
<ul>
<li>Fixed bug with writing NULL-valued attributes to an HDF-EOS2 file.
They will now be assigned a missing value.

<li>Fixed bug in reading ZA data in an HDF-EOS5 file.

<li>Fixed a bug with strings not being read correctly in an HDF-EOS5 file.
</ul>

<li>Miscellaneous
<ul>

<li>Fixed a memory problem when deleting a global attribute from a file.

<li>Fixed a problem with reading files in "cat" mode where
one of the variables doesn't have "true" coordinate arrays.

<li>Fixed a problem with accessing a variable when specifying a single
file in a join type aggregation.

<li>Fix for problems reading files with single dimensions that exceed 2^31. 

<li><a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a> - this function will now read the
last line of a file that doesn't have an "end-of-line" character after
it.

<li>Fixed a bug with attaching attribute information to coordinate
variables.
</ul>

</ul>
<p>

<b>Graphical bugs</b><p>

<ul>

<li>Fixed a problem in the contouring code that was causing some areas
to be left blank if drawing a raster plot using a triangular mesh.

<li>Fixed a contour bug that caused a plot to be blank on
one size of grid boundary.

<li>Fixed an X11 window bug that caused a segmentation fault if you
didn't have authorization to display X
applications.

<li><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_streamline.html"><strong>gsn_csm_pres_hgt_streamline</strong></a> -
fixed a bug in which the pressure values were not converted correctly
for the u/v values, causing the streamlines not to show up.

<li><a href="Document/Graphics/Interfaces/maximize_output.html"><strong>maximize_output</strong></a> - fixed a bug
where it didn't resize properly for "ps" and "pdf" output.

<li>Fixed a bug in which colors in the labelbar and contour plot were
sometimes not matching up. This involved changing the default value
of <a href="Document/Graphics/Resources/cn.html#cnFixFillBleed"><em>cnFixFillBleed</em></a> to True.

<li><a href="Document/Functions/Skewt_func/skewT_BackGround.html"><strong>skewT_BackGround</strong></a> - this
function wasn't displaying the proper colors for the skew-T background
if you didn't already have them in your color map, because it was
using named colors. Now that named colors don't have to be explicitly
added to a color map, you will get the correct ones requested by the
skew-T code ("PaleGreen" background, "tan" lines, etc).

<li>Fixed a problem with drawing dense curly vectors, that would
sometimes cause a little "x" to appear at the end of a
vector.

<li>Fixed a bug where the "degree" symbol in map tickmark labels would
be hollow for subsequent frames.

<li><a href="Document/Graphics/Interfaces/gsn_csm_contour_map.html"><strong>gsn_csm_contour_map</strong></a> (and
other gsn_csm_xxx_map functions) - fixed a bug where the longitude
labels were not correct if mpCenterLonF wasn't set, and the longitude
values were &gt; 180.

<li>Fixed a bug where the X11 window wouldn't display properly on
MacOS 10.8 systems running the new XQuartz server.

<li><a href="Document/Tools/idt.html">idt</a> - fixed a failure
under MacOS 10.7.

<li><a href="Document/Functions/Built-in/NhlNewDashPattern.html"><strong>NhlNewDashPattern</strong></a>
and <a href="Document/Functions/Built-in/NhlNewMarker.html"><strong>NhlNewMarker</strong></a> - we believe we've fixed the
infamous bug in which these two functions would fail sporadically on
Linux systems.

</ul>
<p>

<b>Analysis function bugs</b><p>

<ul>

<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> - was returning strange
values if a bad "unit" was given. It now returns all missing
values.

<li><a href="Document/Functions/Built-in/dim_num_n.html"><strong>dim_num_n</strong></a> - fixed a bug in the prototyping
of this function.

<li><a href="Document/Functions/Built-in/dpres_hybrid_ccm.html"><strong>dpres_hybrid_ccm</strong></a> - fixed a memory issue that
sometimes caused a segmentation fault.

<li><a href="Document/Functions/Built-in/min.html"><strong>min</strong></a> and <a href="Document/Functions/Built-in/max.html"><strong>max</strong></a> - now returns
the missing value of the input if input is all missing, rather than
the missing value of the type of the input.

<li><a href="Document/Functions/Built-in/reg_multlin.html"><strong>reg_multlin</strong></a> - fixed a memory leak.

<li><a href="Document/Functions/Built-in/str_match.html"><strong>str_match</strong></a>  - didn't allow you
to input an empty string as a delimiter.

<li><a href="Document/Functions/Built-in/triple2grid.html"><strong>triple2grid</strong></a> - sometimes had a problem if "opt"
was set to False.

<li><a href="Document/Functions/WRF_arw/index.html">WRFUserARW.ncl</a>
- fixed a bug in calculating the cone factor.

<li><a href="Document/Functions/Built-in/gc_tarea.html"><strong>gc_tarea</strong></a> / <a href="Document/Functions/Built-in/gc_qarea.html"><strong>gc_qarea</strong></a> - these 
functions will now return a missing value if invalid lat/lon coordinates
are given.

<li><a href="Document/Functions/Built-in/str_capital.html"><strong>str_capital</strong></a> - wasn't correctly capitalizing
strings in all cases. Also fixed a bug where it was modifying its
input string.

</ul>
<p>

<b>ESMF regridding bugs</b>
<ul>

<li>Fixed a bug where if the "conserve" method was being used, the
grid corners were not checked for out-of-range values. It is still
highly recommended to input your own grid corners, rather than letting
NCL guess at them.

<li>Fixed bug with the "CopyVarCoords" attribute. Not all coordinate
variables were being copied over.

</ul>
<p>

<b>"List" bugs</b><p>

<ul>
<li><a href="Document/Functions/Built-in/NewList.html"><strong>NewList</strong></a> - wasn't letting you create a "cat"
list directly.

<li>Fixed a bug making a copy of a List variable.

<li>Fixed a bug where you couldn't delete attributes in a
List.

</ul>
<p>

<b>Miscellaneous bugs</b><p>

<ul>

<li><a href="Document/Functions/Built-in/systemfunc.html"><strong>systemfunc</strong></a> - now returns a string missing value
if there is no valid return information.

<li>Fixed bug with assigning logicals when a variable appeared on
both sides of the "=" sign.

</ul>
<p>

<a name="KnownIssues6.1.0"></a>
<hr><hr>
<p>
<b>Known issues with version 6.1.0</b><p>

<b>Some of these issues have been fixed in <a href="#6.1.1">V6.1.1</a>.
<p>

<ul>

<li>There are some problems users have found when writing NetCDF4 files.

<ol>
<li>Writing a (undefined) variable directly to file
<li>Writing a scalar to a file
<li>Printing a variable's attribute when it is double
<li>Adding global attributes to an existing file
<li>If two files are opened, where the first one is NetCDF3, and
second one is NetCDF4, then there is problem to operate on the first
file.
<p>

One way to work around this problem is to run ncl with "-f" option,
e.g. run "ncl -f your-script".

</ol>
<p>

<li>There's a bug in the $NCARG/ni/src/ncl/yMakefile file that will
only cause a problem if you try to build NCL with GDAL support turned
off. To fix this, download
this <a href="Download/files/yMakefile.ncl.html">yMakefile.ncl.fix</a>
file, rename it to "yMakefile", and put it in the $NCARG/ni/src/ncl
directory before you start the build.
<p>

This will be fixed in <a href="#6.1.1">V6.1.1</a>.<p>

<li>There is a bug in Apple's new XQuartz windowing system that causes
NCL's cairo X11 window to not work properly on Mac systems running
MacOS 10.8 or later, or on Macs that have been upgraded to use Xquartz
2.7.x as the default X11 window system.
<p>

If you believe you've run into this bug with our precompiled binary,
then you can try "ncl.xq.fix" to see if this fixes the issue. Just use
this executable in place of "ncl":
<p>

<pre>
  ncl.xq.fix myscript.ncl
</pre>

If this seems to fix the problem, then you can make this your default "ncl":
<p>

<pre>
  mv $NCARG_ROOT/bin/ncl $NCARG_ROOT/bin/ncl.bug
  mv $NCARG_ROOT/bin/ncl.xq.fix $NCARG_ROOT/bin/ncl
</pre>

<li>If you have an NCL script that calls ImageMagick's "convert" utility
to convert from a PS/PDF file to another format, then you need to make
sure you delete the workstation before you call convert:
<p>

<pre>
   delete(wks)
   system( "convert -trim file.ps file.gif")
</pre>
<p>

This ensures that the "file.ps" file is properly closed before you 
convert it. In versions 6.0.0 and earlier, this wasn't required,
but it was always recommended. It is now required for V6.1.0.
<p>

<li>PS files are quite a bit larger than they were in V6.0.0 and
earlier. PDF files are smaller.
<p>


<li><a href="Document/Functions/Built-in/dtrend_quadratic_msg_n.html"><strong>dtrend_quadratic_msg_n</strong></a> - the "remove_mean"
input parameter is behaving the opposite of what the
documentation states. This will be fixed in <a href="#6.1.1">V6.1.1</a>.
<p>

<li>The <a href="Document/Graphics/Resources/lg.html#lgItemOrder"><em>lgItemOrder</em></a> resource doesn't
work correctly with <a href="Document/Graphics/Interfaces/gsn_legend_ndc.html"><strong>gsn_legend_ndc</strong></a>.
<p>

<li>There is a bug in HDF-EOS5, which cause NCL segmentation fault.
The problem is that HDF-EOS5 can not read attribute if it has more than
one element, such as this file: OMI-Aura_L3-OMLER_2005m01-2009m12_v003-2010m0503t063707.he5.
The work around is try to read it as HDF5 file.
<p>

</ul>

<hr><hr>
<A NAME="6.1.0-beta"></A>
<h2>Version 6.1.0-beta</h2>
<h3>May 28, 2012</h3><p>

This was a test release for the official <a href="#6.1.0">6.1.0 release</a>.<p>

<hr><hr>
<A NAME="6.0.0"></A>
<h2>Version 6.0.0</h2>
<h3>30 May 2011</h3><p>

<ul>
<li><a href="#2GBVariables6.0.0">Variables greater than or equal to 2 gigabytes
(GB) in size are now allowed</a>
<li><a href="#WRAPITcode6.0.0">Important note about *.so files generated by WRAPIT</a>
<li><a href="#MissingValueChange6.0.0">Change to default missing values</a>
<li><a href="#MissingValueChangeGotchas6.0.0">Possible "gotchas" in
default missing value change</a>
<li><a href="#ByteCharacterChange6.0.0">Change to byte and character types,
new unsigned byte type added</a>
<li><a href="#NewFunctions6.0.0">New functions</a>
<li><a href="#UpdatedFunctions6.0.0">Updated functions</a>
<li><a href="#DeletingMultipleVars6.0.0">Deleting multiple variables</a>
<li><a href="#KeywordsAdded6.0.0">Keywords added</a>
<li><a href="#NewColorTables6.0.0">New color tables</a>
<li><a href="#NewResources6.0.0">New graphical resources</a>
<li><a href="#PNGFileNames6.0.0">Change to naming of PNG files</a>
<li><a href="#BugsFixed6.0.0">Bugs fixed</a>
</ul>
<p>

<a name="2GBVariables6.0.0"></a>
<hr>
<p>
<b>Variables greater than or equal to 2 gigabytes (GB) in size are allowed</b><p>
Prior to version 6.x, NCL variables could not be greater than or equal
to 2 GB in size. This restriction has been removed on 64-bit systems
(the restriction remains for 32-bit systems).
<p>

Also with this upgrade, dimension sizes will be of type "long" on
64-bit systems if any dimension size is >= 2 GB.
<p>

<a name="WRAPITcode6.0.0"></a>
<a name="MissingValueChange6.0.0"></a>
<hr>
<p>
<b>Important note about *.so files generated by WRAPIT</b>
<p>

In this release, you will need to regenerate any *.so files generated
by older versions of WRAPIT, as these old files will not be compatible
with the new NCL software.
<p>

If you try to use the old files with the new NCL, you will
get a fatal message that looks like this:
<p>

<pre>
fatal:Number of elements of dimension (0) of argument (0) is (1) in 
      function (stuff), expected (4582672464) elements
</pre>

<p>

<a name="MissingValueChange6.0.0"></a>
<hr>
<p>
<b>Change to default missing values</b><p>

The default missing values for all numeric variable types has been changed.
For full information on this, see the 
"<a href="Document/Manuals/Ref_Manual/NclDataTypes.html">data types</a>"
section in the NCL Reference Manual.
<p>

This is in line with the default missing values for NetCDF, and some
of the old default values were too small to be safely out of the range
of potential calculations.
<p>

Here's a table of the old and new missing values:<p>

<table cellpadding=5 border=1>
<tr>
<th>Variable type <th>Old missing value <th>New missing value
<tr>
<td>byte*    <td align="right">0xff      <td align="right">-127

<tr>
<td>ubyte    <td align="right">--    <td align="right">255

<tr>
<td>short     <td align="right">-99     <td align="right">-32767

<tr>
<td>ushort    <td align="right">0    <td align="right">65535

<tr>
<td>integer   <td align="right">-999   <td align="right">-2147483647

<tr>
<td>uint      <td align="right">0      <td align="right">4294967295

<tr>
<td>long      <td align="right">-9999  <td align="right">-2147483647

<tr>
<td>ulong  <td align="right">0  <td align="right">4294967295

<tr>
<td>int64  <td align="right">-99999999  <td align="right">-9223372036854775806

<tr>
<td>uint64  <td align="right">0  <td align="right">18446744073709551614

<tr>
<td>float     <td align="right">-999     <td align="right">9.96921e+36

<tr>
<td>double    <td align="right">-9999    <td align="right">9.969209968386869e+36

<tr>
<td>character* <td align="right">0 <td align="right">0x00
</table>
<p>

<blockquote>

* The missing values for bytes and characters are rather
different. This is because an NCL byte is now a signed byte (it was
unsigned before), and an NCL character is now an unsigned byte (it was
signed before). This change keeps us in line with the definition of a
NetCDF byte and character.

</blockquote>
<p>

<a name="MissingValueChangeGotchas6.0.0"></a>
<hr>
<p>
<b>Possible "gotchas" in default missing value change</b><p>

The default missing value change could cause some backwards
incompatibility in your NCL scripts. Here are some "gotchas" to look
for and correct:
<p>

<ul>
<li><b>Do not use hard-coded values to check if your data contains
any missing values.</b>
<p>

For example, if you have a float variable "x" that was assigned a
default missing value of -999 via some other calculation, *and* you
have code like this:
<p>

<pre>
    if(x(i).eq.-999)) then
      ...do something...
</pre>
<p>
   
then your code may no longer work in V6.0.0.  You should instead use
functions like <a href="Document/Functions/Built-in/ismissing.html"><strong>ismissing</strong></a> to check for missing
values:
<p>

<pre>
    if(<a href="Document/Functions/Built-in/ismissing.html"><strong>ismissing</strong></a>(x(i))) then
      ...do something...
</pre>
<p>

<li><b>Be careful with checking for missing data by assuming it is
less than zero.</b>
<p>

If you have data that is supposed to always be positive, and you check
for missing values by assuming the default value is less than zero,
then this may no longer work in V6.0.0. For example, the default
missing values for floats and doubles were negative in V5.x, and are
now positive in V6.x.
<p>

<li><b>Be careful with sorting data that may contain default
missing values.</b>
<p>

Functions like <a href="Document/Functions/Built-in/qsort.html"><strong>qsort</strong></a>
and <a href="Document/Functions/Built-in/dim_pqsort.html"><strong>dim_pqsort</strong></a> sort missing values like regular
values. In V6.x, the default float and double missing values are now
positive, so they will be sorted differently than in V5.x where they
were negative.
<p>

<li><b>Set the "_FillValue" attribute if you are reading ASCII data.</b>
<p>

If you are reading data from an ASCII file that potentially contains
missing values, and if these missing values are equal to the *old* default
values, then you may need to set the _FillValue attribute explicitly after
reading the data in.</b>
<p>

Functions like <a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a> and
<a href="Document/Functions/Contributed/readAsciiTable.html"><strong>readAsciiTable</strong></a> automatically
assign a _FillValue attribute based on the type of the variable you're
reading in.  If you are assuming that the default missing value is
-999 for floats, say, then your code will not work properly.
<p>

For example, if you have an ASCII file with float values, and you have
"-999" in the file to represent missing values, then you will need to
explicitly set the _FillValue attribute to -999 after you read it in,
because now the default missing value for a float will be "9.96921e+36":
<p>

<pre>
   data = <a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a>("file.txt",-1,"float")
   data@_FillValue = -999
</pre>
<p>

</ul>
<p>

We have provided two ways to get at the old default missing values if
you are not ready to change your code. The first way is
via a procedure call:
<p>

<pre>
  <a href="Document/Functions/Built-in/set_default_fillvalue.html"><strong>set_default_fillvalue</strong></a>("all","ncl_v5")
</pre>
<p>

The second way is via a command line option when you run NCL.
<p>

<a name="ByteCharacterChange6.0.0"></a>
<hr>
<p>
<b>Change to byte and character types</b><p>

In NCL versions 5.x and earlier, an NCL byte was unsigned, and an NCL
character was signed. To make things more consistent, and to stay in
line with bytes and characters in NetCDF, these two types have
switched meaning: an NCL byte is now signed and an NCL character is
unsigned.
<p>

We've introduced a new type---"ubyte" (unsigned byte)---if you need
the functionality of the old-style NCL byte.
<p>

For more information about NCL data types, see the 
"<a href="Document/Manuals/Ref_Manual/NclDataTypes.html">data types</a>"
section in the NCL Reference Manual.
<p>

<a name="NewFunctions6.0.0"></a>
<hr>
<p>
<b>New functions</b><p>

<ul>
  
<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> (V6.0.0) - converts a mixed
Julian/Gregorian date to a UT-referenced date. This is a replacement
for <a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a>
<p>

<li><a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a> (V6.0.0) - converts a
UT-referenced date to a mixed Julian/Gregorian date.  This is a
replacement for <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_blank_plot.html"><strong>gsn_csm_blank_plot</strong></a> (V6.0.0-beta)
- creates a "blank" plot with tickmarks pointing outward.
<p>

<li><a href="Document/Functions/Built-in/isubyte.html"><strong>isubyte</strong></a> (V6.0.0-beta) - returns True if the
input is an unsigned byte.
<p>

<li><a href="Document/Functions/Built-in/isunsigned.html"><strong>isunsigned</strong></a> (V6.0.0-beta) - returns True if the
input is any of the unsigned types (ubyte, ushort, uint, ulong,
uint64).
<p>
 
<li><a href="Document/Functions/Built-in/default_fillvalue.html"><strong>default_fillvalue</strong></a> (V6.0.0-beta) - returns the
default missing value for the given variable type.
<p>

<li><a href="Document/Graphics/Interfaces/namedcolor2rgb.html"><strong>namedcolor2rgb</strong></a> (V6.0.0-beta) -
Returns the RGB triplets of the given list of named colors.
<p>

<li><a href="Document/Functions/Contributed/remap_elements.html"><strong>remap_elements</strong></a> (V6.0.0) -
Remaps values on one grid to a rectilinear latitude-longitude grid.
<p>

<li><a href="Document/Functions/Built-in/set_default_fillvalue.html"><strong>set_default_fillvalue</strong></a> (V6.0.0-beta) - allows you
to change the default missing value for a particular variable type, or
change all the default missing values to the same values that were
used in NCL version 5.x.
<p>

<li><a href="Document/Functions/Built-in/show_ascii.html"><strong>show_ascii</strong></a> (V6.0.0) - prints the ASCII table to
the screen.
<p>

<li><a href="Document/Graphics/Interfaces/span_named_colors.html"><strong>span_named_colors</strong></a> (V6.0.0-beta) -
Creates an RGB array that is a span between given list of named
colors.
<p>

<li><a href="Document/Functions/Built-in/str_match_ic.html"><strong>str_match_ic</strong></a> (V6.0.0) - returns a
list of strings that contain the given substring (case
insensitive).<p>

<li><a href="Document/Functions/Built-in/str_match_ind.html"><strong>str_match_ind</strong></a> (V6.0.0) - returns the indexes
into a list of strings that contain the given substring (case
sensitive).<p>

<li><a href="Document/Functions/Built-in/str_match_ind_ic.html"><strong>str_match_ind_ic</strong></a> (V6.0.0) - returns the indexes
into a list of strings that contain the given substring (case
insensitive).<p>

<li><a href="Document/Functions/Built-in/str_split_by_length.html"><strong>str_split_by_length</strong></a> (V6.0.0-beta) - splits
strings given a scalar length or array of lengths.
<p>
  
<li><a href="Document/Functions/Built-in/toubyte.html"><strong>toubyte</strong></a> (V6.0.0-beta) - converts input to an
unsigned byte.
<p>

</ul>
<p>

<a name="UpdatedFunctions6.0.0"></a>
<hr>
<p>
<b>Updated functions</b><p>

<ul>

<li>Numerous functions have been upgraded to allow dimension sizes and
index values to be integers or longs. On a 64-bit system, dimension
sizes of type long allows you to have variables >= 2 GB.
<p>

Here is a list of functions that have been upgraded to allow for long
input and/or output. Not all updated functions are listed here; just
the most widely-used ones:
<p>

<ul>

<li><a href="Document/Functions/Built-in/conform_dims.html"><strong>conform_dims</strong></a> (V6.0.0-beta) - the first argument
can be a long.
<p>

<li><a href="Document/Functions/Built-in/dim_gbits.html"><strong>dim_gbits</strong></a>, <a href="Document/Functions/Built-in/getbitsone.html"><strong>getbitsone</strong></a>
(V6.0.0-beta) - now accepts int8, uint8, and ushort input.
<p>

<li><a href="Document/Functions/Built-in/dimsizes.html"><strong>dimsizes</strong></a> (V6.0.0-beta) - longs will be returned
if you're on a 64-bit machine and the product of your dimension sizes
is >= 2 GB.
<p>

<li><a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a> (V6.0.0-beta) - the third argument can be
a long.
<p>

<li><a href="Document/Functions/Built-in/ind.html"><strong>ind</strong></a>, <a href="Document/Functions/Built-in/minind.html"><strong>minind</strong></a>,
<a href="Document/Functions/Built-in/maxind.html"><strong>maxind</strong></a> (V6.0.0-beta) - these functions will return
longs if you're on a 64-bit system and any of the index values are >=
2 GB.
<p>

<li><a href="Document/Functions/Built-in/ind_resolve.html"><strong>ind_resolve</strong></a> (V6.0.0-beta) - longs will be
returned if any of the index values are >= 2 GB. Also, the input can
now be integer or long.
<p>

<li><a href="Document/Functions/Built-in/ispan.html"><strong>ispan</strong></a> (V6.0.0-beta) - any of the input can be of
type int, long, or int64.  Also, the return type can be int, long, or
int64, depending on the input types.
<p>

<li><a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> (V6.0.0-beta) - the input dimension sizes
can be longs.
<p>

<li><a href="Document/Functions/Built-in/num.html"><strong>num</strong></a> (V6.0.0-beta) - a long will be returned if
you're on a 64-bit system and the count is >= 2 GB.
<p>

<li><a href="Document/Functions/Built-in/onedtond.html"><strong>onedtond</strong></a> (V6.0.0-beta) - the second
argument can be longs.
<p>

<li><a href="Document/Functions/Built-in/sizeof.html"><strong>sizeof</strong></a> (V6.0.0-beta) - the size returned will be
a long if you're on a 64-bit machine and the size is >= 2 GB.
<p>
</ul>

<li><a href="Document/Functions/Built-in/rcm2points.html"><strong>rcm2points</strong></a> / 
<a href="Document/Functions/Contributed/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a> (V6.0.0) - the
simple search algorithm used by these functions is not capable of
handling all cases. The result is that, sometimes, there are
non-interpolated points in the initial interpolation pass. Beginning
with V6.0.0: any interior points not interpolated in the initial
interpolation pass will be filled by searching all points and using an
inverse distance squared algorithm.
<p>

<li><a href="Document/Functions/Built-in/rcm2rgrid.html"><strong>rcm2rgrid</strong></a> / 
<a href="Document/Functions/Contributed/rcm2rgrid_Wrap.html"><strong>rcm2rgrid_Wrap</strong></a> (V6.0.0) - the
simple search algorithm used by these functions is not capable of
handling all cases. The result is that, sometimes, there are small
gaps in the interpolated grids. Beginning with V6.0.0: any interior
points not interpolated in the initial interpolation pass will be
filled using linear interpolation. In some cases, edge points may not
be filled.
<p>

<li><a href="Document/Functions/Built-in/wrf_interp_3d_z.html"><strong>wrf_interp_3d_z</strong></a>,
<a href="Document/Functions/WRF_arw/wrf_user_intrp3d.html"><strong>wrf_user_intrp3d</strong></a> (V6.0.0-beta) -
the missing value was changed from -999999 to the new default missing
value for a float/double (9.96921e+36).
<p>

<li><a href="Document/Functions/WRF_arw/wrf_user_list_times.html"><strong>wrf_user_list_times</strong></a>,
<a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a>,
<a href="Document/Functions/WRF_arw/wrf_user_ij_to_ll.html"><strong>wrf_user_ij_to_ll</strong></a>,
<a href="Document/Functions/WRF_arw/wrf_user_ll_to_ij.html"><strong>wrf_user_ll_to_ij</strong></a> (V6.0.0) - these
functions have been updated to allow the first argument to be either a
file opened with <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>, or a list of files opened
with <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>.
<p>
</ul>

<p>

<a name="DeletingMultipleVars6.0.0"></a>
<hr>
<p>
<b>Deleting multiple variables</b><p>

<font color=red><b>In alpha test mode</b></font>: you can now use
<a href="Document/Functions/Built-in/delete.html"><strong>delete</strong></a> to delete multiple variables of mixed types
and sizes. Use the special syntax "[/" and "/]" around
the variables you want to delete:
<p>

<pre>
  lat  = <a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a>(-90,90,64)
  lon  = <a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a>(-180,180,128)
  data = <a href="Document/Functions/Built-in/random_uniform.html"><strong>random_uniform</strong></a>(-10,10,(/10,20,30/))
  varnames = (/"T","P","U","V"/)    ; 1D string array
  . . .
  <a href="Document/Functions/Built-in/delete.html"><strong>delete</strong></a>([/data,varnames,lat,lon/])

  print(lon(0))    ; This will produce an error that "lon" is undefined
</pre>
<p>



<a name="KeywordsAdded6.0.0"></a>
<hr>
<p>
<b>Keywords added</b><p>
<ul>
<li>enumeric
<li>group
<li>int64
<li>snumeric
<li>ubyte
<li>uint
<li>uint64
<li>ulong
<li>ushort 
<li>Missing
</ul>
<p>

<a name="NewColorTables6.0.0"></a>
<hr>
<p>
<b>New color tables</b><p>

Emilie Vanvyve of NCAR/RAL contributed eight new color tables. You can
download these tables now and use them. Click on the "download now"
link of the desired table, and then go to the "Move file to
appropriate directory" section of the
"<a href="Document/Graphics/create_color_table.html">create
your own color table</a>" page for information on adding this new
table to your current version of NCL.

<p>

<table>
<tr>
<td><a href="Document/Graphics/ColorTables/Images/BlueWhiteOrangeRed.png">BlueWhiteOrangeRed</a><br>(<a href="files/BlueWhiteOrangeRed.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/BlueYellowRed.png">BlueYellowRed</a><br>(<a href="files/BlueYellowRed.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/GrayWhiteGray.png">GrayWhiteGray</a><br>(<a href="files/GrayWhiteGray.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/OceanLakeLandSnow.png">OceanLakeLandSnow</a><br>(<a href="files/OceanLakeLandSnow.rgb">download now</a>)

<tr>
<td><img src="Document/Graphics/ColorTables/Images/BlueWhiteOrangeRed.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/BlueYellowRed.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/GrayWhiteGray.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/OceanLakeLandSnow.sm.png">

<tr>
<td><a href="Document/Graphics/ColorTables/Images/WhiteBlue.png">WhiteBlue</a><br>(<a href="files/WhiteBlue.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/WhiteBlueGreenYellowRed.png">WhiteBlueGreenYellowRed</a><br>(<a href="files/WhiteBlueGreenYellowRed.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/WhiteGreen.png">WhiteGreen</a><br>(<a href="files/WhiteGreen.rgb">download now</a>)
<td><a href="Document/Graphics/ColorTables/Images/WhiteYellowOrangeRed.png">WhiteYellowOrangeRed</a><br>(<a href="files/WhiteYellowOrangeRed.rgb">download now</a>)
<tr>
<td><img src="Document/Graphics/ColorTables/Images/WhiteBlue.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/WhiteBlueGreenYellowRed.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/WhiteGreen.sm.png">
<td><img src="Document/Graphics/ColorTables/Images/WhiteYellowOrangeRed.sm.png">

</table>
<p>

There are now
<a href="Document/Graphics/color_table_gallery.html">101 color tables</a>
available.
<p>


<a name="NewResources6.0.0"></a>
<hr>
<p>
<b>New graphical resources</b><p>

<dl>
<dt><a href="Document/Graphics/Resources/cn.html#cnGridBoundFillColor"><em>cnGridBoundFillColor</em></a>
<dd>
This resource sets the color to use for filling areas outside the 
boundaries of the data grid, but within the viewport and the projectable areas of the underlying map, if any.

<dt><a href="Document/Graphics/Resources/cn.html#cnGridBoundFillPattern"><em>cnGridBoundFillPattern</em></a>
<dd>
This resource sets the <a href="Document/Graphics/fill_patterns.html">fill pattern</a>
index used to fill areas outside the boundaries of the data grid, but
within the viewport and the projectable areas of the underlying map,
if any. 

<dt><a href="Document/Graphics/Resources/cn.html#cnGridBoundFillScaleF"><em>cnGridBoundFillScaleF</em></a>
<dd>

This resource controls the scaling of
the pattern used for areas outside the boundaries of the data grid, but within the viewport and the 
projectable areas of the underlying map, if any.

<dt><a href="Document/Graphics/Resources/cn.html#cnOutOfRangeFillColor"><em>cnOutOfRangeFillColor</em></a>
<dd>
This resource sets the color to use for filling areas within the viewport but outside the projectable 
area of the underlying map, if any.

<dt><a href="Document/Graphics/Resources/cn.html#cnOutOfRangeFillPattern"><em>cnOutOfRangeFillPattern</em></a>
<dd>

This resource sets the <a href="Document/Graphics/fill_patterns.html">fill pattern</a>
index used to fill  areas within the viewport but outside the projectable 
area of the underlying map, if any.

<dt><a href="Document/Graphics/Resources/cn.html#cnOutOfRangeFillScaleF"><em>cnOutOfRangeFillScaleF</em></a>
<dd>

This resource controls the scaling of
the pattern used for areas within the viewport but outside the projectable 
area of the underlying map, if any.

</dl><p>

Also, the default values of
<a href="Document/Graphics/Resources/cn.html#cnMissingValFillColor"><em>cnMissingValFillColor</em></a>
and <a href="Document/Graphics/Resources/cn.html#cnMissingValFillPattern"><em>cnMissingValFillPattern</em></a> have
changed: <a href="Document/Graphics/Resources/cn.html#cnMissingValFillColor"><em>cnMissingValFillColor</em></a>
formerly defaulted to <code>Background</code>
and <a href="Document/Graphics/Resources/cn.html#cnMissingValFillPattern"><em>cnMissingValFillPattern</em></a>
defaulted to <code>HollowFill</code>. Now the defaults have
respectively changed to <code>Transparent</code>
and <code>SolidFill</code>. Since the effect is the same in either
case, this change is not anticipated to affect very many existing
scripts. The change was made to simplify the interactions between
these resources and the above newly added resources. One advantage of
this change is that, assuming contour fill is enabled, you can get
visible fill of the missing value areas by modifying only one resource
instead of two.

<p>

<a name="PNGFileNames6.0.0"></a>
<hr>
<p>
<b>Change to naming of PNG files</b><p>

The PNG file format does not support multiple images per file. In NCL
5.2.x and earlier, multiple plots written to a PNG workstation
resulted correspondingly in multiple files, named with a 6-digit
sequence number appended to the user-specified filename
(<i>file</i>.000001.png, <i>file</i>.000002.png, etc). In cases where
only one plot is generated, this behavior was unnecessary and deemed
undesirable by a number of users.
<p>

With NCL 6.0.0, no sequence number is appended when only a single plot
is generated (<i>file</i>.png). As before, when multiple plots are
written, sequence numbers are appended to all filenames, including the
first for consistency.
<p>

<a name="BugsFixed6.0.0"></a>
<hr>
<p>
<b>Bugs fixed</b><p>

<ul>

<li>(In version 6.0.0-beta only) If you use a "/" in conjunction with
reading a variable off a file:
<p>

<pre>
  a   = addfile("atmos.nc","r")
  lev = a->lev/100
</pre>
<p>
  
You will get an unexpected syntax error:

<pre>
fatal:Either file (a) isn't defined or variable (lev/100) is not a
variable in the file
</pre>
<p>

This is an error due to the implementation of reading "groups" in
HDF5, which can be accessed with a "/". NCL thinks you are trying to
access a group called "lev/100", rather than trying to divide the "lev"
values by 100.
<p>


<li>In the process of testing NCL 6.0.0, we ran a number of memory 
debugging codes (<a href="http://valgrind.org/">valgrind</a>,
<a href="http://en.wikipedia.org/wiki/IBM_Rational_Purify">purify</a>)
and fixed many memory leaks.
<p>


<li>Fixed a bug in which the NCL polygon code was not being handled
correctly on spherical surfaces, potentially causing the fill to
"bleed".<p>

<li>Fixed a bug with the "record"/"stop" commands that caused them to
abort and produce a bunch of errors on a Linux system.
<p>

<li>Fixed a bug
with <a href="Document/Tools/ncl_filedump.html">ncl_filedump</a> not
working on 2D character arrays or improperly deleting a local variable
if a string variable was being processd.
<p>

<li>Fixed some GRIB bugs:
<p>

<ul>
<li>GRIB user-defined parameter table wasn't read correctly when
there was an entry for parameter 0.
<li>GRIB grid 242 didn't have the correct values for Dx and Dy.
</ul>
<p> 

<li>Fixed a bug with drawing triangular mesh contours to the full
viewport.<p>

<li>Fixed a bus error caused by initializing an NCL variable with an
invalid value.
<p>

<li>Fixed a bug with logical values not being converted to strings
correctly if set to the default missing value.
<p>

<li>Fixed a bug in which if NCL_DEF_SCRIPTS_DIR environment variable
was set, NCL scripts were not loaded in a predictable order.  Scripts
are now loaded in ascii case-sensitive order (numbers before letters,
upper case before lower case). Files that do not end with '.ncl' are
simply ignored.
<p>


<li><a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a> - fixed inconsistent behavior where
this function was setting a missing value if the dimensions were
explictly set, and not if the dimensions were specified with
"-1". Note that now that the default missing values have been changed,
you will see the new default missing values returned for this
function.
<p>

<li><a href="Document/Functions/Contributed/genNormalDist.html"><strong>genNormalDist</strong></a> - this
function was calculating PI incorrectly.
<p>

<li><a href="Document/Functions/Built-in/getfiledimsizes.html"><strong>getfiledimsizes</strong></a> - this function was
incorrectly returning longs if the individual dimension sizes
were less than 2 GB.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_vector.html"><strong>gsn_csm_pres_hgt_vector</strong></a> - the vector
array needs to have pressure values in "mb", so added a check for this.
<p>

<li><a href="Document/Functions/Built-in/obj_anal_ic.html"><strong>obj_anal_ic</strong></a> - this routine had a bug if
the input arrays had different missing values.
<p>

<li><a href="Document/Functions/Built-in/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a> / 
<a href="Document/Functions/Contributed/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a> - details soon
<p>

<li><a href="Document/Functions/Contributed/rcm2rgrid_Wrap.html"><strong>rcm2rgrid_Wrap</strong></a> - fixed a
serious bug in which the lat/lon input and output arrays were swapped.
<a href="Document/Functions/Built-in/rcm2rgrid.html"><strong>rcm2rgrid</strong></a> did not have this bug.
<p>

<li><a href="Document/Functions/Built-in/str_match.html"><strong>str_match</strong></a> - this function was
case <i>insensitive</i> and it should have been
case <i>sensitive</i>. Use the new <a href="Document/Functions/Built-in/str_match_ic.html"><strong>str_match_ic</strong></a>
if you need case-insensitivity matching.
<p>

<li><a href="Document/Functions/Built-in/str_split.html"><strong>str_split</strong></a> - this function was freeing
non-allocated memory.

<li><a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a>
/ <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a> - there are a number of bugs in
these functions, due to the underlying code in UDUNITS2 not being
supported anymore. Use the new functions
<a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a> / <a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a> instead.
<p>

</ul>
<hr>
<p>

<a name="WhatsNew6.0.0"></a>
<b>What's new/updated since 6.0.0-beta</b><p>

New functions:
<p>

<ul>
<li><a href="Document/Functions/Built-in/cd_calendar.html"><strong>cd_calendar</strong></a>
<li><a href="Document/Functions/Built-in/cd_inv_calendar.html"><strong>cd_inv_calendar</strong></a>
<li><a href="Document/Functions/Contributed/remap_elements.html"><strong>remap_elements</strong></a>
<li><a href="Document/Functions/Built-in/str_match_ic.html"><strong>str_match_ic</strong></a>
<li><a href="Document/Functions/Built-in/str_match_ind.html"><strong>str_match_ind</strong></a>
<li><a href="Document/Functions/Built-in/str_match_ind_ic.html"><strong>str_match_ind_ic</strong></a>
</ul>
<p>

Updated functions:
<p>

<ul>
<li><a href="Document/Functions/Built-in/rcm2rgrid.html"><strong>rcm2rgrid</strong></a>
<li><a href="Document/Functions/Contributed/rcm2rgrid_Wrap.html"><strong>rcm2rgrid_Wrap</strong></a>
<li><a href="Document/Functions/Built-in/rcm2points.html"><strong>rcm2points</strong></a>
<li><a href="Document/Functions/Contributed/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a>
<li><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a>
<li><a href="Document/Functions/WRF_arw/wrf_user_ij_to_ll.html"><strong>wrf_user_ij_to_ll</strong></a>
<li><a href="Document/Functions/WRF_arw/wrf_user_list_times.html"><strong>wrf_user_list_times</strong></a>
<li><a href="Document/Functions/WRF_arw/wrf_user_ll_to_ij.html"><strong>wrf_user_ll_to_ij</strong></a>

</ul>
<p>

New resources:
<p>

<ul>
<li>cnGridBoundFillColor
<li>cnGridBoundFillPattern
<li>cnGridBoundFillScaleF
<li>cnOutOfRangeFillColor
<li>cnOutOfRangeFillPattern
<li>cnOutOfRangeFillScaleF
</ul>
<p>

Improved functionality:
<p>
<ul>

<li>The order in which scripts contained in
the <a href="Document/Manuals/Ref_Manual/NclDefaultScript.html">NCL_DEF_SCRIPTS_DIR</a>
directory are loaded is no longer undefined. Now, based on their names, the
scripts are loaded in ascii case-sensitive order (numbers before
letters, upper case before lower case). Files in the directory that do not have a ".ncl" suffix are now simply ignored, rather than
causing a fatal error. A warning is generated if there are no valid scripts in the directory, and a script that fails to load properly
causes a fatal error.

</ul>

<p>

<hr>

<hr><hr>
<A NAME="6.0.0-beta"></A>
<h2>Version 6.0.0-beta</h2>
<h3>2 March 2011</h3><p>

This was a test release for the official <a href="#6.0.0">6.0.0 release</a><p>

<hr><hr>
<A NAME="5.2.1"></A>
<h2>Version 5.2.1</h2>
<h3>26 July 2010</h3><p>

<ul>
<li><a href="#NewFunctions5.2.1">New functions</a>
<li><a href="#UpdatedFunctions5.2.1">Updated functions</a>
<li><a href="#UpdatedGRIB5.2.1">Updates to GRIB1/GRIB2 reader</a>
<li><a href="#NewResources5.2.1">New resources</a>
<li><a href="#ARSCAMARPRAMBugFixed5.2.1">Infamous ARSCAM/ARPRAM bug fixed</a>
<li><a href="#BugsFixed5.2.1">Other bugs fixed</a>
</ul>

<p>
<hr>
<p>

<a name="NewFunctions5.2.1"></a>
<b>New functions</b><p>

<ul>

<li><a href="Document/Functions/Built-in/wrf_updraft_helicity.html"><strong>wrf_updraft_helicity</strong></a> - Calculates updraft
helicity from WRF model output.
<p>


</ul>

<p>
<hr>
<p>

<a name="UpdatedGRIB5.2.1"></a>
<b>Updates to GRIB1/GRIB2 reader</b><p>

<ul>

<li>Added support for reading (NCEP) Climate Forecast System
Reanalysis (CFSR): 1979-2010 files. These GRIB2 files have a non-standard method for 
specifying statistical-process variables.
<p>

<li>Updated ability to read WAFS upper-air forecasts in GRIB2 code form
<p>

A new attribute "type_of_spatial_processing" was added to statistical
spatial variables that use GRIB2 template 4.15. Also added statistical
variable type suffixes to the variable names (_avg, _max) in order to
distinguish otherwise identical variable names.
<p>

<li>Fixed a problem reading Canadian Meteorology Centre's GEM data
in GRIB1 format.
<p>

Implemented a 
fix for GRIB1 files (intended to have global longitudinal extent)
where lo1 and lo2 are equal (e.g. both are set to 180 -- rather than
what has alwas been expected---lo1 = -180 and lo2 = 180).

</ul>

<p>
<hr>
<p>

<a name="NewResources5.2.1"></a>
<b>New resources</b><p>

<ul>

<li><a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartOutlineThicknessF"><em>gsnXYBarChartOutlineThicknessF</em></a>,<br>
<a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillLineThicknessF"><em>gsnXYBarChartFillLineThicknessF</em></a>,<br>
<a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillScaleF"><em>gsnXYBarChartFillScaleF</em></a>,<br>
<a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartFillDotSizeF"><em>gsnXYBarChartFillDotSizeF</em></a>
<p>

These resources allow you further control over how bars are filled
in when <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChart"><em>gsnXYBarChart</em></a> is set to True.
</ul>

<p>
<hr>
<p>


<a name="UpdatedFunctions5.2.1"></a>
<b>Updated functions</b><p>

<ul>

<li><a href="Document/Functions/Built-in/rcm2points.html"><strong>rcm2points</strong></a>
<p>

A new option was added (opt=2) that uses a bilinear interpolation
scheme rather than the (default) inverse distance squared.
<p>

<li><a href="Document/Functions/Built-in/wrf_uvmet.html"><strong>wrf_uvmet</strong></a>
<p>

This function was updated to recognize missing values and deal
with them accordingly.

</ul>

<p>
<hr>
<p>


<a name="ARSCAMARPRAMBugFixed5.2.1"></a>
<b>Infamous ARSCAM/ARPRAM bug fixed</b><p>

The infamous error:
<p>

<pre>
<font color=red>    fatal:ContourPlotDraw: ARSCAM/ARPRAM - ALGORITHM FAILURE
    fatal:ContourPlotDraw: draw error</font>
</pre>
<p>

which caused some plots to not be drawn has been fixed.

<p>
<hr>
<p>


<a name="BugsFixed5.2.1"></a>
<b>Other bugs fixed</b><p>

<ul>

<li>A bug was fixed that restricted the length of a graphical output
string to 254 characters.
<p>

<li>Fixed an "assignment mismatch" bug with trying to replace a
coordinate array with an array of a different type inside a procedure.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_polar.html"><strong>gsn_csm_vector_scalar_map_polar</strong></a>
<p>

Fixed a bug in which if you tried to panel plots created by this function,
no common labelbar would appear.
<p>

<li><a href="Document/Functions/Contributed/month_to_annual.html"><strong>month_to_annual</strong></a>
<p>

A bug was fixed in which this function would return an unexpected
"dimension sizes" error.
<p>

<li><a href="Document/Functions/Contributed/pdfx.html"><strong>pdfx</strong></a>, <a href="Document/Functions/Contributed/pdfxy.html"><strong>pdfxy</strong></a>
<p>

At the suggestion of a user, the way the bin sizes were calculated was changed.
<p>

<li><a href="Document/Functions/Contributed/readAsciiTable.html"><strong>readAsciiTable</strong></a>
<p>

Fixed a bug in which if the first value of "opt" is 0, the second
value is ignored.
<p>

<li><a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a> / <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>
<p>

There was a problem with these functions if you had set the
UDUNITS_PATH environment variable  to an older UDUNITS-1 path.
You would get an error that looks like this:
<p>

<pre>
<font color=red>  warning:ut_calendar: Invalid specification string. Missing values will
  be returned.</font>
</pre>
<p>

This problem should be fixed now, and you shouldn't
need to set UDUNITS2_XML_PATH (this was the work-around
for V5.2.0).
<p>

<li><a href="Document/Functions/Built-in/uv2dv_cfd.html"><strong>uv2dv_cfd</strong></a>, <a href="Document/Functions/Built-in/uv2vr_cfd.html"><strong>uv2vr_cfd</strong></a>
<p>

A bug was fixed in which the _FillValue was not being set if the input
"u" didn't have a _FillValue. These now always returns a _FillValue
attribute.
<p>

<li><a href="Document/Functions/Built-in/wgt_vol_ave.html"><strong>wgt_vol_ave</strong></a>
<p>

A bug was fixed in which "NaN" (not a number) values were incorrectly
returned if a subset of the data was all missing. It now returns
missing values.
<p>

<li><a href="Document/Functions/Built-in/wrf_slp.html"><strong>wrf_slp</strong></a> / <a href="Document/Functions/WRF_contributed/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a>

Fixed a memory leak when multiple "slp" were read off a file.
<p>

<li>Fixed a problem in V5.2.0 with reading an OMI Aura HDFEOS5 file.
<p>

</ul>
<p>

<hr><hr>
<A NAME="5.2.0"></A>
<h2>Version 5.2.0</h2>
<h3>14 April 2010</h3><p>

<ul>
<li><a href="#NewESGWebsite5.2.0">NCL hosted on new ESG website</a>
<li><a href="#NewOutputFormats5.2.0">New graphical output formats
(including PNG)</a>
<li><a href="#HDFEOS55.2.0">HDF-EOS5 reader</a>
<li><a href="#NewVariableTypes5.2.0">New variable types</a>
<li><a href="#NewFunctions5.2.0">New functions</a>
<li><a href="#NewUserContribFunctions5.2.0">New user-contributed functions</a>
<li><a href="#NewResources5.2.0">New resources</a>
<li><a href="#UpdatedFunctions5.2.0">Updated functions</a>
<li><a href="#GRIBUpdates5.2.0">Updates and changes to GRIB1/GRIB2 reader</a>
<li><a href="#LazyEvaluationUpdate5.2.0">Lazy evaluation implemented for logical arrays</a>
<li><a href="#NewColorTables5.2.0">New color tables</a>
<li><a href="#OPeNDAP5.2.0">OPeNDAP-enabled binaries now available for
all systems</a>
<li><a href="#BugsFixed5.2.0">Bugs fixed</a>
</ul>

<p>
<hr>
<p>

<a name="NewESGWebsite5.2.0"></a>
<b>NCL hosted on new ESG website</b><p>

The NCL 5.2.0 binaries are being released on a new ESG system,
which was officially released for production on May 5, 2010.
The URL is the same as before:
<p>

<blockquote>
<a href="http://www.earthsystemgrid.org/">http://www.earthsystemgrid.org</a>
</blockquote>
<p>
<hr>
<p>

<a name="NewOutputFormats5.2.0"></a>
<b>New output formats</b><p>

We've added some new graphical output formats (workstation types).
These are based upon an experimental graphics driver, and are
considered beta-level capabilities:
<p>

<ul>
<li>"png" or "newpng" for PNG output
<li>"newps" for PostScript
<li>"newpdf" for PDF
</ul>
<p>

These formats can be used with <a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a>:
<p>

<pre>
   wks = gsn_open_wks("png","test")      ; Will create "test.000001.png"
   wks = gsn_open_wks("newpdf","test")   ; Will create "test.pdf"
   wks = gsn_open_wks("newps","test")    ; Will create "test.ps"
</pre>
<p>

The "newpdf" workstation generally produces smaller output files than
the original "pdf" type. Unfortunately, the "newps" output does not
produce smaller PostScript files.
<p>


The "newps" and "newpdf" formats will remain in test mode for awhile,
and may eventually replace the original "ps" and "pdf" formats.  The
original formats may be kept for backwards compatibility.
<p>

The old "png" format, which was never officially advertised, has been replaced
by the new graphics driver;  "png" is now synonymous with "newpng".
<p>
<hr>
<p>

<a name="HDFEOS55.2.0"></a>
<b>HDF-EOS5 reader</b><p>

NCL can now read <a
href="Document/Manuals/Ref_Manual/NclFormatSupport.html#HDF-EOS5">HDF-EOS5</a>
files via the <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a> or
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> functions. You can also use the tools <a
href="Document/Tools/ncl_filedump.html">ncl_filedump</a> and <a
href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> to 
dump the contents of the file to the screen, or convert it to NetCDF.

<p>
<hr>
<p>

<a name="NewVariableTypes5.2.0"></a>
<b>New variable types</b><p>

<ul>
<li>int64
<li>uint64
<li>ulong
<li>uint
<li>ushort
</ul>

For more information, see the "<a
href="Document/Manuals/Ref_Manual/NclDataTypes.html">Data Types</a>"
section in the
<i><a href="Document/Manuals/Ref_Manual/index.html">NCL Reference
Manual</a></i>.  See also the list of <a href="#NewFunctions5.2.0">new
conversion functions</a>.


<p>
<hr>
<p>

<a name="NewFunctions5.2.0"></a>
<b>New functions</b><p>

<ul>

<li>New conversion routines - <a href="Document/Functions/Built-in/tobyte.html"><strong>tobyte</strong></a>,
<a href="Document/Functions/Built-in/tochar.html"><strong>tochar</strong></a>, <a href="Document/Functions/Built-in/todouble.html"><strong>todouble</strong></a>,
<a href="Document/Functions/Built-in/tofloat.html"><strong>tofloat</strong></a>, <a href="Document/Functions/Built-in/toint.html"><strong>toint</strong></a>,
<a href="Document/Functions/Built-in/toint64.html"><strong>toint64</strong></a>, <a href="Document/Functions/Built-in/tointeger.html"><strong>tointeger</strong></a>,
<a href="Document/Functions/Built-in/tolong.html"><strong>tolong</strong></a>, <a href="Document/Functions/Built-in/toshort.html"><strong>toshort</strong></a>,
<a href="Document/Functions/Built-in/tosigned.html"><strong>tosigned</strong></a>, <a href="Document/Functions/Built-in/tostring.html"><strong>tostring</strong></a>,
<a href="Document/Functions/Built-in/touint.html"><strong>touint</strong></a>, <a href="Document/Functions/Built-in/touint64.html"><strong>touint64</strong></a>,
<a href="Document/Functions/Built-in/toulong.html"><strong>toulong</strong></a>, <a href="Document/Functions/Built-in/tounsigned.html"><strong>tounsigned</strong></a>,
<a href="Document/Functions/Built-in/toushort.html"><strong>toushort</strong></a>
<p>

<li>New variable query functions - <a href="Document/Functions/Built-in/isenumeric.html"><strong>isenumeric</strong></a>,
<a href="Document/Functions/Built-in/isint64.html"><strong>isint64</strong></a>, <a href="Document/Functions/Built-in/issnumeric.html"><strong>issnumeric</strong></a>,
<a href="Document/Functions/Built-in/isuint.html"><strong>isuint</strong></a>, <a href="Document/Functions/Built-in/isuint64.html"><strong>isuint64</strong></a>,
<a href="Document/Functions/Built-in/isulong.html"><strong>isulong</strong></a>, <a href="Document/Functions/Built-in/isushort.html"><strong>isushort</strong></a>
<p>

<li><a href="Document/Functions/Built-in/area_conserve_remap.html"><strong>area_conserve_remap</strong></a>, <a href="Document/Functions/Contributed/area_conserve_remap_Wrap.html"><strong>area_conserve_remap_Wrap</strong></a> - Performs areal
conservative remapping on rectilinear grids.
<p>

<li> <a href="Document/Functions/Contributed/merge_levels_sfc.html"><strong>merge_levels_sfc</strong></a> -
Merges a multiple level variable with the corresponding surface variable.
<p>


<li><a href="Document/Functions/Built-in/moc_globe_atl.html"><strong>moc_globe_atl</strong></a> -  Facilitates calculating the
meridional overturning circulation for the globe and Atlantic.
<p>

<li><a href="Document/Functions/Built-in/NhlGetClassResources.html"><strong>NhlGetClassResources</strong></a> - Returns a list of
resources associated with the given class name and an optional filter
string.
<p>

<li><a href="Document/Functions/Built-in/obj_anal_ic.html"><strong>obj_anal_ic</strong></a> / <a href="Document/Functions/Contributed/obj_anal_ic_Wrap.html"><strong>obj_anal_ic_Wrap</strong></a> - Iterative improvement
objective analysis.
<p>

<li><a href="Document/Functions/Shea_util/pie_chart.html"><strong>pie_chart</strong></a> - Draws a basic pie chart. 
See <a href="http://test.www.ncl.ucar.edu/Applications/pie_chart.shtml"> sample</a>.<p>

<li><a href="Document/Functions/Built-in/str_match.html"><strong>str_match</strong></a> - Returns a list of strings that match the
given expression in an array of strings.
<p>

<li><a href="Document/Functions/Built-in/str_split.html"><strong>str_split</strong></a> - Splits a string into an array of
strings given a delimiter.<p>

<li><a href="Document/Functions/Contributed/time_to_newtime.html"><strong>time_to_newtime</strong></a> -
Change a "udunits" recognized time unit to a new (different) "udunits" recognized time unit. 
<p>

<li><a href="Document/Functions/Built-in/vinth2p_nodes.html"><strong>vinth2p_nodes</strong></a> - Interpolates CESM hybrid coordinates to pressure coordinates on an unstructured grid.  <p> 

<li><a href="Document/Functions/Built-in/vinth2p_ecmwf_nodes.html"><strong>vinth2p_ecmwf_nodes</strong></a> - Interpolates CESM hybrid coordinates to pressure coordinates on an unstructured grid using ECMWF extrapolation.  <p> 

<li><a href="Document/Functions/Built-in/wrf_helicity.html"><strong>wrf_helicity</strong></a> - Calculates storm relative
helicity from WRF model output.
<p>

<li><a href="Document/Functions/Built-in/center_finite_diff_n.html"><strong>center_finite_diff_n</strong></a>,
<a href="Document/Functions/Built-in/dtrend_n.html"><strong>dtrend_n</strong></a>,
<a href="Document/Functions/Built-in/dtrend_msg_n.html"><strong>dtrend_msg_n</strong></a>,
<a href="Document/Functions/Built-in/int2p_n.html"><strong>int2p_n</strong></a>,
<a href="Document/Functions/Contributed/int2p_n_Wrap.html"><strong>int2p_n_Wrap</strong></a>,
<a href="Document/Functions/Built-in/linint1_n.html"><strong>linint1_n</strong></a>,
<a href="Document/Functions/Contributed/linint1_n_Wrap.html"><strong>linint1_n_Wrap</strong></a>,
<a href="Document/Functions/Built-in/linmsg_n.html"><strong>linmsg_n</strong></a>,
<a href="Document/Functions/Built-in/runave_n.html"><strong>runave_n</strong></a>
<a href="Document/Functions/Contributed/runave_n_Wrap.html"><strong>runave_n_Wrap</strong></a>,
<a href="Document/Functions/Built-in/taper_n.html"><strong>taper_n</strong></a>,
<a href="Document/Functions/Built-in/wgt_runave_n.html"><strong>wgt_runave_n</strong></a>,
<a href="Document/Functions/Contributed/wgt_runave_n_Wrap.html"><strong>wgt_runave_n_Wrap</strong></a>
<p>

This suite of functions is an improvement to the existing versions of
these functions which operate only on the rightmost dimension.  These
functions allow you to specifiy which dimension to operate on, so you
don't have to reorder the input array(s) first.

</ul>

<p>
<hr>
<p>

<a name="NewUserContribFunctions5.2.0"></a>
<b>New user-contributed functions</b><p>

A number of users have been sending us some nice NCL scripts, so we've decided to
create a new directory for these. 

<ul>

<li><a href="Document/Functions/User_contributed/calendar_decode2.html"><strong>calendar_decode2</strong></a> -
Translates numeric time coordinates to calendar times (contributed by Dave Allured)
<p>

<li><a href="Document/Functions/User_contributed/kf_filter.html"><strong>kf_filter</strong></a> - Extracts
equatorial waves by filtering in the Wheeler-Kiladis
wavenumber-frequency domain.
<p>

<li><a href="Document/Functions/User_contributed/run_cor.html"><strong>run_cor</strong></a> - Calculates
a running correlation (contributed by Sabeerli)
<p>

<li><a href="Document/Functions/User_contributed/time_axis_labels.html"><strong>time_axis_labels</strong></a> - Sets
resources necessary to draw nice tickmark labels using a format of
date/time on an axis (contributed by Arindam Chakraborty)
<p>

<li><a href="Document/Functions/User_contributed/ut_string.html"><strong>ut_string</strong></a> - Converts time
values into nicely formatted strings (contributed by Carl
Schreck/Arindam Chakraborty)
<p>

</ul>

<p>
<hr>
<p>

<a name="NewResources5.2.0"></a>
<b>New resources</b><p>

<ul>

<li><a href="Document/Graphics/Resources/wk.html#wkPaperSize"><em>wkPaperSize</em></a>, <a href="Document/Graphics/Resources/wk.html#wkPaperHeightF"><em>wkPaperHeightF</em></a>, <a href="Document/Graphics/Resources/wk.html#wkPaperHeightF"><em>wkPaperHeightF</em></a> - these resources
allow you to set the paper size for PostScript and PDF output when you
open a workstation. You can set the size using a standard name like
"A4", or by setting the width and height in inches.
<p>


<li><a href="Document/Graphics/Resources/gsn.html#gsnXYRightFillColors"><em>gsnXYRightFillColors</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnXYLeftFillColors"><em>gsnXYLeftFillColors</em></a> - these resources can be used
to fill between X curves in an XY plot generated by <a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>.  See <a href="Applications/xy.html#ex24">example 24</a> on the
<a href="Applications/xy.html">XY applications page</a>.

</ul>

<p>
<hr>
<p>


<a name="UpdatedFunctions5.2.0"></a>
<b>Updated functions</b><p>

<ul>

<li>
<a href="Document/Functions/Contributed/clmDayTLL.html"><strong>clmDayTLL</strong></a>,
<a href="Document/Functions/Contributed/clmMonTLL.html"><strong>clmMonTLL</strong></a>,
<a href="Document/Functions/Contributed/clmMonTLLL.html"><strong>clmMonTLLL</strong></a>,
<a href="Document/Functions/Contributed/stdMonTLL.html"><strong>stdMonTLL</strong></a>,
<a href="Document/Functions/Contributed/stdMonTLLL.html"><strong>stdMonTLLL</strong></a>,
<a href="Document/Functions/Contributed/month_to_annual.html"><strong>month_to_annual</strong></a>,
<a href="Document/Functions/Contributed/month_to_annual_weighted.html"><strong>month_to_annual_weighted</strong></a>.
<p>

These were updated to use <a href="Document/Functions/Built-in/dim_avg_n.html"><strong>dim_avg_n</strong></a> and/or
<a href="Document/Functions/Built-in/dim_stddev_n.html"><strong>dim_stddev_n</strong></a>. 
<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_polygon.html"><strong>gsn_add_polygon</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_add_polymarker.html"><strong>gsn_add_polymarker</strong></a>
<p>

These functions have been updated to recognize the special <a href="Document/Graphics/Resources/tf.html#tfPolyDrawOrder"><em>tfPolyDrawOrder</em></a> resource.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a>
<p>

This function has been updated to recognize the new output types:
"png", "newps", and "newpdf". For more information, see the "<a
href="#NewOutputFormats5.2.0">New graphical output formats</a>"
section.
<p>

<li><a href="Document/Functions/Contributed/int2p_Wrap.html"><strong>int2p_Wrap</strong></a>
<p>

The argument prototype <b>xo[*]:numeric</b> is no longer
applicable. The function allows the <b>xo</b> to be multidimensional.
<p>

<li><a href="Document/Functions/Pop_remap/PopLatLon.html"><strong>PopLatLon</strong></a>, <a href="Document/Functions/Pop_remap/PopLatLonV.html"><strong>PopLatLonV</strong></a>
<p>

These functions have been updated to recognize the high resolution
"tx0.1v2" mappings.
<p>

<li><a href="Document/Functions/Built-in/relhum.html"><strong>relhum</strong></a>
<p>

The function has been updated to allow relative humidities > 100% (super saturation). Previously, these were set to 100%.
<p>

<li><a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a> and <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>
<p>

These functions are now linked against
the <a href="http://www.unidata.ucar.edu/software/udunits/udunits-2/udunits2.html">UDUNITS-2</a>
library.  This means the code has a new dependency on some UDUNITS-2
XML files that come installed with this version of NCL.
<p>

Unfortunately we've discovered a bug in V5.2.0 where if you have the
UDUNITS_PATH environment variable set, and it's pointing to an older
UDUNITS-1 path, then these functions will fail with a message like:
<p>

<pre>
<font color=red>  warning:ut_calendar: Invalid specification string. Missing values will
  be returned.</font>
</pre>
<p>

There are two possible work-arounds:
<ol>
<li>Set the environment variable UDUNITS2_XML_PATH to point to 
$NCARG_ROOT/lib/ncarg/udunits/udunits2.xml:
<p>

<pre>
   setenv UDUNITS2_XML_PATH $NCARG_ROOT/lib/ncarg/udunits/udunits2.xml

or

   export UDUNITS2_XML_PATH=$NCARG_ROOT/lib/ncarg/udunits/udunits2.xml
</pre>
<p>

<li>Unset the UDUNITS_PATH environment variable before you run NCL.
</ol>
<p>

<li><a href="Document/Functions/Wind_rose/WindRoseBasic.html"><strong>WindRoseBasic</strong></a>,
<a href="Document/Functions/Wind_rose/WindRoseColor.html"><strong>WindRoseColor</strong></a>,
<a href="Document/Functions/Wind_rose/WindRoseThickLine.html"><strong>WindRoseThickLine</strong></a>.
<p>

These were updated to allow the <em>wspd</em> and <em>wdir</em> to be multi-dimensional. 
<p>

</ul>

<p>
<hr>
<p>

<a name="GRIBUpdates5.2.0"></a>
<b>Updates and changes to GRIB1/GRIB2 reader</b><p>

<b>GRIB2 code table updates</b><p>

<b>BACKWARDS INCOMPATIBILITY ALERT</b>
<p>

The GRIB2 code tables have been extensively revised to bring them
up-to-date with the currently documented state of the parameter tables
primarily as defined by NCEP in links from the parameter category page
at
<a href="http://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_table4-1.shtml">http://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_table4-1.shtml</a>. ECMWF
tables, as documented
at <a href="http://www.ecmwf.int/publications/manuals/d/gribapi/fm92/grib2/show/parameter/">http://www.ecmwf.int/publications/manuals/d/gribapi/fm92/grib2/show/parameter/</a>,
were also consulted with the goal of harmonizing the parameter lists
and descriptions as much as possible. The number of defined parameter
has almost doubled, increasing from 371 to 701. This should eliminate
most of the warnings about unrecognized parameters. Unfortunately,
this process has led to some unavoidable backwards incompatibilities,
primarily due to changes in the short names that form the base name
for NCL variables that represent the aggregated GRIB records.

<p>When GRIB2 was first introduced the NCEP documentation did not
include abbreviations (short names) for many parameters.  Since NCL's
variable naming scheme requires a short name, NCL developers invented
them where needed. Now, however, NCEP has created their own
abbreviations for every parameter. Naturally enough, these names do
not all coincide with the short names chosen by the NCL
developers. To prevent confusion and to promote future
interoperability, the NCL development team has decided that the
importance of using essentially the same parameter names as NCEP
outweighs the immediate cost of a certain amount of backwards
incompatibility. As a gauge of the scope of the problem, 92 short
names (approximately 25% of the parameter total prior to this release)
have had short name changes. However, this statistic may exaggerate
the scope of the problem, because many or most of these changes apply to
new and therefore probably relatively obscure parameters.

<p><b>In order to mitigate this problem for users who may not immediately
be able to update their codes to reflect the new variable names, the
previous version of the code tables is being included with the
distribution in a parallel directory tree. Users can switch from the
default set of code tables located
at <code>$NCARG_ROOT/lib/ncarg/grib2_codetables</code> by setting the
environment variable <code>NIO_GRIB2_CODETABLES</code> to point to
<code>$NCARG_ROOT/lib/ncarg/grib2_codetables.previous</code>. For
reference a list of the short name changes and additions is
available <a href="Document/Manuals/Ref_Manual/grib2_short_name_updates.txt">here</a>.</b>

<p>There have also been some changes to the parameter description
string that serves as the value of the <i>long_name</i>
attribute. Basically the capitalization as been regularized by making
all words except the initial word lower case. The only exception to
this rule is for acronyms that are traditionally all upper-case.

<p>Note that the GRIB2 codetables are text files that can easily be
edited. Therefore users who do not like any aspect of the presentation
of the parameters can create their own copy of the directory tree and
modify it to suit their needs. By pointing 
<code>NIO_GRIB2_CODETABLES</code> to this copy of the code tables NCL
will immediately incorporate the modifications into its presentation of GRIB2
data.

<o>One additional point is that sort of incompatibility should not happen again.
The new NCL development policy is that short names will no longer be invented.
If parameters happen to be documented without an abbreviation, they will 
appear in NCL's presentation of the data as <code>VAR_x_x_x_...</code> (for GRIB2 data),
where the 3 'x's stands for discipline, category, and parameter number.  This
is also true for GRIB1 data, except that the form is <code>VAR_x_...</code>, 
where 'x' is simply the parameter number.

<p>

<b>Partial support for complex packing in GRIB1 files</b><p>

Support was added for row by row complex packing without secondary bit maps in GRIB1 files.

<p>
<b>Support for GRIB2 spatial statistical data</b><p>

Added support for product template 4.15 which defines statistical processes over
a spatial region.

<p>

<b>Partial support for GRIB2 grid type 204 (curvilinear orthogonal grids)</b><p>

This grid type is supported without coordinate data. Notably, however, the example file
contains its own coordinate data as variables in their own right.

<p>
<hr>
<p>

<a name="LazyEvaluationUpdate5.2.0"></a>
<b>Lazy evaluation implemented for logical arrays</b><p>

<b>BACKWARDS INCOMPATIBILITY ALERT</b>
<p>
The <b>and</b> (<code>.and.</code>) and <b>or</b> (<code>.or.</code>) operators now perform lazy evaluation 
in an array context. If the left hand side logical expression is a scalar, there is no change in behavior. If 
the left hand logical expression is an array, lazy evaluation is now performed on an element by element basis.
This gives a different result than previous versions of NCL for any elements that match the following two cases:
<ul> 
<li><code>True .or. Missing</code></li>
<li><code>False .and. Missing</code></li>
</ul>
Prior versions returned <b>Missing</b> for both these cases. As of the current version, the first case returns <b>True</b> 
and the second case returns <b> False</b>. However, unlike with lazy evaluation when the left hand side is scalar, 
both the left hand side and right hand side expressions are evaluated individually prior to applying either logical operator.
This means that this form of lazy evaluation cannot be used to avoid error conditions that might occur from evaluation of the
right hand side expression. 

<p>See <a href="Document/Manuals/Ref_Manual/NclExpressions.html#LazyEvaluation">logical expressions and 
lazy evaluation in NCL</a> for more information.
 
<hr>
<p>

<a name="NewColorTables5.2.0"></a>
<b>New color tables</b><p>

These color tables were graciously contributed by <a
href="http://www.meteoschweiz.ch/">MeteoSwiss</a>.  <br> [Click on
image for larger version.]
<p>

<a href="https://www.ncl.ucar.edu/Images/MeteoSwissColormaps.png"><img src="https://www.ncl.ucar.edu/Images/MeteoSwissColormaps.sm.png"></a>
<p>

For a list of all the available color tables, see the
<a href="Document/Graphics/color_table_gallery.html">color table gallery</a>.

<p>
<hr>
<p>

<a name="OPeNDAP5.2.0"></a>
<b>OPeNDAP-enabled binaries now available for all systems</b><p>

NetCDF Version 4.1.<i>x</i> now comes with <a
href="Applications/opendap.html">OPeNDAP support</a> built into it,
which makes building an OPeNDAP-enabled version of NCL much easier. As
a result, we provide OPeNDAP-enabled binaries for all systems we
support.
<p>

There may be some dependencies on shared libraries like "libcurl",
"libcrypto.so", "libidn.so", and "libssl.so". These may already be on
your system.
<p>

If you run into a problem with shared libraries when running "ncl",
then either download a non-OPeNDAP enabled binary, or see these <a
href="Download/linux.html">Linux</a> or <a
href="Download/cygwin.html">Cygwin</a> notes.

<p>
<hr>
<p>

<a name="BugsFixed5.2.0"></a>
<b>Bugs fixed</b><p>

<ul>

<li>A bug was fixed in writing classic NetCDF 4 files if the following
conditions were met:
<p>

<ul>
<li>You were writing a NetCDF-4 classic file on a big endian machine.
<p>

Big endian machines include IBM/AIX/Power, Mac PowerPC, and
Sun/Solaris systems.
<p>

To write a NetCDF-4 classic file, you must have put the following line
in your NCL script, before any addfile(s) call:
</p>

<pre>
    setfileoption("nc", "Format",  "NetCDF4Classic")
</pre>
<p>

Otherwise, by default, you will be writing a NetCDF 3 file, and you
shouldn't have any problems.
<p>

<li>You are writing more than 10 global attributes and/or more than 10
variable attributes to a file. (In some testing, this number seems to
vary depending on conditions we're not sure of.)
<p>

<li>If you then transfer this NetCDF file to a little endian system
(Linux Intel or Mac Intel systems), you may not be able to read it
back in using an NCL script, ncl_filedump, or any other program that
reads NetCDF-4 classic files.
</ul>
<p>

<li>Another bug in the recent implementation of aggregated variable
subscripting for the file list returned by the
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> function was found in <a
href="current_release.html">version 5.1.1</a> and has now been
fixed. It involves selection along the aggregated dimension only when
using vector subscripting. The problem occurs when a selection results
in a single element being accessed along the aggregated dimension for
any file in the list. The symptoms of this problem range from possible
core dumps to returned variables that have fewer coordinate variables
than expected along with odd mix-ups between the coordinate variables
that are present. Users are advised to avoid using vector subscripting
along the aggregated dimension if there is a possibility that only one
element is selected from any of the files in the list.
<p>

<li><a href="Document/Functions/Contributed/dim_avg_Wrap.html"><strong>dim_avg_Wrap</strong></a>
<p>

This function was not copying variable attributes as advertised.
<p>

<li><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>
<p>
<li>A bug was fixed in which if you use a "plot" array
with multiple calls to <a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>,
<i>and</i> each set of paneled plots has a different common labelbar,
then you wouldn't get the correct labelbar for the second plot.
<p>

Here an <a href="NclScripts/panellab.html">NCL script</a> that illustrates
the problem.
<p>

<li><a href="Document/Functions/Diagnostics/mjo_xcor_lag_season.html"><strong>mjo_xcor_lag_season</strong></a>
<p>
Added a statment that fixes a possible numerical rounding issue. 
<p>

<li><a href="Document/Functions/Contributed/rho_mwjf.html"><strong>rho_mwjf</strong></a>
<p>

Dr. Arne Melson [Norwegian Meteorological Institute,
R & D - Oceanography ] noted that the results were applicable
for computing surface potential density only, i.e., where depth=0.  
A modification has since been applied [version 5.2.0] to accurately
compute all density surfaces (depth >= 0).
<p>

<li> <a href="Document/Functions/Contributed/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a>
<p>

Corrected an interface error.
<p>

<li><a href="Document/Functions/Skewt_func/skewT_PlotData.html"><strong>skewT_PlotData</strong></a>
<p>

Fixed an issue that occured when the attribute [resource]  <b>ThermoInfo</b> was set to False.
<p>

</ul>
<p>

<hr><hr>
<A NAME="5.1.1"></A>
<h2>Version 5.1.1</h2>
<h3>June 16, 2009</h3>


<ul>
<li><a href="#NewFunctions5.1.1">New functions</a>
<li><a href="#Shapefiles5.1.1">Support for shapefiles and other geospatial data formats</a> - (beta test version)
<li><a href="#NewResources5.1.1">New and updated resources</a>
<li><a href="#GRIB1-tables5.1.1">Change to the procedure for updating GRIB
1 parameter tables</a>
<li><a href="#UpdatedECMWFGRIB1-tables5.1.1">New and updated ECMWF GRIB 1
parameter tables</a>
<li><a href="#AddfilesBugsFixed5.1.1">"addfile" bugs fixed</a>
<li><a href="#BugsFixed5.1.1">Bugs fixed</a>
<li><a href="#SheaUtil5.1.1">"shea_util.ncl" has new dependency</a>
<li><a href="#WRAPIT5.1.1">Changes to WRAPIT</a>
<li><a href="#DeprecatedFunctions5.1.1">Deprecated functions</a>

</ul>
<p>

<hr>

<a name="NewFunctions5.1.1"></a>
<b>New functions</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/dim_avg_n.html"><strong>dim_avg_n</strong></a>, <a href="Document/Functions/Built-in/dim_avg_wgt_n.html"><strong>dim_avg_wgt_n</strong></a>,
<a href="Document/Functions/Built-in/dim_cumsum_n.html"><strong>dim_cumsum_n</strong></a>, <a href="Document/Functions/Built-in/dim_max_n.html"><strong>dim_max_n</strong></a>,
<a href="Document/Functions/Built-in/dim_median_n.html"><strong>dim_median_n</strong></a>, <a href="Document/Functions/Built-in/dim_min_n.html"><strong>dim_min_n</strong></a>,
<a href="Document/Functions/Built-in/dim_num_n.html"><strong>dim_num_n</strong></a>, <a href="Document/Functions/Built-in/dim_pqsort_n.html"><strong>dim_pqsort_n</strong></a>,
<a href="Document/Functions/Built-in/dim_product_n.html"><strong>dim_product_n</strong></a>, <a href="Document/Functions/Built-in/dim_rmsd_n.html"><strong>dim_rmsd_n</strong></a>,
<a href="Document/Functions/Built-in/dim_rmvmean_n.html"><strong>dim_rmvmean_n</strong></a>, <a href="Document/Functions/Built-in/dim_rmvmed_n.html"><strong>dim_rmvmed_n</strong></a>,
<a href="Document/Functions/Built-in/dim_standardize_n.html"><strong>dim_standardize_n</strong></a>, <a href="Document/Functions/Built-in/dim_stat4_n.html"><strong>dim_stat4_n</strong></a>,
<a href="Document/Functions/Built-in/dim_stddev_n.html"><strong>dim_stddev_n</strong></a>, <a href="Document/Functions/Built-in/dim_sum_n.html"><strong>dim_sum_n</strong></a>,
<a href="Document/Functions/Built-in/dim_sum_wgt_n.html"><strong>dim_sum_wgt_n</strong></a>, <a href="Document/Functions/Built-in/dim_variance_n.html"><strong>dim_variance_n</strong></a>,
<a href="Document/Functions/Contributed/dim_avg_n_Wrap.html"><strong>dim_avg_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_avg_wgt_n_Wrap.html"><strong>dim_avg_wgt_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_cumsum_n_Wrap.html"><strong>dim_cumsum_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_rmsd_n_Wrap.html"><strong>dim_rmsd_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_rmvmean_n_Wrap.html"><strong>dim_rmvmean_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_rmvmed_n_Wrap.html"><strong>dim_rmvmed_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_rmvmed_Wrap.html"><strong>dim_rmvmed_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_standardize_n_Wrap.html"><strong>dim_standardize_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_stddev_n_Wrap.html"><strong>dim_stddev_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_sum_n_Wrap.html"><strong>dim_sum_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_sum_wgt_n_Wrap.html"><strong>dim_sum_wgt_n_Wrap</strong></a>, <a href="Document/Functions/Contributed/dim_variance_n_Wrap.html"><strong>dim_variance_n_Wrap</strong></a>
<p>

<dd>This suite of functions is an upgrade to the existing dim_<i>xxxx</i>
functions which operate only on the rightmost dimension. The
dim_<i>xxxx</i>_n and dim_<i>xxxx</i>_n_Wrap functions operate
on the input given dimenions, so you don't have to reorder the
input array first.
<p>

<dt><a href="Document/Functions/Contributed/pdfxy.html"><strong>pdfxy</strong></a>
<dd>Generates a joint probability density distribution. 
<p>

<dt><a href="Document/Functions/Shea_util/plt_pdfxy.html"><strong>plt_pdfxy</strong></a>

<dd>Creates a nice plot of the joint probability array created by the
<a href="Document/Functions/Contributed/pdfxy.html"><strong>pdfxy</strong></a> function.
<p>

<dt><a href="Document/Functions/Contributed/stat_dispersion.html"><strong>stat_dispersion</strong></a>
<dd>Generates a number of 'dispersion' statistics. 
<p>

<dt><a href="Document/Functions/Built-in/str_capital.html"><strong>str_capital</strong></a>, <a href="Document/Functions/Built-in/str_concat.html"><strong>str_concat</strong></a>,
<a href="Document/Functions/Built-in/str_fields_count.html"><strong>str_fields_count</strong></a>, <a href="Document/Functions/Built-in/str_get_cols.html"><strong>str_get_cols</strong></a>,
<a href="Document/Functions/Built-in/str_get_dq.html"><strong>str_get_dq</strong></a>, 
<a href="Document/Functions/Built-in/str_get_field.html"><strong>str_get_field</strong></a>, 
<a href="Document/Functions/Built-in/str_get_nl.html"><strong>str_get_nl</strong></a>, 
<a href="Document/Functions/Built-in/str_index_of_substr.html"><strong>str_index_of_substr</strong></a>, <a href="Document/Functions/Built-in/str_insert.html"><strong>str_insert</strong></a>,
<a href="Document/Functions/Built-in/str_is_blank.html"><strong>str_is_blank</strong></a>, <a href="Document/Functions/Built-in/str_join.html"><strong>str_join</strong></a>,
<a href="Document/Functions/Built-in/str_left_strip.html"><strong>str_left_strip</strong></a>, <a href="Document/Functions/Built-in/str_lower.html"><strong>str_lower</strong></a>,
<a href="Document/Functions/Built-in/str_right_strip.html"><strong>str_right_strip</strong></a>, <a href="Document/Functions/Built-in/str_squeeze.html"><strong>str_squeeze</strong></a>,
<a href="Document/Functions/Built-in/str_strip.html"><strong>str_strip</strong></a>, <a href="Document/Functions/Built-in/str_sub_str.html"><strong>str_sub_str</strong></a>,
<a href="Document/Functions/Built-in/str_switch.html"><strong>str_switch</strong></a>, <a href="Document/Functions/Built-in/str_upper.html"><strong>str_upper</strong></a>
<p>

<dd>A new suite of string functions to make reading ASCII files and
processing NCL strings easier.
<p>


<dt><a href="Document/Functions/Contributed/yyyyddd_to_yyyymmdd.html"><strong>yyyyddd_to_yyyymmdd</strong></a>

<dd>Given year and day-of-year (yyyyddd) create a one-dimensional
array containing concatenated year, month and day-of-month [yyyymmdd]
values.
<p>

<dt><a href="Document/Functions/Contributed/yyyymmdd_to_yyyyddd.html"><strong>yyyymmdd_to_yyyyddd</strong></a>

<dd>Given concatenated year-month-day_of_month (yyyymmdd) creates a
one-dimensional array containing concatenated year and day-of-year
[yyyyddd] values.

</dl>
<p>
<p>

<a name="Shapefiles5.1.1"></a>
<b>Support for shapefiles and other geospatial data formats</b>
<p>

<a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>, <a
href="Document/Tools/ncl_filedump.html">ncl_filedump</a> and <a
href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> will
support the reading of several geospatial vector-data formats, such as <a
href="http://en.wikipedia.org/wiki/Shapefile">shapefiles</a> (.shp),
<a href="http://en.wikipedia.org/wiki/MapInfo_Interchange_Format">MapInfo</a> interchange files (.mif),
<a href="http://gmt.soest.hawaii.edu/">Generic Mapping Tools</a> ascii files (.gmt),
and pre-2006 edition
<a href="http://www.census.gov/geo/www/tiger/">TIGER/Line</a> files (.rt1).
This will be a test version, so use at your own risk.  See the <a
href="Applications/shapefiles.html">shapefiles applications page</a>
for some examples.
<p>
<p>

<a name="NewResources5.1.1"></a>
<b>New resources</b><p>

<dl>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnStringFontColor"><em>gsnStringFontColor</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnLeftStringFontColor"><em>gsnLeftStringFontColor</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnCenterStringFontColor"><em>gsnCenterStringFontColor</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnRightStringFontColor"><em>gsnRightStringFontColor</em></a>

<dd>Allows you to set the color of the three subtitles
at the top of a "gsn_csm" plot.

</dl>
<p>
<p>

<a name="GRIB1-tables5.1.1"></a>
<b>Change to the procedure for updating GRIB 1 parameter tables</b>
<p>
NCL uses abbreviated short names usually found in GRIB 1 parameter tables to form the
initial component of NCL file variable names. However, centers such as ECMWF 
sometimes provide tables that have are have no short names
for some or all the parameters in the table. Formerly, the NCL 
developers made up suitable short names, but this practice has been discontinued.
Now, as NCL adds a file, when no abbreviation is found for a parameter the 
variable will be assigned the name "VAR_"<parameter_number> as its initial component. 
This is the same scheme used when a parameter has no entry in the table at all. 
The difference is that no warning will be issued if an entry without an abbreviation
is found, and the  variable will have "long_name" and "units" attributes as usual. Users should 
expect that in future releases, if the tables are updated with abbreviations, 
such names might well change.

<p>
<p>

<a name="UpdatedECMWFGRIB1-tables5.1.1"></a>
<b>New and updated ECMWF GRIB 1 parameter tables</b>
<p>

The following new ECMWF parameter tables were added:

<ul>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_133.html">ECMWF Parameter table version 133</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_171.html">ECMWF Parameter table version 171</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_172.html">ECMWF Parameter table version 172</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_173.html">ECMWF Parameter table version 173</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_174.html">ECMWF Parameter table version 174</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_175.html">ECMWF Parameter table version 175</a> 
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_201.html">ECMWF Parameter table version 201</a> 

<li><a href="Document/Manuals/Ref_Manual/ecmwf_210.html">ECMWF Parameter table version 210</a> 

<li><a href="Document/Manuals/Ref_Manual/ecmwf_211.html">ECMWF Parameter table version 211</a> 

<li><a href="Document/Manuals/Ref_Manual/ecmwf_228.html">ECMWF Parameter table version 228</a> 

<li><a href="Document/Manuals/Ref_Manual/ecmwf_230.html">ECMWF Parameter table version 230</a> 

<li><a href="Document/Manuals/Ref_Manual/ecmwf_234.html">ECMWF Parameter table version 234</a> 

</ul>

The following tables were updated:

<ul>
<li><a href="Document/Manuals/Ref_Manual/ecmwf_128.html">ECMWF Parameter table version 128</a>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_129.html">ECMWF Parameter table version 129</a>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_131.html">ECMWF Parameter table version 131</a>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_132.html">ECMWF Parameter table version 132</a>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_140.html">ECMWF Parameter table version 140</a>
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_151.html">ECMWF Parameter table version 151</a>
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_160.html">ECMWF Parameter table version 160</a>
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_162.html">ECMWF Parameter table version 162</a>
	
<li><a href="Document/Manuals/Ref_Manual/ecmwf_190.html">ECMWF Parameter table version 190</a>

<li><a href="Document/Manuals/Ref_Manual/ecmwf_200.html">ECMWF Parameter table version 200</a>

</ul>
<p>
<p>

<a name="AddfilesBugsFixed5.1.1"></a>
<b>"addfiles" bugs fixed</b><p>

<li>There were several bugs in the new implementation of the
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> function that was released with version <a
href="prev_releases.html#5.1.0">5.1.0</a>. They were serious enough
that users should not trust the data read into variables using
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> for version
<ahref="prev_releases.html#5.1.0">5.1.0</a>. Anyone that relies on
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> should upgrade to the new release
immediately. The bugs that were fixed include the following:

<ul>
<li>Striding across the leftmost (aggregated) dimension did not work correctly:

<pre>
  f    = addfiles("file*07*.nc","r")
  xnew = f[:]->x(::5,:,:)
</pre>
<p>

<li>The second serious bug is that if the data extracted from the
first file of an aggregated variable was reduced to a single value,
the returned variable was incorrectly internally tagged as a
oscalar. When accessed without subscripts, this had the strange effect
of returning the proper number of elements but giving them all the
value of the first element. Here's an example of the problem:

<pre>
  fnames = (/ "file01.nc", "file02.nc" /)
  fp = addfiles(fnames, "r")
  days = fp[:]->days
  print(days)
  days = days / sum(days)
  print(days)
</pre>
<p>

Adding a subscript makes it work correctly:

<pre>
   days(:) = days(:) / sum(days)
</pre>

<li>There was also a bug that resulted in files not being closed properly when the when the file list variable was deleted.
<p>

</ul>

These bugs have been fixed in V5.1.1.
<p>
<p>

<a name="BugsFixed5.1.1"></a>
<b>Bugs fixed</b><p>

<ul>

<li><a href="Document/Functions/Built-in/vinth2p.html"><strong>vinth2p</strong></a>, <a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>,
<a href="Document/Functions/Built-in/vintp2p_ecmwf.html"><strong>vintp2p_ecmwf</strong></a>
<p>

A bug was discovered that affects the top two interpolated levels only.
The underlying <a href="Document/Functions/Built-in/vinth2p.html"><strong>vinth2p</strong></a>, <a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>,
<a href="Document/Functions/Built-in/vintp2p_ecmwf.html"><strong>vintp2p_ecmwf</strong></a> codes were taken <i>directly</i>
from the original CCM Processor
(<a href="http://www.cgd.ucar.edu/cms/processor/subject/vertical.interp.html">http://www.cgd.ucar.edu/cms/processor/subject/vertical.interp.html</a>).
<p>

These subroutines have been used possibly since the late 1980s.
Recently, Mark Branson (Colorado State University), was examining
interpolated values at the uppermost interpolated levels.  He
discovered a bug.
<p>

An example will be used to illustrate the bug:
<p>

Consider temperatures [TM (K)] at the following model hybrid levels
[PM (hPa)]:
<p>

<pre>
          PM      TM        <=== Raw Data
        3.64    226.77
        7.59    225.53
       14.36    224.89
       24.61    221.39
       38.27    213.97
      [snip]
</pre>

Let's say that interpolation to the following pressure levels
(PI) is desired:

<pre>
        PI = (/ 5, 7, 10, 20, 30, 50, ...... /)
</pre>

The following shows the values interpolated by the
<a href="Document/Functions/Built-in/vinth2p.html"><strong>vinth2p</strong></a> and <a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>
functions before (v5.1.0) and after (v5.1.1) the bug fix:
<p>

<pre>
        PI    v5.1.0    v5.1.1    diff
         5    225.78    226.34   0.564
         7    225.59    225.72   0.129
        10    225.30    225.30   0.000 No differences
        20    222.96    222.96   0.000
    [snip]
</pre>

The differences could be 'small' or 'large'. It depends upon the
vertical distribution of the variable.
<p>


<li><a href="Document/Functions/WRF_arw/wrf_user_unstagger.html"><strong>wrf_user_unstagger</strong></a>
had a bug with regard to getting the diagnostics "ua" and "va".
<p>

<li>There was a bug in reading a character variable that contained a
missing value off a NetCDF file. The missing value would not be set
correctly.
<p>

<li>Several functions (like <a href="Document/Functions/Built-in/sprinti.html"><strong>sprinti</strong></a> and
<a href="Document/Functions/Built-in/sprintf.html"><strong>sprintf</strong></a>) had a bug that caused an input
variable to incorrectly have an extra attribute added upon return.
<p>

</ul>

<p>
<p>

<a name="SheaUtil5.1.1"></a>
<b>"shea_util.ncl" has new dependency</b>
<p>

If you are loading the "shea_util.ncl" script, then you will need to
load "contributed.ncl" before "shea_util.ncl":

<pre>
load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl"
load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/shea_util.ncl"
</pre>
<p>

"shea_util" now depends on some functions in "contributed.ncl".
<p>
<p>

<a name="WRAPIT5.1.1"></a>
<b>Changes to WRAPIT</b><p>

For Linux and MacOS systems, the default fortran compiler
used has been changed from "g77" to "gfortran". If you
need to use the "g77" compiler, then use the new "-g77"
option:

<pre>
  WRAPIT -g77 your_file.f
</pre>

<p>
<p>

<a name="DeprecatedFunctions5.1.1"></a>
<b>Deprecated functions</b><p>

<dl>

<dt><a href="Document/Functions/Contributed/changeCase.html"><strong>changeCase</strong></a>/<a href="Document/Functions/Contributed/changeCaseChar.html"><strong>changeCaseChar</strong></a>/<a href="Document/Functions/Contributed/replaceSingleChar.html"><strong>replaceSingleChar</strong></a>

<dd>These functions were deprecated. Use built-in functions
<a href="Document/Functions/Built-in/str_switch.html"><strong>str_switch</strong></a>, <a href="Document/Functions/Built-in/str_lower.html"><strong>str_lower</strong></a>,
<a href="Document/Functions/Built-in/str_upper.html"><strong>str_upper</strong></a>, and <a href="Document/Functions/Built-in/str_sub_str.html"><strong>str_sub_str</strong></a>.

</dl>

<hr><hr>
<A NAME="5.1.0"></A>
<h2>Version 5.1.0</h2>
<h3>4 March 2009</h3>

<ul>
<li><a href="#NewMapFunctionality5.1.0">New map functionality</a>
<li><a href="#NewFunctions5.1.0">New functions</a>
<li><a href="#NewWRFFunctions5.1.0">New and updated WRF-NCL functions</a>
<li><a href="#NewFunctionality5.1.0">New functionality</a>
<li><a href="#AddfilesUpdate5.1.0">Major upgrade for "addfiles"</a>
<li><a href="#NewColorTables5.1.0">New color tables</a>
<li><a href="#NewResources5.1.0">New and updated resources</a>
<li><a href="#BugFixes5.1.0">Bug fixes</a>
</ul>

<p>
<a name="NewMapFunctionality5.1.0"></a>
<b>New map functionality</b><p>

New map databases have been added to NCL that provide improved map
outlines, and new map outlines like the provinces of China, and the states
of Brazil, India, and Australia.  Some of the Antarctica ice shelves
have also been added.
<p>

Three new map projections have been provided as well: <a
href="Applications/Images/maponly_17_1_lg.png">Hammer</a>, <a
href="Applications/Images/maponly_17_2_lg.png">Aitoff</a>, and
<a
href="Applications/Images/maponly_17_3_lg.png">Winkel tripel</a>.
<p>

A <a href="Applications/Images/maponly_18_lg.png">new-and-improved
Mollweide</a> projection has been added that
<b>replaces the original Mollweide projection</b>.  The old Mollweide,
like a true Mollweide, has an elliptical perimeter twice as wide as
it is high (though with different dimensions) and its parallels are
straight and horizontal, as in a true Mollweide, but the shapes of the
land masses are noticeably different.
<p>

You can get the original Mollweide projection back by setting
the <a href="Document/Graphics/Resources/mp.html#mpProjection"><em>mpProjection</em></a> resource to
"PseudoMollweide"</a>.
<p>

For some example scripts of these new features, see examples 16
through 19
at <a href="Applications/maponly.html">/Applications/maponly.shtml</a>.
<p>

<p>
<a name="NewFunctions5.1.0"></a>
<b>New functions</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/area_hi2lores.html"><strong>area_hi2lores</strong></a>, <a href="Document/Functions/Contributed/area_hi2lores_Wrap.html"><strong>area_hi2lores_Wrap</strong></a>

<dd>Interpolates from high resolution grids to low resolution grids
using local area averaging.
<p>

<dt><a href="Document/Functions/Built-in/bin_sum.html"><strong>bin_sum</strong></a>

<dd>Calculates binned sums and counts over multiple invocations of the procedure.
<p>

<dt><a href="Document/Functions/Built-in/bin_avg.html"><strong>bin_avg</strong></a>

<dd>Calculate gridded binned averages and counts.
<p>

<dt><a href="Document/Functions/Built-in/cfftb.html"><strong>cfftb</strong></a>, <a href="Document/Functions/Built-in/cfftf.html"><strong>cfftf</strong></a>,
<a href="Document/Functions/Built-in/cfftf_frq_reorder.html"><strong>cfftf_frq_reorder</strong></a>

<dd>These functions perform forward/backward complex fourier transforms
and reorder returned output to span -0.5 to 0.5. 
<p>

<dt><a href="Document/Functions/Built-in/conform_dims.html"><strong>conform_dims</strong></a>

<dd>This function is basically identical to <a href="Document/Functions/Built-in/conform.html"><strong>conform</strong></a>
except that you pass in the dimension sizes of the new array size that
you want to conform to, rather than the array itself. This method is
preferable because you don't need to create the array before using
this function.
<p>

<dt><a href="Document/Functions/Built-in/covcorm.html"><strong>covcorm</strong></a>

<dd>Calculates a covariance or correlation matrix.
<p>


<dt><a href="Document/Functions/Contributed/crossp3.html"><strong>crossp3</strong></a>

<dd> Compute cross products of multiple vectors of length 3.
<p>


<dt><a href="Document/Functions/Built-in/dz_height.html"><strong>dz_height</strong></a>

<dd>Calculates the height layer thicknesses at each grid point 
over varying surface terrain.
<p>

<dt><a href="Document/Functions/Built-in/evssm_lapack.html"><strong>evssm_lapack</strong></a>

<dd>Calculates the eigenvalues and eigenvectors of a real matrix
stored in symmetric storage mode.
<p>

<dt><a href="Document/Functions/Contributed/genNormalDist.html"><strong>genNormalDist</strong></a>

<dd>Generate a normal distribution give the mean and standard deviation.
<p>

<dt><a href="Document/Functions/Built-in/get_script_name.html"><strong>get_script_name</strong></a> and
<a href="Document/Functions/Built-in/get_script_prefix_name.html"><strong>get_script_prefix_name</strong></a>

<dd> These two built-in functions return the name of a script of commands for
NCL to run, if provided, at the command line.
<a href="Document/Functions/Built-in/get_script_prefix_name.html"><strong>get_script_prefix_name</strong></a> will strip any script name
tag, if it exists.
<p>

Note: <a href="Document/Functions/Built-in/get_script_name.html"><strong>get_script_name</strong></a> was originally an
unadvertised function in the <a
href="Document/Functions/Shea_util/index-2.html">shea_util.ncl</a> script, and
behaved slightly different in that it returned only the prefix of the
NCL script name. To get the behavior similar to this old version of
the function, use the new <a href="Document/Functions/Built-in/get_script_prefix_name.html"><strong>get_script_prefix_name</strong></a>
function, which doesn't require any script to be loaded in order to
use it.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_blank_plot.html"><strong>gsn_blank_plot</strong></a>

<dd>This function creates a blank plot. This can be useful
if you just need a canvas to draw on, or if you need to
further annotate an existing plot.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_attach_zonal_means.html"><strong>gsn_csm_attach_zonal_means</strong></a>

<dd>This function attaches a zonal means plot to the given map
plot. This function is basically the equivalent of setting the special
resource <a href="Document/Graphics/Resources/gsn.html#gsnZonalMean"><em>gsnZonalMean</em></a> to True when
calling <a href="Document/Graphics/Interfaces/gsn_csm_contour_map.html"><strong>gsn_csm_contour_map</strong></a>, so you
don't need to call this function unless you want to attach a zonal
means plot to a plot that wasn't created with <a href="Document/Graphics/Interfaces/gsn_csm_contour_map.html"><strong>gsn_csm_contour_map</strong></a>.
<p>

<dt><a href="Document/Functions/Built-in/kron_product.html"><strong>kron_product</strong></a>

<dd>Computes the Kronecker product for 2D matrices.
<p>


<dt><a href="Document/Functions/Contributed/latRegWgt.html"><strong>latRegWgt</strong></a>

<dd>Generates [sin(lat+dlat/2)-sin(lat-dlat/2) weights for equally
spaced (regular) global grids that will sum to 2.0.
<p>

<dt><a href="Document/Functions/Built-in/mjo_cross_coh2pha.html"><strong>mjo_cross_coh2pha</strong></a>

<dd>Calculates space-time coherence-squared and phase using the array
returned by mjo_cross_segment.
<p>

<dt><a href="Document/Functions/Built-in/mjo_cross_segment.html"><strong>mjo_cross_segment</strong></a>

<dd>Calculates space-time cross spectrum for a single time segment.
<p>

<dt><a href="Document/Functions/Contributed/NormCosWgtGlobe.html"><strong>NormCosWgtGlobe</strong></a>

<dd>Creates normalized cosine weights that sum to 2.0 just like
gaussian weights. This function is not really new, but it was
never documented before.
<p>

<dt><a href="Document/Functions/Contributed/numeric2int.html"><strong>numeric2int</strong></a>

<dd>Convert any numeric type to integer with options for rounding or
truncation.
<p>

<dt><a href="Document/Functions/Contributed/obj_anal_ic.html"><strong>obj_anal_ic</strong></a>

<dd>Iterative correction objective analysis (Cressman, Barnes). 
<p>

<dt><a href="Document/Functions/Contributed/pdfx.html"><strong>pdfx</strong></a>

<dd>Calculate the probability density distribution of a variable.
<p>

<dt><a href="Document/Functions/Contributed/quadroots.html"><strong>quadroots</strong></a>

<dd> Determine roots of a quadratic equation [ a*x^2 + b*x + c]. 
<p>

<dt><a href="Document/Functions/Contributed/rcm2points_Wrap.html"><strong>rcm2points_Wrap</strong></a>

<dd>Interpolates curvilinear grids (RCM, WRF, NARR) to user specified locations and retains meta data.
<p>

<dt><a href="Document/Functions/Contributed/rcm2rgrid_Wrap.html"><strong>rcm2rgrid_Wrap</strong></a>

<dd>Interpolates RCM, WRF and NARR grids to rectilinear lat/lon grid and retains meta data. 
<p>

<dt><a href="Document/Functions/Contributed/region_ind.html"><strong>region_ind</strong></a>

<dd>Returns the indices (subscripts) of two-dimensional
latitude/longitude arrays that span user specified latitude/longitude
boundaries.
<p>

<dt><a href="Document/Functions/Contributed/relhum_ttd.html"><strong>relhum_ttd</strong></a>

<dd>Calculate relative humidity given temperature and dew point temperature.
<p>

<dt><a href="Document/Functions/Contributed/replaceSingleChar.html"><strong>replaceSingleChar</strong></a>

<dd>Within a string replace one character with another character.
<p>

<dt><a href="Document/Functions/Contributed/rgrid2rcm_Wrap.html"><strong>rgrid2rcm_Wrap</strong></a>

<dd>Interpolates a rectilinear lat/lon grid to curvilinear grids like those used by the RCM, WRF and NARR models/datasets and retains meta data. 
<p>

<dt><a href="Document/Functions/Contributed/short2flt_hdf.html"><strong>short2flt_hdf</strong></a>

<dd>Converts values of type short to values of type float using the
"scale" and "offset" attributes (if present).
<p>

This function has been around awhile, but not documented.
<p>

<dt><a href="Document/Functions/Built-in/spcorr.html"><strong>spcorr</strong></a>

<dd>Computes Spearman rank order correlation coefficient.
<p>

<dt><a href="Document/Functions/Contributed/triple2grid_Wrap.html"><strong>triple2grid_Wrap</strong></a>

<dd>Places randomly-spaced data onto the nearest locations of a grid described by one-dimensional coordinate arrays and preserves meta data.
<p>

<dt><a href="Document/Functions/Built-in/utm2latlon.html"><strong>utm2latlon</strong></a>, <a href="Document/Functions/Built-in/latlon2utm.html"><strong>latlon2utm</strong></a>

<dd>Functions for converting between UTM and lat/lon coordinates.
<p>

<dt><a href="Document/Functions/Built-in/wk_smooth121.html"><strong>wk_smooth121</strong></a>

<dd>Specialized 1-2-1 smoother associated with Wheeler-Kiladis
space-time spectra.
<p>

<dt><a href="Document/Functions/Diagnostics/wkSpaceTime.html"><strong>wkSpaceTime</strong></a> (<a href="Document/Functions/Diagnostics/wkSpaceTime_cam.html"><strong>wkSpaceTime_cam</strong></a>)

<dd>Calculates Wheeler-Kiladis space-time spectra (using a generic CAM
interface).
<p>

<dt><a href="Document/Functions/Built-in/wmvect.html"><strong>wmvect</strong></a>, <a href="Document/Functions/Built-in/wmvectmap.html"><strong>wmvectmap</strong></a>,
<a href="Document/Functions/Built-in/wmvlbl.html"><strong>wmvlbl</strong></a>

<dd>These are basic functions primarily for use with non-gridded
data. For gridded data then you could use a vector plot with <a href="Document/Graphics/Resources/vc.html#vcGlyphStyle"><em>vcGlyphStyle</em></a> set to one of the appropriate
styles.
<p>

<dt><a href="Document/Functions/Contributed/ut_convert.html"><strong>ut_convert</strong></a>
<dd>Converts a time variable from one set of units to another.
<p>

<dt><a href="Document/Functions/Contributed/yyyymmdd_time.html"><strong>yyyymmdd_time</strong></a>

<dd> Creates a one-dimensional array containing year-month-day [yyyymmdd] values. 
<p>

</dl>
<p>

<a name="NewWRFFunctions5.1.0"></a>
<b>New and updated WRF-NCL functions</b><p>

<i>Special thanks to Cindy Bruyere of NCAR/MMM for her development of
the WRF-NCL visualization scripts, and to her and Soyoung Ha, also of
NCAR/MMM, for the addition, overhaul, and extensive testing of the
WRF-NCL analysis scripts</i>.
<p>

<dl>

<dt><a href="Document/Functions/Built-in/wrf_avo.html"><strong>wrf_avo</strong></a>
<dd>Calculates absolute vorticity from WRF model output.
<p>

<dt><a href="Document/Functions/Built-in/wrf_cape_2d.html"><strong>wrf_cape_2d</strong></a>
<dd>Computes maximum convective available potential energy (CAPE),
maximum convective inhibition (CIN), lifted condensation level (LCL),
and level of free convection (LFC).
<p>

<dt><a href="Document/Functions/Built-in/wrf_cape_3d.html"><strong>wrf_cape_3d</strong></a>
<dd>Computes convective available potential energy (CAPE) and
convective inhibition (CIN).
<p>

<dt><a href="Document/Functions/Built-in/wrf_dbz.html"><strong>wrf_dbz</strong></a>
<dd>Calculates simulated equivalent radar reflectivity factor [dBZ]
from WRF model output.
<p>

<dt><a href="Document/Functions/Built-in/wrf_eth.html"><strong>wrf_eth</strong></a>
<dd>Calculates equivalent potential temperature from WRF model output.
<p>

<dt><a href="Document/Functions/Built-in/wrf_ij_to_ll.html"><strong>wrf_ij_to_ll</strong></a>
<dd>Finds the nearest longitude, latitude locations to the specified
model grid indices (i,j).
<p>

<dt><a href="Document/Functions/Built-in/wrf_latlon_to_ij.html"><strong>wrf_latlon_to_ij</strong></a>
<dd>Replaced with <a href="Document/Functions/Built-in/wrf_ll_to_ij.html"><strong>wrf_ll_to_ij</strong></a>
<p>

<dt><a href="Document/Functions/Built-in/wrf_ll_to_ij.html"><strong>wrf_ll_to_ij</strong></a>
<dd>Finds the nearest model grid indices (i,j) to the specified
location(s) in longitude and latitude.
<p>


<dt><a href="Document/Functions/WRF_arw/wrf_overlays.html"><strong>wrf_overlays</strong></a>,
<a href="Document/Functions/WRF_arw/wrf_map_overlays.html"><strong>wrf_map_overlays</strong></a>

<dd>Functions to overlay multiple plots, created from other
ARW WRF plot functions. These functions replace the
soon-to-be-obsolete 
<a href="Document/Functions/WRF_arw/wrf_overlay.html"><strong>wrf_overlay</strong></a> and
<a href="Document/Functions/WRF_arw/wrf_map_overlay.html"><strong>wrf_map_overlay</strong></a> procedures.
<p>

<dt><a href="Document/Functions/Built-in/wrf_smooth_2d.html"><strong>wrf_smooth_2d</strong></a>
<dd>Updated to handle missing data.
<p>

<dt><a href="Document/Functions/Built-in/wrf_pvo.html"><strong>wrf_pvo</strong></a>
<dd>Calculates potential vorticity from WRF model output.
<p>

<dt><a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a>
<dd>Updated to add several new diagnostics:

<ul>
<li>"avo" - absolute vorticity [10-5 s-1]
<li>"cape_2d" - 2D fields mcape/mcin/lcl/lfc
<li>"cape_3d" - 3D fields cape and cin
<li>"dbz" - reflectivity [dBZ]
<li>"mdbz" - maximum reflectivity [dBZ]
<li>"geopt"/"geopotential" - full model geopotential [m2 s-2]
<li>"lat" - latitude
<li>"lon" - longitude
<li>"p"/"pres" - full model pressure [Pa]
<li>"pvo" - potential vorticity [PVU]
<li>"rh2" - 2m relative humidity [%]
<li>"ter" - model terrain height [m]
<li>"uvmet" - U and V components of wind rotated to earth coordinates
</ul>
<p>

<dt><a href="Document/Functions/WRF_arw/wrf_user_ll_to_ij.html"><strong>wrf_user_ll_to_ij</strong></a>, 
<a href="Document/Functions/WRF_arw/wrf_user_ij_to_ll.html"><strong>wrf_user_ij_to_ll</strong></a> 
<dd>Finds the nearest model grid indices (i,j) to the specified
location(s) in longitude and latitude (and vice versa).
<p>

<dt><a href="Document/Functions/WRF_arw/wrf_user_unstagger.html"><strong>wrf_user_unstagger</strong></a> 
<dd>Unstaggers an input variable along a specified dimension.
<p>

<dt><a href="Document/Functions/Built-in/wrf_interp_1d.html"><strong>wrf_interp_1d</strong></a>, <a href="Document/Functions/Built-in/wrf_interp_3d_z.html"><strong>wrf_interp_3d_z</strong></a>,
<a href="Document/Functions/Built-in/wrf_rh.html"><strong>wrf_rh</strong></a>, <a href="Document/Functions/Built-in/wrf_slp.html"><strong>wrf_slp</strong></a>, 
<a href="Document/Functions/Built-in/wrf_td.html"><strong>wrf_td</strong></a>, <a href="Document/Functions/Built-in/wrf_tk.html"><strong>wrf_tk</strong></a>,
<a href="Document/Functions/Built-in/wrf_uvmet.html"><strong>wrf_uvmet</strong></a>

<dd>Updated to attach named dimensions to the output variable.
<p>

</dl>

<p>
<a name="NewFunctionality5.1.0"></a>
<b>New functionality</b><p>

<dl>

<dt><a href="Document/Functions/Shea_util/boxplot.html"><strong>boxplot</strong></a>

<dd>This plotting function now recognizes the <a href="Document/Graphics/Resources/gsn.html#gsnMaximize"><em>gsnMaximize</em></a> resource.
<p>

<dt><a href="Document/Functions/Built-in/conform.html"><strong>conform</strong></a>
<dd>This function was updated to allow string input.
<p>


<dt>Support added for GRIB2 files from NWS National Digital Forecast Database
<dd>These files are available from
<a href="http://www.weather.gov/ndfd/anonymous_ftp.htm">http://www.weather.gov/ndfd/anonymous_ftp.htm</a>. (Thanks to Jennifer Adams, GrADS developer,
for bringing them to our attention.)
<p>

<dt>New and updated GRIB 1 NCEP tables
<dd>Support was added for the following GRIB 1 tables:
<ul>

<li><a href="Document/Manuals/Ref_Manual/ncep_133.html">US Weather Service - NCEP (Parameter table version 133)</a>
<li><a href="Document/Manuals/Ref_Manual/ncep_140.html">US Weather Service - NCEP Aviation World Area Forecast/ICAO (Parameter table version 140)</a>
<li><a href="Document/Manuals/Ref_Manual/ncep_141.html">US Weather Service - NCEP (Parameter table version 141)</a>
<li><a href="Document/Manuals/Ref_Manual/jma_3.html">Japanese Meteorological Agency (Parameter table version 3)</a>

</ul>

The following tables were extensively updated:

<ul>
<li><a href="Document/Manuals/Ref_Manual/ncep_127.html">US Weather Service - NCEP Oceanographic Parameters (Parameter table version 128)</a>
 
<li><a href="Document/Manuals/Ref_Manual/ncep_129.html">US Weather Service - NCEP (Parameter table version 129)</a> 

<li><a href="Document/Manuals/Ref_Manual/ncep_130.html">US Weather Service - NCEP Land Modeling and Land Data Assimilation (Parameter table version 130)</a>

<li><a href="Document/Manuals/Ref_Manual/ncep_131.html">US Weather Service - NCEP North American Regional Reanalysis (Parameter table version 131)</a>

</ul>


<p>

<dt>New GRIB 1 and 2 file option <code>TimePeriodSuffix</code>
<dd>A new file option for GRIB 1 and 2 files allows the user to suppress the time period suffix consisting of a numerical quantity and
a units indicator (e.g. '6h', meaning a 6 hour time period) from the ends of statistically-processed varables. 
This allows a user to concatenate variables from different files that for reasons too complicated to go into here differ
in the time period suffix, even though they are in fact simply different forecast times of the same variable.
By default the value of this option is <code>True</code>, meaning that the suffix appears. Use <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> to
set it <code>False</code>, which causes the time period suffix to be removed from all statistically-processed variables in NCL's representation of the file.
The part of the suffix that indicates the type of statistical processing (e.g. '_acc', meaning accumulation) remains.
Be aware that setting this option <code>False</code> can in some cases cause name collisions between variables that should be considered distinct.
In this case, variable names after the first instance have an incrementing numerical suffix, beginning with '_1', appended to disambiguate the names.

<p>

<dt>Simpler method for creating literal values for various integer types

<dd>You can now create NCL variables of type long, short, and byte on
the fly, using the special literals 'l', 'h', and 'b':
<p>

<pre>
 long_var  = 32l
 short_var = 5h
 byte_var  = 2b
</pre>

<b>Old way</b>:<p>

<pre>
 long_var = new(1,long)
 long_var = 32

 short_var = inttoshort(5)

 byte_var = inttobyte(2)
</pre>
<p>

<dt>New option to ncl_filedump and ncl_convert2nc to support GRIB 1 and 2 option <code>TimePeriodSuffix</code>
<dd>The option <code>TimePeriodSuffix</code> described above is supported in the NCL tools
<a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> and 
<a href="Document/Tools/ncl_filedump.html">ncl_filedump</a> as option <pre>[-tps]</pre>  The
default value is <code>True</code> -- setting this option causes the time period suffix
to be removed, as noted above.

<p>

<dt><a href="Document/Functions/Built-in/rcm2rgrid.html"><strong>rcm2rgrid</strong></a>, <a href="Document/Functions/Built-in/rgrid2rcm.html"><strong>rgrid2rcm</strong></a>,
<a href="Document/Functions/Built-in/rcm2points.html"><strong>rcm2points</strong></a>
<dd>These functions have been improved to make them significantly
faster in the case where you have multiple grids to interpolate.
<p>

<dt>Suffixes ".gr", ".gr1", and ".gr2" now recognized as GRIB 1 and 2
suffixes.
<dd><p>

<dt><a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a>
<dd>New attribute "BinLocs" is returned, which is an
array of the bin locations on the X axis.
<p>

<dt>Support added for a convention of setting GRIB1 subcenter octet to 98 (the ECMWF center number)
<dd>The French Weather Service apparently uses a convention of setting the GRIB1 subcenter octet
to the ECMWF center number to indicate that even though the file is not generated by ECMWF it 
uses ECMWF parameter tables and local definitions. NCL adds knowledge of this convention to allow certain
FWS files to be interpreted correctly. The convention is additionally honored for all ECMWF-associated 
countries and organizations on the theory that, even if it is only used in France, it is unlikely
that the subcenter octet will be set to the value 98 for any other reason. 
<p>

<dt><a href="Document/Functions/Pop_remap/PopLatLon.html"><strong>PopLatLon</strong></a>
<dd>This function was updated to recognize the grid destination (<em>grd_dst</em>)
"1.9x2.5".
<p>


<dt><a href="Document/Functions/Contributed/transpose.html"><strong>transpose</strong></a>

<dd> Handles one-dimensional variables. Improved documentation
<p>


<dt><a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a> / <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>

<dd>These functions were updated to add recognition of
calendars "360", "365" and "noleap". Thanks to David W.
Pierce, the developer of <a
href="http://meteora.ucsd.edu/~pierce/ncview_home_page.html">ncview</a>,
for these additions.
<p>

This <a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a> function was also updated to add a
new option for returning the dates as arrays of integers rather than
floats.
<p>

</dl>
<p>

<a name="AddfilesUpdate5.1.0"></a>
<b>Major upgrade for "addfiles"</b><p>

The file list variable type, which references multiple files as the return value of the 
<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a> function, has new functionality. Conforming variables aggregated
over the file set now are returned with attribute and coordinate variable metadata. 
Additionally, the leftmost aggregated dimension can now be subscripted correctly using
integer, coordinate, or vector subscripting. However, there is currently one caveat for vector subscripts
on the leftmost dimension: the array of vector subscripts must be non-decreasing. There can
be repeated indexes but no index in the array can be less than a previous index. Hopefully, this restriction
will be removed in a future release.
<p>

This new functionality replaces the need for
using <a href="Document/Functions/Contributed/addfiles_GetVar.html"><strong>addfiles_GetVar</strong></a> to
retrieve variables from a span of files. It will also run faster and be
more flexible.
<p>


<a name="NewColorTables5.1.0"></a>
<b>New color tables</b><p>

<ul>
<li><a href="Document/Graphics/ColorTables/amwg_blueyellowred.html">amwg_blueyellowred</a>
<li><a href="Document/Graphics/ColorTables/radar.html">radar</a>
</ul>
<p>

<a name="NewResources5.1.0"></a>
<b>New resources</b><p>

<dl>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnAboveYRefLineBarFillScales"><em>gsnAboveYRefLineBarFillScales</em></a> /
<a href="Document/Graphics/Resources/gsn.html#gsnBelowYRefLineBarFillScales"><em>gsnBelowYRefLineBarFillScales</em></a>

<dd>If <a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a> is set, <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChart"><em>gsnXYBarChart</em></a> is set to True, and <a href="Document/Graphics/Resources/gsn.html#gsnAboveYRefLineBarPatterns"><em>gsnAboveYRefLineBarPatterns</em></a> and/or <a href="Document/Graphics/Resources/gsn.html#gsnBelowYRefLineBarPatterns"><em>gsnBelowYRefLineBarPatterns</em></a> are set, then this
resource indicates what fill scales to use for the fill patterns.
Values less than 1.0 give you a more dense pattern.
<p>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnPanelScalePlotIndex"><em>gsnPanelScalePlotIndex</em></a>

<dd>This resource allows you to specify which plot being passed to
<a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a> is to be used to determine
the scale factor for resizing all the plots. This is useful if the
first plot is smaller than of the other plots in the list.
<p>
This resource will not be useful if your plots are very different in size.
<p>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnPolarTime"><em>gsnPolarTime</em></a> / <a href="Document/Graphics/Resources/gsn.html#gsnPolarUT"><em>gsnPolarUT</em></a>  

<dd>These resources allow you to turn on labeling using local time
instead of longitude labels, for plots generated by one of the <a
href="Document/Graphics/Interfaces/index.html">gsn_csm_<em>xxxx</em>_polar</a>
functions.
<p>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnXYFillColors"><em>gsnXYFillColors</em></a>, 
<a href="Document/Graphics/Resources/gsn.html#gsnXYAboveFillColors"><em>gsnXYAboveFillColors</em></a>,
<a href="Document/Graphics/Resources/gsn.html#gsnXYBelowFillColors"><em>gsnXYBelowFillColors</em></a>

<dd>These resources can be used to fill between Y curves in an XY plot
generated by <a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>.  See
<a href="Applications/xy.html#ex24">example 24</a>
on the <a href="Applications/xy.html">XY applications page</a>.
<p>

<dt><a href="Document/Graphics/Resources/lg.html#lgItemOrder"><em>lgItemOrder</em></a>

<dd>This resource allows you to change the ordering of legend
items. See <a href="Applications/legend.html#ex9">example 9</a> on the legend applications page for an
example.

</dl>
<p>

<b>Updated resources</b><p>

<dl>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnZonalMean"><em>gsnZonalMean</em></a>

<dd>If this resource is set to True, then a zonal mean XY plot will be
drawn next to a contour/map plot. This resource has been around for
awhile for the <a href="Document/Graphics/Interfaces/gsn_csm_contour_map_ce.html"><strong>gsn_csm_contour_map_ce</strong></a> function, and it now
works for the <a href="Document/Graphics/Interfaces/gsn_csm_contour_map.html"><strong>gsn_csm_contour_map</strong></a>
function (polar plots excepted).
<p>

<dt><a href="Document/Graphics/Resources/vp.html#vpClipOn"><em>vpClipOn</em></a>

<dd>This resource is now recognized by the <a href="Document/HLUs/Classes/XyPlot.html"><strong>XyPlot</strong></a>,
and hence if set to True, markers that fall outside the plotting area
will be clipped.  Note: to maintain backwards compatibility, this
resource defaults to False for xy plots.

</dl>

<p>
<a name="BugFixes5.1.0"></a>
<b>Bug fixes</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/cssgrid.html"><strong>cssgrid</strong></a>, <a href="Document/Functions/Built-in/csc2s.html"><strong>csc2s</strong></a> 

<dd>Fixed a bug in which if some of the input data arrays contained
missing values, they were not being ignored as advertised.
<p>

<dt><a href="Document/Functions/Built-in/dpres_plevel.html"><strong>dpres_plevel</strong></a> 
<dd>Fixed a bug which occurred when the surface pressure was exactly 1000hPa or 100000Pa. 
<p>

<dt><a href="Document/Functions/Contributed/eofunc_varimax_reorder.html"><strong>eofunc_varimax_reorder</strong></a> 

<dd>This function is actually called "eof_varimax_reorder" in versions
4.3.1 and 5.0.0. It was supposed to be "eofunc_varimax_reorder"; this
has been fixed in 5.1.0.

<p>

<dt><a href="Document/Graphics/Interfaces/index.html">gsn_csm</a> routines
that overlay vectors/streamlines and contours on the same plot.
<p>

<dd>Fixed a problem where the <a href="Document/Graphics/Resources/gsn.html#gsnAddCyclic"><em>gsnAddCyclic</em></a>
resource was not always being set correctly in gsn_csm functions that
overlay both contours and vectors in a single plot (<a href="Document/Graphics/Interfaces/gsn_csm_streamline_contour_map.html"><strong>gsn_csm_streamline_contour_map</strong></a>, <a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar.html"><strong>gsn_csm_vector_scalar</strong></a>, <a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_ce.html"><strong>gsn_csm_vector_scalar_map_ce</strong></a>, etc).
<p>

<dt>RasterFill contour mode
<dd>Fixed a bug that sometimes resulted in the data cells being slightly misaligned when plotted over a global map when 
in raster fill mode without smoothing. Also fixed a problem that caused irregular coordinates to be treated as regularly
spcaed when they were close (but not close enough) to a regular spacing. 
<p>

<dt>Memory bug

<dd>Fixed a significant bug that resulted in an unnecessary copy of a
data variable when assigned to a file variable with the (/ /) syntax
(to indicate that attributes are not to be copied). Even if you specify
that you don't want attributes written, NCL still needs to check to
make sure the _FillValue attributes are the same. If not, then it doesn't
try to change the file variable fill value (because you are not
copying attributes), but instead it has to make a copy of the variable
you are assigning in order to ensure that its missing values are
updated to match the fill value that is assigned to the file variable.
<p>

The logic was wrong and it was copying the variable even when
the fill values were the same.
<p>


<dt>GRIB 1 reader
<dd>
<ol>

<li>Fixed a bug that resulted in incorrect coordinates being generated for Lambert Conformal grids over
the Southern hemisphere.  

<li>In order to fix a problem reading WRF GRIB files, if a GRIB record has the grid number octet set to 0, it is treated
as meaning the same as if it were set to 255. Both these values are now assumed to mean that the grid is defined in
the GDS (Grid Description Section) part of the GRIB record. This change will be visible to users: it will result in changes 
to the names of dimensions, coordinate variables, and regular variables. Note that the developers of the WRF GRIB output code 
have a agreed that setting this octet to 0 is an error on their part and that in the future it will be set to 255. This change
to NCL ensures that current and future WRF GRIB files will have the same naming scheme when opened in NCL.

<li>Modified the scaling of certain instances of the 'Dx' and 'Dy' coordinate variable attributes to ensure that the units
for these values can uniformly be assumed to be in meters. Prior to the change, in a few cases the units were kilometers.

<li>Fixed a problem that resulted in a core dump when the record
representing the first horizontal slice of a variable array was
missing.

</ol>

<p>

<dt>GRIB 2 reader
<dd>
<ol>

<li>Modified the way the GRIB2 codetable path is determined. Now if the NIO_GRIB2_CODETABLES environment variable
is set it takes precedence over the common path found through NCARG_ROOT. 

<li>Fixed a problem that resulted in a core dump when the record
representing the first horizontal slice of a variable array was
missing.

</ol>

<p>

<dt>NetCDF reader/writer

<dd>Fixed a problem that occurred when a single execution of NCL
results in more than 32767 separate NetCDF file opens and closes. The
id returned by the NetCDF library can become a negative
value in this case. NCL was treating this condition as an error when
it is actually legitimate.

<p>

<dt>OPeNDAP-enabled versions of NCL

<dd>Fixed a bug that resulted in the following error when exiting NCL
after opening any local NetCDF file or any remote file served by OPeNDAP:

<pre>ncclose: ncid 0: NetCDF: Not a valid ID</pre>

If a local file is opened for writing this error could result in loss of data in the file. The workaround for
earlier versions of NCL is either to ensure that all NCL file variables are deleted before 
exiting, or, to use <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> to set both the options <code>DefineMode</code>
and <code>SuppressClose</code> to <code>False</code>.

<p>

<dt>Problem involving files with very large dimensions (larger than
around 10 million elements)

<dd>Fixed a bug that resulted in the return of incorrect data when
requesting a variable subset from a file where one of the dimensions
has more than around 10 million elements.

</dl>
<p>

<hr><hr>
<A NAME="5.0.0"></A>
<h2>Version 5.0.0</h2>
<h3>6 November 2007</h3>

<ul>
<li><a href="#OpenSource5.0.0">Open source!</a>
<li><a href="#SCRIPCheckInput5.0.0">New tool for checking validity of SCRIP input grid files</a>
<li><a href="#NewFunctions5.0.0">New functions</a>
<li><a href="#NewFunctionality5.0.0">New functionality</a>
<li><a href="#NewResources5.0.0">New resources</a>
<li><a href="#PerformanceEnhancements5.0.0">Performance enhancements</a>
<li><a href="#BugFixes5.0.0">Bug fixes</a>
</ul>
<p>

<a name="OpenSource5.0.0"></a>
<b>Open source</b><p>

This is our first official open source release for NCL.
<p>

This release also includes full source code and binaries for <a
href="http://www.ncarg.ucar.edu/">NCAR Graphics</a>, so you no longer
have to install the two packages separately.
<p>

<a name="SCRIPCheckInput5.0.0"></a>
<b>New tool for checking validity of SCRIP input grid files</b><p>

A new tool called "<a
href="Document/Tools/scrip_check_input.html">scrip_check_input</a>"
tests whether the coordinates of all cells in a <A
HREF="http://climate.lanl.gov/Software/SCRIP/">SCRIP</A> input grid
file are entered in counterclockwise order and also tests whether the
cell centers are in the interior or on the boundary of the cells.
<p>

<a name="NewFunctions5.0.0"></a>
<b>New functions</b><p>

<dl>
<dt><a href="Document/Functions/Contributed/generate_unique_indices.html"><strong>generate_unique_indices</strong></a>

<dd>Generate unique, random integer subscripts. 
<p>
<dt>Suite of color conversion functions<p>

<dd><a href="Document/Functions/Built-in/hlsrgb.html"><strong>hlsrgb</strong></a> - Converts HLS color values to RGB.<br>
<dd><a href="Document/Functions/Built-in/hsvrgb.html"><strong>hsvrgb</strong></a> - Converts HSV color values to RGB.<br>
<dd><a href="Document/Functions/Built-in/rgbhls.html"><strong>rgbhls</strong></a> - Converts RGB color values to HLS.<br>
<dd><a href="Document/Functions/Built-in/rgbhsv.html"><strong>rgbhsv</strong></a> - Converts RGB color values to HSV.<br>
<dd><a href="Document/Functions/Built-in/rgbyiq.html"><strong>rgbyiq</strong></a> - Converts RGB color values to YIQ.<br>
<dd><a href="Document/Functions/Built-in/yiqrgb.html"><strong>yiqrgb</strong></a> - Converts YIQ color values to RGB.<br>
<p>

<dt><a href="Document/Graphics/Interfaces/maximize_output.html"><strong>maximize_output</strong></a>

<dd>This is not a new function, but one that hadn't been
documented. It allows you to maximize the size of plots that have been
drawn in a single frame.
<p>

<dt><a href="Document/Functions/Built-in/status_exit.html"><strong>status_exit</strong></a>

<dd>A new version of the <a href="Document/Functions/Built-in/exit.html"><strong>exit</strong></a> procedure that allows
the user to pass an exit status code to the operating system.
<p>

<dt><a href="Document/Functions/Built-in/vintp2p_ecmwf.html"><strong>vintp2p_ecmwf</strong></a>

<dd>Interpolates data at multidimensional pressure levels to constant
pressure coordinates and uses an ECMWF formulation to extrapolate
values below ground.
<p>

</dl>

<a name="NewFunctionality5.0.0"></a>
<b>New functionality</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/stat2.html"><strong>stat2</strong></a>, <a href="Document/Functions/Built-in/stat4.html"><strong>stat4</strong></a>,
<a href="Document/Functions/Built-in/stat_medrng.html"><strong>stat_medrng</strong></a>, <a href="Document/Functions/Built-in/stat_trim.html"><strong>stat_trim</strong></a>,
<a href="Document/Functions/Built-in/dim_stat4.html"><strong>dim_stat4</strong></a>

<dd>These functions were updated so that if a subsection of the input
is all missing, a fatal error is no longer issued. Rather, all missing
values will be returned in the appropriate locations in the output
array.

<dt><a href="Document/Functions/Built-in/system.html"><strong>system</strong></a>

<dd>This function was updated to allow the user to turn off paging of
output from this command, if desired.
</dl>


<a name="NewResources5.0.0"></a>
<b>New resources</b><p>

<dl>
<dt><a href="Document/Graphics/Resources/cn.html#cnLabelBarEndStyle"><em>cnLabelBarEndStyle</em></a>

<dd>This resource allows you to select from among three styles for the
ends of contour plot labelbar. The <a href="Document/Graphics/Resources/cn.html#cnLabelBarEndLabelsOn"><em>cnLabelBarEndLabelsOn</em></a> resource is now
deprecated and replaced with this one.

</dl>

<a name="PerformanceEnhancements5.0.0"></a>
<b>Performance enhancements</b><p>

<ul>

<li>The GRIB code was improved to eliminate unnecessary memory usage when reading a 
variable that contains "missing" records. (Missing records occur when a GRIB file 
does not have records corresponding to all the elements of its dimensions as defined by NCL.)
Formerly NCL created an array filled with missing values for each missing record.
Now it only creates a single such array for each distinct grid in the file and
shares this array among all the missing records of each variable that shares the grid.<p>

<li>Along with the above change, the <a
href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> script
was modified to copy very large variables in multiple chunks using
loops and subscripting.  Given large enough variables (greater than
250 MB), this can dramatically reduce memory requirements on the
system without adversely affecting execution time.

</ul>
<p>

<a name="BugFixes5.0.0"></a>
<b>Bug fixes</b><p>
<ul>
<li><a href="Document/Functions/Built-in/wmstnm.html"><strong>wmstnm</strong></a> - correction to the wind barb directions when
station model data is displayed over a map.
<p>

<li><a href="Document/Functions/Built-in/v5d_write.html"><strong>v5d_write</strong></a> - fixed a bug whereby input values for the number
of timesteps and the number of variables were tested improperly.  Documentation has
been updated to reflect this fix, and the proper calling sequence for this function.
<p>

<li>The NCL object table code was reworked to remove a limit of 2^31 - 1 on the total 
number of objects that could be created. The table was also reconfigured to improve performance
for complex scripts where very large numbers of objects are created. 
<p>

<li>The <a href="Document/Functions/Built-in/exit.html"><strong>exit</strong></a> procedure now ensures that graphics and data files are properly
closed before NCL's execution ends.

</ul>

<hr><hr>
<A NAME="4.3.1"></A>
<h2>Version 4.3.1</h2>
<h3>10 August 2007</h3>
<p>

<ul>
<li><a href="#ARWWRFRoutines">ARW WRF functions</a>
<li><a href="#PartialNetCDF4Support">Partial support for NetCDF 4</a>
<li><a href="#NewFunctions4.3.1">New functions</a>
<li><a href="#ThreeDRoutines">Low-level three-dimensional visualization routines</a>
<li><a href="#NewFunctionality4.3.1">New functionality</a>
<li><a href="#NewResources4.3.1">New resources</a>
<li><a href="#BugFixes4.3.1">Bugs fixed</a>
</ul>

<p>

<hr>

<a name="ARWWRFRoutines"></a>
<b>ARW WRF functions</b><p>

Added a suite of <a href="Document/Functions/WRF_arw/index-2.html">routines</a>
to aid in visualizing ARW WRF model data.

<ul>
<a href="Document/Functions/WRF_arw/wrf_contour.html"><strong>wrf_contour</strong></a> - Creates a contour
plot from ARW WRF model output.<br>

<a href="Document/Functions/WRF_arw/wrf_map.html"><strong>wrf_map</strong></a> - Creates a map
background for ARW WRF model data.<br>

<a href="Document/Functions/WRF_arw/wrf_map_overlay.html"><strong>wrf_map_overlay</strong></a> - Overlays
different plot id's over a map background.<br>

<a href="Document/Functions/WRF_arw/wrf_map_zoom.html"><strong>wrf_map_zoom</strong></a> - Zooms into a
portion of the ARW WRF model domain, and creates a map background.<br>

<a href="Document/Functions/WRF_arw/wrf_overlay.html"><strong>wrf_overlay</strong></a> - Overlays multiple
plots, created from other ARW WRF plot functions.<br>

<a href="Document/Functions/WRF_arw/wrf_user_getvar.html"><strong>wrf_user_getvar</strong></a> - Extracts data
from ARW WRF model output, and does basic diagnostics calculations.<br>

<a href="Document/Functions/WRF_arw/wrf_user_intrp3d.html"><strong>wrf_user_intrp3d</strong></a> - Interpolates
ARW WRF model data vertically or horizontally.<br>

<a href="Document/Functions/Built-in/wrf_latlon_to_ij.html"><strong>wrf_latlon_to_ij</strong></a> (built-in function) - updated to
return missing values if any of the input lat/lon values are
out-of-range.<br>

<a href="Document/Functions/WRF_arw/wrf_user_list_times.html"><strong>wrf_user_list_times</strong></a> - Extracts
the list of available times in the ARW WRF model output.<br>

<a href="Document/Functions/WRF_arw/wrf_vector.html"><strong>wrf_vector</strong></a> - Creates a vector
plot from ARW WRF model output.<br>

</ul>
<p>

<a name="PartialNetCDF4Support"></a>
<b>Partial support for NetCDF 4</b><p>

For some systems <a href="#FootNote"><font
color=red>(<b>*</b>)</font></a>, you can now specify a "Format" of
"NetCDF4Classic" in the <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> procedure to
create a file using the NetCDF 4 classic model format. The classic
model constrains the interface to the constructs provided by NetCDF 3
and earlier. However, the underlying file format, like that of all
NetCDF 4 files, is HDF 5. Files written in this format can take
advantage of the built-in file compression available in HDF 5. Use the
"CompressionLevel" option to enable compression. Also the HDF 5 format
removes virtually all restrictions on file and individual variable
size. NCL version 4.3.1 provides beta-level support for this format
because NetCDF 4 and the release of HDF 5 that it depends on are both
still in the beta-testing phase of development. It should probably not
be used for mission-critical file creation.
<p>

This option is not required for reading NetCDF 4 classic files. If
your version of NCL supports NetCDF 4 <a href="#FootNote"><font
color=red>(<b>*</b>)</font></a>, then it will be able to automatically
detect whether you have a NetCDF 3 or 4 file.
<p>

<a name="FootNote"></a> <font color=red>(<b>*</b>)</font> Some systems
(like any 64-bit system) do not have support for NetCDF 4 because the
NetCDF 4 software has not yet been ported and/or tested on those
systems.  You can quickly tell if your version of NCL has NetCDF 4
support by running ncl interactively and typing one line:

<pre>
  setfileoption("nc","format","netcdf4classic")
</pre>

If you get a warning message:

<pre>
warning:FileSetFileOption: invalid value supplied for option format
</pre>

then your version of NCL does not have NetCDF 4 support. If your
version <i>does</i> have NetCDF 4 support, then you can further
control the level of compression with:

<pre>
    setfileoption("nc","compressionlevel",5)
</pre>

The third argument can be any value from 1 to 9, where 9 is the  highest
level of compression. See the <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> documentation
for more information.
<p>

<a name="NewFunctions4.3.1"></a>
<b>New functions</b><p>

<dl>

<dt><a href="Document/Functions/Contributed/dim_sum_wgt_Wrap.html"><strong>dim_sum_wgt_Wrap</strong></a>

<dd>Computes the weighted sum of a variable's rightmost dimension at
all other dimensions *and* retains metadata.
<p>

<dt><a href="Document/Functions/Contributed/eofunc_varimax_reorder.html"><strong>eofunc_varimax_reorder</strong></a>
<dd>Reorder the results returned by <a href="Document/Functions/Built-in/eof_varimax.html"><strong>eof_varimax</strong></a> into
descending order by percent variance explained.
<p>

<dt><a href="Document/Functions/Built-in/filwgts_lanczos.html"><strong>filwgts_lanczos</strong></a>
<dd>Calculates one-dimensional filter weights. This is not a
new function, but a renaming of the old
<a href="Document/Functions/Built-in/filwgts_lancos.html"><strong>filwgts_lancos</strong></a> function. The old function will
remain intact for backwards compatibility.
<p>

<dt><a href="Document/Functions/Contributed/dim_sum_wgt_Wrap.html"><strong>dim_sum_wgt_Wrap</strong></a>
<dd>Computes the weighted sum of a variable's rightmost dimension at
all other dimensions and retains metadata.
<p>

<dt>Suite of gc_<i>xxxx</i> functions<p>

<dd>
<a href="Document/Functions/Built-in/gc_aangle.html"><strong>gc_aangle</strong></a> - finds the acute angle between two great
circles on the globe.<br>

<a href="Document/Functions/Built-in/gc_clkwise.html"><strong>gc_clkwise</strong></a> - tests clockwise/counterclockwise
ordering of points on spherical polygon.<br>

<a href="Document/Functions/Built-in/gc_dangle.html"><strong>gc_dangle</strong></a> - finds the directed angle between two
great circles having a specified intersection point.<br>

<a href="Document/Functions/Built-in/gc_inout.html"><strong>gc_inout</strong></a> - determines if a specified point is
inside or outside of a spherical polygon.<br>

<a href="Document/Functions/Built-in/gc_onarc.html"><strong>gc_onarc</strong></a> - determines if a point on the globe lies
on a specified great circle arc.<br>

<a href="Document/Functions/Built-in/gc_pnt2gc.html"><strong>gc_pnt2gc</strong></a> - finds the angular distance from a point
to a great circle.<br>

<a href="Document/Functions/Built-in/gc_qarea.html"><strong>gc_qarea</strong></a> - finds the area of a quadrilateral patch
on the unit sphere.<br>

<a href="Document/Functions/Built-in/gc_tarea.html"><strong>gc_tarea</strong></a> - finds the area of a triangular patch on
the unit sphere.
<p>

<dt><a href="Document/Functions/Contributed/getVarFillValue.html"><strong>getVarFillValue</strong></a>

<dd>Retrieves the <a href="Document/Language/fillval.html">missing value</a> of a
variable; otherwise, it returns the default _FillValue.
<p>

<dt><a href="Document/Functions/Built-in/poisson_grid_fill.html"><strong>poisson_grid_fill</strong></a>
<dd>Replaces all _FillValue values in a grid with values derived from
solving Poisson's equation via relaxation.
<p>

</dl>

<a name="ThreeDRoutines"></a>
<b>Low-level three-dimensional visualization routines</b><p>

A suite of <a href="Applications/tdpack.html">3D visualization</a>
routines based on the low-level <a href="http://www.ncarg.ucar.edu//supplements/tdpack/">TDPACK</a> package were added.  There are
too many to list here, but you can see them by visiting the <a
href="Document/Functions/graphics_routines.html">graphics
routines</a> page, and looking at the functions that start with
"td".
<p>

<a name="NewFunctionality4.3.1"></a>
<b>New functionality</b><p>

<ul>

<li><a href="Document/Functions/Built-in/betainc.html"><strong>betainc</strong></a> - missing values are now recognized
and handled accordingly.<p>

<li><a href="Document/Functions/Built-in/write_matrix.html"><strong>write_matrix</strong></a> - updated to handle
data of type short and byte.<p>


<li><a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> - fundamental change in the
writing of netCDF files - the "SuppressClose" and "DefineMode" options
now both default to True. Also, the addition of the "NetCDF4Classic"
value for the "Format" option. See the section on <a
href="#PartialNetCDF4Support">partial support for NetCDF 4</a>.


<p>
In previous versions, when you wrote data to a netCDF file, the netCDF
file was opened and closed before and after every write.  You could
turn this off by using <a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> to set the
"SuppressClose" option to True. This is now the default, which should
improve performance.
<p>

In previous versions, also, the "DefineMode" option was set to False
by default, which meant that each write operation was performed
atomically. It now defaults to True, which can improve performance
dramatically if care is taken to define all dimensions, attributes,
and variables and assign attribute values before writing actual data
to the file.
<p>

<li><a href="Document/Functions/Built-in/stringtodouble.html"><strong>stringtodouble</strong></a> - updated to recognize 'd' and
'D' as additional double-specific exponent specifiers optionally
substituting for 'e' and 'E'.
<p>

<li>New options "-itime" and "-ftime" in <a
href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a> and <a
href="Document/Tools/ncl_filedump.html">ncl_filedump</a>

</ul>


<a name="NewResources4.3.1"></a>
<b>New resources</b><p>

<ul>
<li><a href="Document/Graphics/Resources/gsn.html#gsnDebugWriteFileName"><em>gsnDebugWriteFileName</em></a> - a resource to
help facilitate the debugging of NCL gsn_xxxx and gsn_csm_xxxx
visualization scripts.
<p>

If you set this resource to a string and rerun the plotting script you
are having problems with, then it will write the data being plotting
and the plot resources and their values to a new netCDF file. It will
also create a new NCL script that reads in this new netCDF file and
sets all the same plot options, so that your plot can be recreated
identically.  This prevents users from having to send us their full
scripts and data.  The new files will be called <i>xxx</i>.nc,
<i>xxx</i>.ncl, and
<i>xxx</i>.res, where <i>xxx</i> is what the resource
is set to.
<p>

To use this resource before version 4.3.1 is available, download <a
href="NclScripts/gsn_code.ncl.html">gsn_code.ncl.debug</a> and <a
href="NclScripts/gsn_csm.ncl.html">gsn_csm.ncl.debug</a>,
put them in $NCARG_ROOT/lib/ncarg/nclscripts/csm (or wherever you want),
and then load these scripts instead of the original ones:

<pre>
  load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl.debug"
  load "$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_csm.ncl.debug"
</pre>

Rerun your script with res@gsnDebugWriteFileInfo set to whatever
string you like, and then you can give us the resultant new
netCDF and NCL script.

</ul>

<a name="BugFixes4.3.1"></a>
<b>Bugs fixed</b><p>

<ul>

<li><a href="Document/Functions/Shea_util/ShadeCOI.html"><strong>ShadeCOI</strong></a> - fixed a bug
in which the function would fail if the input "time" variable was
not a float.<p>

<li><a href="Document/Functions/Built-in/triple2grid.html"><strong>triple2grid</strong></a> - fixed a serious bug. Please
see the function documentation for more information.
<p>

<li>Fixed a problem encountered in reading a netCDF file where the
data variable type was float, there was no _FillValue, but there was a
missing_value attribute of type double. Since "MissingToFillValue" is True
by default, NCL was creating a virtual _FillValue of the same type and
value as the missing_value. This resulted in NCL becoming confused
when the file variable was assigned to a regular variable because the
_FillValue attribute of regular variables is not allowed to be
anything other than the same type as the variable.
<p>

This is being fixed by overriding the MissingToFillValue setting and
refusing to create the virtual _FillValue. The following warning is
issued for each such variable:

<pre>
    warning:NetOpenFile: MissingToFillValue option set True, but missing_value
    attribute and data variable (x) types differ: not adding virtual _FillValue
    attribute
</pre>
<p>

<li>Fixed a problem with reading a NetCDF file when a 1D variable and
a dimension name have the same name, but the 1D variable is not a
coordinate variable and is a different size from the dimension it
shares a name with.
<p>

<li>Fixed a problem in the GRIB1 reader that resulted in a core dump when
reading files that contain GDS grids of the same type but different sizes.

</ul>
<p>

<hr><hr>
<A NAME="4.3.0"></A>
<h2>Version 4.3.0</h2>
<h3>1 May 2007</h3>
<p>

<ul>
<li><a href="#GRIB2Reader">New GRIB2 reader</a>
<li><a href="#NewGRIB1and2features">New features available for both GRIB 1 and 2</a>
<li><a href="#GRIB1ReaderInterface">Important changes to GRIB1 reader interface - PLEASE READ</a>
<li><a href="GRIB1ReaderChanges.html">Other changes to the GRIB1 reader</a>
<li><a href="#GetFillValue">Possible incompatible change to getFillValue function</a>
<li><a href="#NewFunctions">New functions</a>
<li><a href="#NewFunctionality">New functionality</a>
<li><a href="#NewResources">New resources</a>
<li><a href="#NewColorTables">New color tables</a>
<li><a href="#ImportantBugFixes">Important bug fixes</a>
</ul>

<hr>

<h2><a name="GRIB2Reader">New GRIB2 reader</a></h2>
<p>

This version of NCL includes a new GRIB2 reader. GRIB2 files are
supported by <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>, <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>,
<a href="Document/Tools/ncl_filedump.html">ncl_filedump</a>, and <a
href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a>.
<p>

Detailed information is available in the "<a
href="Document/Manuals/Ref_Manual/NclFormatSupport.html">Information
on supported data formats</a>" section of the
<i><a href="Document/Manuals/Ref_Manual/index.html">NCL Reference Manual</a></i>.


<h2><a name="NewGRIB1and2features">New features available for both GRIB 1 and 2</a></h2>

<ul>

<li>NCL now supports GRIB files containing ensemble forecasts with multiple ensemble members or
probability forecasts (which are derived from ensemble forecasts) with multiple thresholds. 
These files are represented with an "ensemble" or "probability" dimension. Actually the ensemble
dimension (but not the probability dimension) has been available since 4.2.0.a34 but was inadvertently
not mentioned in those release notes. These dimensions will be described in
more detail in the "<a
href="Document/Manuals/Ref_Manual/NclFormatSupport.html">Information
on supported data formats</a>" section of the
<i><a href="Document/Manuals/Ref_Manual/index.html">NCL Reference Manual</a></i>.

<p>

<li>A new GRIB file option named "SingleElementDimensions"
allows the user to specify that variables with
only a single initial time, forecast time, level,
ensemble or probability value, usually handled as attributes, be treated as 
containing single element dimensions. The option allows any or 
all of these attributes to be turned into dimensions provided they have an 
actual value. This is described in more detail in the 
<a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> procedure documentation.


</ul>


<h2><a name="GRIB1ReaderInterface">Important changes to the GRIB1 reader interface - PLEASE READ</a></h2>

<ul>

<li><font color=red><b>Fundamental change to reading of GRIB1
files</b></font> - the default type for the "initial_time" coordinate
array has been changed from "string" to "numeric".
<p>

Prior to version 4.3.0, NCL used an array of strings to represent
the coordinate values of an initial time dimension. This
representation proved to be problematic, both because it did not
conform to standard CF and COARDS conventions, and because it was
difficult to use in a context where numerical properties such as
monotonicity were usually expected.
<p>

To change the type back to "string", you can set the
"InitialTimeCoordinateType" option in the
<a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> procedure:
<p>

<pre>
  setfileoption ("grb","InitialTimeCoordinateType","string")
</pre>


<li><font color=red><b>Change to default algorithm used for dealing
with thinned grids on a GRIB file</b></font> - the default used to be
linear interpolation, but since cubic interpolation has been shown to
produce better results, we've made cubic interpolation the default.
<p>

To change the type back to "linear", you can set the
"ThinnedGridInterpolation" option in the
<a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a> procedure:
<p>

<pre>
  setfileoption ("grb","ThinnedGridInterpolation","linear")
</pre>

"Linear" is still the default for bitmask arrays.
<p>

</ul>

<h2><a name="GetFillValue">Possible incompatible change to getFillValue function</a></h2>

Prior to version 4.3.0, <a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a> would return the default
_FillValue if a variable did not have _FillValue associated with
it. 
<p>

For example, in the line below:

<pre>
  q = <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a>( 10, <a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a>(w), <a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a>(w))
</pre>

if "w" is of type "float" and if "w" did not have a _FillValue, then
<a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a> would return the
_FillValue for a variable of type "float".  Hence,
q@_FillValue = -999. In some cases this result was not
desired.
<p>

In release a034, the string "No_FillValue" was introduced for use
within the <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> statement. Use of "No_FillValue"
as the third argument of <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> would result
in no _FillValue being assigned to "q". 
<p>

A side effect of this new behavior is that the following will result
in a fatal error:

<pre>
  q@_FillValue = <a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a>(w)
</pre>

if the variable has no _FillValue associated with it. The reason
is the the string "No_FillValue" can not be assigned to "q"
unless q is of type string.
<p>

It should be noted that <a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a> was only intended to be used
within the <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> statement.
<p>


<h2><a name="GRIB1ReaderChanges">Other changes to the GRIB1 reader</a></h2>

<ul>

<li>The GRIB1 reader can now handle files that are greater than 2GB in size.

<p>

<li>The built-in GRIB1 parameter tables describing data from the DWD
(German National Meteorological Service) have been updated to reflect new
variables.  As well, new tables have been added.  These updated and new tables
are referenced in the 
<i><a href="Document/Manuals/Ref_Manual/NclFormatSupport.html#GRIB">NCL Reference Manual</a></i>
section for GRIB data.

<p>

<li>NCL now recognizes a DWD-specific extension that allows it to distinguish between satellite image
records that all have the same parameter number and parameter table version.

<p>

<li>NCL also recognizes the DWD convention for specifying hybrid level values.

<p>

<LI>The GRIB1 reader has been modified to handle varying
time units for variables that have records with different time units
indicators.  See:<p>

<a
href="http://www.nco.ncep.noaa.gov/pmb/docs/on388/table4.html">http://www.nco.ncep.noaa.gov/pmb/docs/on388/table4.html</a>
<P>

If in parsing a record that belongs to a particular variable it
encounters a time unit indicator different from the established
indicator, it compares them and chooses the one with the shortest
duration to be the common unit.  Then it sets the time period for each
record based on converting it into the common units. For periods of a
month or greater, this is currently not entirely accurate, because it
is based on a year of 365.25 days and the average number of hours in a
month. However, because no files of this type have yet been
encountered (and may never be), it does not seem worthwhile to develop
anything more accurate at this point. The code does print warnings
(probably too many) if this situation is encountered.

<p>

<li>The GRIB1 reader prints more variable attributes. An attribute called <i>parameter_table_version</i>
contains the parameter table version to which the variable parameter number belongs. If <i>forecast_time</i>
is an attribute (no forecast_time dimension is associated with the variable) an associated attribute called
<i>forecast_time_units</i> gives the units of the forecast_time value.


</ul>

<h2><a name="NewFunctions">New functions</a></h2>
<p>

<dl>

<dt><a href="Document/Functions/Built-in/cumsum.html"><strong>cumsum</strong></a>
<dd>Calculates the cumulative sum.

<dt><a href="Document/Functions/Built-in/dim_cumsum.html"><strong>dim_cumsum</strong></a>
(<a href="Document/Functions/Contributed/dim_cumsum_Wrap.html"><strong>dim_cumsum_Wrap</strong></a>)

<dd>Calculates the cumulative sum along the rightmost dimension (and
retains metadata).

<dt><a href="Document/Functions/Built-in/dpres_plevel.html"><strong>dpres_plevel</strong></a> 
(<a href="Document/Functions/Contributed/dpres_plevel_Wrap.html"><strong>dpres_plevel_Wrap</strong></a>)

<dd>Calculates the pressure layer thicknesses of a constant pressure
level coordinate system (and retains metadata).

<dt><a href="Document/Functions/Built-in/fft2db.html"><strong>fft2db</strong></a>

<dd> Performs a two-dimensional discrete backward Fourier 
transform (Fourier synthesis). 

<dt><a href="Document/Functions/Built-in/fft2df.html"><strong>fft2df</strong></a>

<dd>Performs a two-dimensional discrete forward Fourier 
    transform (i.e., Fourier analysis) of a real periodic array

<dt><a href="Document/Graphics/Interfaces/gsn_contour_shade.html"><strong>gsn_contour_shade</strong></a>

<dd>Shades contour regions given low and/or high values using colors or patterns. 

<dt><a href="Document/Graphics/Interfaces/gsn_table.html"><strong>gsn_table</strong></a>

<dd>Draws a table with text.

<dt><a href="Document/Functions/Contributed/ind_nearest_coord.html"><strong>ind_nearest_coord</strong></a>
<dd>Determines indices of locations closest to a coordinate array.

<dt><a href="Document/Functions/Contributed/indStrSubset.html"><strong>indStrSubset</strong></a>

<dd>Returns the indices corresponding to the location of the
substring, if it is a subset of the other given string.

<dt><a href="Document/Functions/Contributed/isStrSubset.html"><strong>isStrSubset</strong></a>

<dd>Returns True or False if one string is a subset of another string. 

<dt><a href="Document/Functions/Contributed/mod.html"><strong>mod</strong></a>

<dd>Emulates the Fortran "mod" intrinsic function.

<dt><a href="Document/Functions/Contributed/printMinMax.html"><strong>printMinMax</strong></a>

<dd>Prints the minimum and maximum values of a variable.

<dt><a href="Document/Functions/Built-in/student_t.html"><strong>student_t</strong></a>

<dd>Calculates the two-tailed probability of the Student-t distribution.

<dt><a href="Document/Functions/Built-in/where.html"><strong>where</strong></a>

<dd>Performs array assignments based on a conditional array.

</dl>

<h2><a name="NewFunctionality">New functionality</a></h2>

<dl>

<dt><a href="Document/Functions/Built-in/cz2ccm.html"><strong>cz2ccm</strong></a>

<dd>This function was updated to allow "phis" to be three dimensions.

<dt><a href="Document/Functions/Built-in/eofunc.html"><strong>eofunc</strong></a>
<dd>The scaled eigenvalues are now returned.

<dt><a href="Document/Functions/Built-in/eofunc_varimax.html"><strong>eofunc_varimax</strong></a>

<dd>Previously, this function (a) did not return the percent
variance explained and (b) did not allow missing (_FillValues).
Both issues have been addressed. Additional options have been
added to specify the form of the returned matrix.

<dt><a href="Document/Functions/Built-in/fbindirread.html"><strong>fbindirread</strong></a>, <a href="Document/Functions/Built-in/fbindirwrite.html"><strong>fbindirwrite</strong></a>,
<a href="Document/Functions/Built-in/fbinrecread.html"><strong>fbinrecread</strong></a>, <a href="Document/Functions/Built-in/fbinrecwrite.html"><strong>fbinrecwrite</strong></a>,
<a href="Document/Functions/Built-in/fbinnumrec.html"><strong>fbinnumrec</strong></a>

<dd>These functions were updated to allow reads and writes of files
that are greater than 2 GB in size. Note that this change allows you
to access records that occur past the 2 GB point in the file, but not
to read into variables that would be larger than 2 GB. Thus, there is
no improvement to <a href="Document/Functions/Built-in/cbinread.html"><strong>cbinread</strong></a>,
<a href="Document/Functions/Built-in/cbinwrite.html"><strong>cbinwrite</strong></a>, <a href="Document/Functions/Built-in/fbinread.html"><strong>fbinread</strong></a>,
<a href="Document/Functions/Built-in/fbinwrite.html"><strong>fbinwrite</strong></a> because they read/write the complete file
starting from the beginning into or out of a single variable.

<dt><a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a>

<dd>Added three new attributes: BeginBarLocs, MidBarLocs, and
EndBarLocs.  See <a href="Applications/histo.html#ex12">histogram
example 12</a> for usage.

<dt><a href="Document/Functions/Built-in/hyi2hyo.html"><strong>hyi2hyo</strong></a>

<dd>If the <em>intflg</em> argument is set to one,values outside 
of the input pressure range will be set to the values of the 
closest input pressure value. 

<dt><a href="Document/Functions/Contributed/getFillValue.html"><strong>getFillValue</strong></a>

<dd>Updated so that if no _FillValue or missing_value attribute is
present, it does not return a _FillValue.

<dt><a href="Document/Functions/Built-in/pres2hybrid.html"><strong>pres2hybrid</strong></a>

<dd>Now allows two options for extrapolating the data.

<dt><a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>, <a href="Document/Functions/Built-in/printVarSummary.html"><strong>printVarSummary</strong></a>, <a href="Document/Functions/Built-in/printFileVarSummary.html"><strong>printFileVarSummary</strong></a>

<dd>All the printing procedures have been updated to print the actual values of array-valued attributes instead of
the notation <code>&lt;ARRAY&gt;</code> as long as the array has 10 or fewer elements.

<dt><a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>

<dd>This function was updated to allow "datai" to be five dimensions.

<dt><a href="Document/Functions/Built-in/wmbarb.html"><strong>wmbarb</strong></a>

<dd>Recognizes data with missing values and does not plot wind
barbs in those places.  Also, can now input arrays of any dimension.

<dt><a href="Document/Functions/Built-in/wmbarbmap.html"><strong>wmbarbmap</strong></a>

<dd>Recognizes data with missing values and does not plot wind
barbs in those places.


</dl>



<h2><a name="NewResources">New resources</a></h2>

<dl>

<dt><a href="Document/Graphics/Resources/gsn.html#gsnContourPosLineDashPattern"><em>gsnContourPosLineDashPattern</em></a>

<dd>Allows you to set a dash pattern for contour lines above 
the value 0.0.

<dt><a href="Document/Graphics/Resources/gsn.html#gsnPanelXF"><em>gsnPanelXF</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnPanelYF"><em>gsnPanelYF</em></a>

<dd>Allows you to change the X and Y positions of the upper left
corner of individual plots in a set of paneled plots. See <a
href="Applications/panel.html#ex19">example 19</a> in the <a
href="Applications/panel.html">panel applications page</a>.

<dt><a href="Document/Graphics/Resources/gsn.html#gsnPanelDebug"><em>gsnPanelDebug</em></a>

<dd>If set to True, turns on debug information for <a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>. See <a
href="Applications/panel.html#ex19">example 19</a> in the <a
href="Applications/panel.html">panel applications page</a>.

</dl>

<h2><a name="NewColorTables">New color tables</a></h2>

<ul>
<li><a href="Document/Graphics/ColorTables/BlueDarkOrange18.html">BlueDarkOrange18</a>
<li><a href="Document/Graphics/ColorTables/BlueDarkRed18.html">BlueDarkRed18</a>
<li><a href="Document/Graphics/ColorTables/BlueGreen14.html">BlueGreen14</a>
<li><a href="Document/Graphics/ColorTables/BrownBlue12.html">BrownBlue12</a>
<li><a href="Document/Graphics/ColorTables/Cat12.html">Cat12</a>
<li><a href="Document/Graphics/ColorTables/GreenMagenta16.html">GreenMagenta16</a>
<li><a href="Document/Graphics/ColorTables/posneg_1.html">posneg_1</a>
<li><a href="Document/Graphics/ColorTables/posneg_2.html">posneg_2</a>
<li><a href="Document/Graphics/ColorTables/prcp_1.html">prcp_1</a>
<li><a href="Document/Graphics/ColorTables/prcp_2.html">prcp_2</a>
<li><a href="Document/Graphics/ColorTables/prcp_3.html">prcp_3</a>
<li><a href="Document/Graphics/ColorTables/StepSeq25.html">StepSeq25</a>
</ul>

<h2><a name="ImportantBugFixes">Important bug fixes</a></h2>

<dl>

<dt>Fix to annoying "&lt;identifier&gt; IS A FUNCTION NOT A PROCEDURE" fatal
error mesage.

<dd>Before this version, if you called an NCL function but treated it
as a procedure (i.e. didn't assign it to a variable), you would get a
useless error message:

<pre>
fatal:syntax error: &lt;identifier&gt; IS A FUNCTION NOT A PROCEDURE
</pre>

This has been fixed so you should now get the name of the function, as
well as the line number it occurred on. For example:
<p>

<pre>
ncl 0&gt; abs(-1)
fatal:syntax error: abs is a function not a procedure; return value must be referenced
fatal:error at line 0
ncl 1&gt; 
</pre>
<p>

<dt>Bug in <a href="Document/Functions/Contributed/clmMon2clmDay.html"><strong>clmMon2clmDay</strong></a>

<dd>The <a href="Document/Functions/Contributed/linint1_Wrap.html"><strong>linint1_Wrap</strong></a> function was invoked
prior to being loaded within contributed.ncl. This will be fixed in 4.3.0, 
but you can fix it yourself by moving <a href="Document/Functions/Contributed/clmMon2clmDay.html"><strong>clmMon2clmDay</strong></a>
after <a href="Document/Functions/Contributed/linint1_Wrap.html"><strong>linint1_Wrap</strong></a> is defined.
<p>

<dt>Bug in <a href="Document/Functions/Built-in/dtrend.html"><strong>dtrend</strong></a> and <a href="Document/Functions/Built-in/dtrend_msg.html"><strong>dtrend_msg</strong></a>

<dd>If <em>return_info</em> was set to True, and the input <em>y</em>
was double and had more than one dimension, then you would get a
segmentation fault or incorrect results.
<p>

<dt>Bug in reading HDF variable attributes of type string that have
null characters in them.

<dd>If NCL read in an HDF file that had an attribute with null
characters in it, then the attribute value was truncated at that first
null character.  This bug has been fixed, and the null characters are
replaced with a single space (but only if there are more non-null
characters after it).
<p>

<dt>Memory leak fixed

<dd>A user reported a memory leak problem in which the way you
implement a logical expression in an "if" statement had a serious
effect on your code if executed multiple times.  The code:

<pre>
   if (flags(x)) then
</pre>

was not working as efficiently as this code:

<pre>
   if (flags(x).eq.True) then
</pre>
<p>

<dt>Optimization problem (not a bug!) with <a href="Document/Functions/Built-in/hyi2hyo.html"><strong>hyi2hyo</strong></a>
on Linux systems.

<dd>There was an odd optimization problem with
<a href="Document/Functions/Built-in/hyi2hyo.html"><strong>hyi2hyo</strong></a> on Linux systems that would cause it to
think you were trying to pass in a 1D array for <em>xi</em>, when you
indeed had a 3D array.
<p>

<dt>Bug in <a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a>

<dd><a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a> would only work if the input was float
or double.
<p>

<dt>Bug in 'mpSpecifiedFill[Colors,Patterns,Scales] resources

<dd>The <a href="Document/Graphics/Resources/mp.html#mpSpecifiedFillColors"><em>mpSpecifiedFillColors</em></a>,
<a href="Document/Graphics/Resources/mp.html#mpSpecifiedFillPatterns"><em>mpSpecifiedFillPatterns</em></a>, and <a href="Document/Graphics/Resources/mp.html#mpSpecifiedFillScales"><em>mpSpecifiedFillScales</em></a> resources were not
working because of changes introduced to handle subarea group
designators such as "counties" and "states".
<p>

<dt>Bug in <a href="Document/Functions/Contributed/numAsciiRow.html"><strong>numAsciiRow</strong></a>

<dd>If you call <a href="Document/Functions/Contributed/numAsciiRow.html"><strong>numAsciiRow</strong></a>, it
may appear to hang. This will be fixed in 4.3.0, but you can fix it
yourself by editing the file:

<blockquote>
$NCARG_ROOT/lib/ncarg/nclscripts/csm/contributed.ncl
</blockquote>

and changing the line:

<pre>
  nrow_s    = systemfunc("'wc' -l" + fNam +" | awk '{print $1}'" )
</pre>

to have a space after the "-l":

<pre>
  nrow_s    = systemfunc("'wc' -l " + fNam +" | awk '{print $1}'" )
</pre>


<dt>Bug in <a href="Document/Functions/Built-in/rtest.html"><strong>rtest</strong></a>

<dd><a href="Document/Functions/Built-in/rtest.html"><strong>rtest</strong></a> did not check the size of the <em>Nr</em> 
argument. Now if <em>Nr</em><3 the returned value(s) will be set
to the appropriate _FillValue.

</dl>

<hr><hr>
<A NAME="a034"></A>
<A NAME="4.2.0.a034"></A>
<h2>Version 4.2.0.a034</h2>
<h3>26 September 2006</h3>
<p>


<h2>New applications</h2>

<dl>

<dt><a href="Document/Tools/ncl_convert2nc.html">ncl_convert2nc</a>

<dd>Converts one or more GRIB, HDF and/or HDF-EOS files to netCDF
formatted files.  Note: this application is replacing 
<a href="Document/Tools/ncl_grib2nc.html">ncl_grib2nc</a> which
has been deprecated in this release.
<p>

</dl>

<h2>New functions</h2>

<dl>
<dt><a href="Document/Functions/Contributed/array_append_record.html"><strong>array_append_record</strong></a>

<dd>Attaches [appends] additional records [leftmost dimension] 
to a previously existing array. 
<p>

<dt><a href="Document/Functions/Built-in/cdft_p.html"><strong>cdft_p</strong></a>

<dd>Calculates the probability given a t-value and the degrees of
freedom.
<p>

<dt><a href="Document/Functions/Built-in/cdft_t.html"><strong>cdft_t</strong></a>

<dd>Calculates the t-value given the probability and the degrees of
freedom.
<p>

<dt><a href="Document/Functions/Contributed/clmMon2clmDay.html"><strong>clmMon2clmDay</strong></a>

<dd>Creates a daily climatology from a monthly climatology.
<p>


<dt><a href="Document/Functions/Contributed/delete_VarAtts.html"><strong>delete_VarAtts</strong></a>

<dd>Deletes one or more <a href="Document/Language/attributes.html">attributes</a>
associated with a variable.
<p>

<dt><a href="Document/Functions/Built-in/dim_avg_wgt.html"><strong>dim_avg_wgt</strong></a>
and <a href="Document/Functions/Contributed/dim_avg_wgt_Wrap.html"><strong>dim_avg_wgt_Wrap</strong></a></a>

<dd>Computes the weighted average of a variable's rightmost dimension
at all other dimensions. The _Wrap version of this function retains
metadata.
<p>

<dt><a href="Document/Functions/Built-in/dim_sum_wgt.html"><strong>dim_sum_wgt</strong></a>

<dd>Computes the weighted sum of a variable's rightmost dimension at
all other dimensions. <a href="Document/Functions/Contributed/dim_sum_wgt_Wrap.html"><strong>dim_sum_wgt_Wrap</strong></a>, which retains metadata,
was inadvertently not added in this version. (It will be added in
version 4.3.1.) If you need this function, email <a
href="mailto:shea@ucar.edu">Dennis Shea</a>.
<p>

<dt><a href="Document/Functions/Built-in/erf.html"><strong>erf</strong></a>/<a href="Document/Functions/Built-in/erfc.html"><strong>erfc</strong></a>

<dd>Evaluates the real error function and
the real complementary error function respectively.
<p>

<dt><a href="Document/Functions/Contributed/get_file_suffix.html"><strong>get_file_suffix</strong></a>

<dd>Returns the suffix of a file name.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_add_annotation.html">gsn_add_annotation</a>

<dd>Adds an annotation to a plot.

<p>

<dt><a href="Document/Graphics/Interfaces/gsn_create_labelbar.html">gsn_create_labelbar</a>

<dd>Creates a labelbar. This function is similar to the
procedure <a href="Document/Graphics/Interfaces/gsn_labelbar_ndc.html">gsn_labelbar_ndc</a>, except
it returns the id of the labelbar, which can then be used with
functions like <a href="Document/Graphics/Interfaces/gsn_add_annotation.html">gsn_add_annotation</a>.

<p>

<dt><a href="Document/Graphics/Interfaces/gsn_create_legend.html">gsn_create_legend</a>

<dd>Creates a legend. This function is similar to the
procedure <a href="Document/Graphics/Interfaces/gsn_legend_ndc.html">gsn_legend_ndc</a>, except
it returns the id of the legend, which can then be used with
functions like <a href="Document/Graphics/Interfaces/gsn_add_annotation.html">gsn_add_annotation</a>.

<p>

<dt><a href="Document/Functions/Built-in/isbigendian.html"><strong>isbigendian</strong></a>

<dd>Returns True if you are on a big endian machine.
<p>

<dt><a href="Document/Functions/Contributed/isMonotonic.html"><strong>isMonotonic</strong></a>

<dd>Checks one-dimensional array for monoticity.
<p>

<dt><a href="Document/Functions/Built-in/loadscript.html"><strong>loadscript</strong></a>

<dd>Loads the given NCL script.
<p>

<dt><a href="Document/Functions/Built-in/lspoly.html"><strong>lspoly</strong></a>

<dd>Calculates a set of coefficients for a weighted least squares
polynomial fit to the given data.
<p>

<dt><a href="Document/Functions/Contributed/niceLatLon2D.html"><strong>niceLatLon2D</strong></a>

<dd>Checks two-dimensional latitude and longitude arrays for "nice"
structure.
<p>


<dt><a href="Document/Functions/Built-in/pres2hybrid.html"><strong>pres2hybrid</strong></a> and <a href="Document/Functions/Contributed/pres2hybrid_Wrap.html"><strong>pres2hybrid_Wrap</strong></a>

<dd>Interpolates data on constant pressure levels to hybrid levels.
<p>

<dt><a href="Document/Functions/Contributed/rho_mwjf.html"><strong>rho_mwjf</strong></a>

<dd>Computes ocean water density given a specified range for potential
temperature (deg Celisus) and salinity (psu).
<p>

<dt><a href="Document/Functions/Built-in/rip_cape_2d.html"><strong>rip_cape_2d</strong></a>

<dd>Computes convective available potential energy (CAPE), convective
inhibition (CIN), lifted condensation level (LCL), and level of free
convection (LFC).
<p>

<dt><a href="Document/Functions/Built-in/rip_cape_3d.html"><strong>rip_cape_3d</strong></a>

<dd>Computes convective available potential energy (CAPE) and
convective inhibition (CIN).
<p>

<dt><a href="Document/Functions/Built-in/stdatmus_p2tdz.html"><strong>stdatmus_p2tdz</strong></a>

<dd>Calculates the corresponding temperature, density, and height
based on the 1976 U.S. standard atmosphere, given the pressure.
<p>

<dt><a href="Document/Functions/Built-in/stdatmus_z2tdp.html"><strong>stdatmus_z2tdp</strong></a>

<dd>Calculates the corresponding temperature, density, and pressure
based on the 1976 U.S. standard atmosphere, given the height.
<p>

<dt><a href="Document/Functions/Built-in/strlen.html"><strong>strlen</strong></a>
<dd>Returns the length of a string variable.
<p>

<dt><a href="Document/Functions/Contributed/table_attach_rows.html"><strong>table_attach_rows</strong></a>

<dd> Attaches [appends] additional rows to a previously 
existing two-dimensional [table] array.
<p>

<dt><a href="Document/Functions/Built-in/wgt_vert_avg_beta.html"><strong>wgt_vert_avg_beta</strong></a>

<dd>Computes weighted vertical average or sum using pressure thickness
and beta factors.
<p>

<dt><a href="Document/Functions/Built-in/wrf_rh.html"><strong>wrf_rh</strong></a>,  <a href="Document/Functions/Built-in/wrf_tk.html"><strong>wrf_tk</strong></a> 

<dd>Calculate relative humidity and temperature from WRF model output.
<p>

<dt><a href="Document/Functions/Contributed/yyyymmdd_to_yyyyfrac.html"><strong>yyyymmdd_to_yyyyfrac</strong></a>

<dd>Converts a one dimensional array containing yyyymmdd values to
yyyy and fractional year.
<p>

<dt><a href="Document/Functions/Contributed/yyyymmddhh_to_yyyyfrac.html"><strong>yyyymmddhh_to_yyyyfrac</strong></a>

<dd>Converts a one dimensional array containing yyyymmddhh values to
yyyy and fractional year.
<p>

</dl>
<p>

<h2>New functionality</h2>

<dl>

<dt><a href="Document/Manuals/Ref_Manual/NclDataTypes.html#CreatingNewDataArrays">new</a> statement

<dd>The <em>new</em> statement has a new value you can use for the
optional third argument: "No_FillValue". If you set this, then the
variable created by <em>new</em> will not have a <a href="Document/Language/fillval.html">_FillValue</a> attribute
attached to it, and the values in the variable will be undefined.

<p>

<dt>NCL can now parse MS-DOS style end-of-line characters.

<dd>These characters sometimes show up as "^M" or "\r" characters in
certain ASCII editors.
<p>

<dt>Strings in NCL can now be longer than 256 characters.

<dd>NCL was updated so that you can now have strings longer than 256
characters, within the memory limitations of the system, of course.
Note that symbols (variable, dimension, and attribute names) still are
limited in length to 256 characters.
<p>

<dt><a href="Document/Functions/Built-in/abs.html"><strong>abs</strong></a> and <a href="Document/Functions/Built-in/fabs.html"><strong>fabs</strong></a>

<dd>The <a href="Document/Functions/Built-in/abs.html"><strong>abs</strong></a> function will supercede
<a href="Document/Functions/Built-in/fabs.html"><strong>fabs</strong></a>, as it will accept all supported numeric data
types, and its return value will be of the same type as its input.
Function <a href="Document/Functions/Built-in/fabs.html"><strong>fabs</strong></a> will continue to be available, and
support the <em>float</em> and <em>double</em> data types only.
<p>

<dt><a href="Document/Functions/Built-in/gc_latlon.html"><strong>gc_latlon</strong></a>

<dd>This function was updated to allow multi-dimensional input
for the latitude, longitude arrays.
<p>

<dt><a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a>

<dd>This function was updated to include two more options:
<i>DefaultNCEPPTable</i> and <i>MissingToFillValue</i>. 
<p>

<dt><a href="Document/Functions/Built-in/stat2.html"><strong>stat2</strong></a>, <a href="Document/Functions/Built-in/stat4.html"><strong>stat4</strong></a>,
<a href="Document/Functions/Built-in/stat_trim.html"><strong>stat_trim</strong></a>, <a href="Document/Functions/Built-in/stat_medrng.html"><strong>stat_medrng</strong></a>

<dd>These functions were updated to allow numeric input, and float or
double output.
<p>

<dt><a href="Document/Functions/Built-in/triple2grid.html"><strong>triple2grid</strong></a>

<dd>This function was updated to allow the third argument to be
multi-dimensional.
<p>

<dt><a href="Document/Functions/Built-in/vinth2p.html"><strong>vinth2p</strong></a>

<dd>This function was updated to allow the first argument to have up to
5 dimensions.

</dl>
<p>

<h2>New resources</h2>
<dl>
<dt><a href="Document/Graphics/Resources/mp.html#mpMaskOutlineSpecifiers"><em>mpMaskOutlineSpecifiers</em></a> and
<a href="Document/Graphics/Resources/mp.html#mpOutlineMaskingOn"><em>mpOutlineMaskingOn</em></a>.

<dd>These resources allow you to turn on map outline masking and
indicate which outlined map areas you want to "mask" from your
plot. They should be used in conjunction with <a href="Document/Graphics/Resources/mp.html#mpOutlineSpecifiers"><em>mpOutlineSpecifiers</em></a> and/or <a href="Document/Graphics/Resources/mp.html#mpOutlineBoundarySets"><em>mpOutlineBoundarySets</em></a>.

</dl>

<h2>Important bug fixes</h2>

<dl>
<dt>Bug in <a href="Document/Functions/Built-in/exp_tapersh.html"><strong>exp_tapersh</strong></a> procedure

<dd>We fixed a bug in which if your input values were not double, the
weights aren't being applied to the data, and hence you got the same
values back.
<p>

<dt>Bug in single value coordinate subscripting, when coordinate values
were decreasing.
<P>

<dd>We fixed a bug in which if you had decreasing coordinate array values,
and you selected a single value using coordinate subscripting, NCL was
returning the wrong closest index.
<p>

<dt>Bug in coordinate array returned for a variable that was
created by reversing the stride of an existing variable, e.g. 
b = a(1::-2)

<dd>We fixed the above bug, and it will be in the next release of NCL.
<p>


<dt>Bug in line number reporting for NCL error messages.

<dd>Sometimes the line numbers for NCL error messages were off by
one. This has been fixed in this release. 
<p>

<dt>Bug if you didn't have a newline after the very last line
in your NCL script.

<dd>In previous versions of NCL, if you didn't have a <return>
after the very last line in your NCL script, you would
get a confusing and fatal error message:

<pre>
fatal:syntax error: line -1 before or near  
</pre>
<p>

This has been fixed in this release, and you won't get any error
message.
<p>

<dt>Bug in <a href="Document/Functions/Built-in/shsgC-1.html"><strong>shsgC</strong></a>/<a href="Document/Functions/Built-in/shsgc.html"><strong>shsgc</strong></a>

<dd>A user discovered a bug in these functions that would cause NaNs
(not-a-number) to be returned if the input variable was over a certain
size. The latest version of the Spherepack library (V3.1) fixes this
problem, so we incorporated this library into this version of NCL.
<p>

<dt>GRIB bugs

<dd>There was a "bug" encountered with the monthly GODAS files where
monthly average variables were given different names depending on the
number of days in the month. Now, if the calculations work out
properly to show that the first day of the time period is the 1st day
of the month and the last day of the time period is the last day of
the month, then the suffix applied is "ave1m" instead of
"aveXXd". Leap years are accounted for.
<p>

<dd>There was a bug in GRIB code's handling of time indicator index 10
in which the indicator index wasn't being tacked on to the variable
name.
<p>

<dt>Paging bug with print functions

<dd>If you used printing functions like <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a> or
<a href="Document/Functions/Built-in/printVarSummary.html"><strong>printVarSummary</strong></a> interactively in version
a033, the output would scroll continuously and not allow paging.
<p>

<dt>Bug with setting NCL_DEF_SCRIPTS_DIR or NCL_DEF_LIB_DIR to invalid
directories.

<dd>If you set the environment variables <a href="Document/Manuals/Ref_Manual/NclDefaultScript.html">NCL_DEF_SCRIPTS_DIR</a>
or <a href="Document/Manuals/Ref_Manual/NclDefaultScript.html">NCL_DEF_LIB_DIR</a> to
invalid directories, you may get a bus error or a segmentation fault,
followed by a core dump. To work around this problem, don't set these
environment variables, or set them to valid directories.
<P>

<dt>Bug in with using markers in an XY plot when missing values
were present.

<dd>We fixed a bug in which if you were generating an XY plot with
markers, and your X or Y values contained missing values, the markers
were still appearing.

</dl>
<p>

<hr><hr>
<A NAME="a033"></A>
<A NAME="4.2.0.a033"></A>
<h2>Version 4.2.0.a033</h2>
<h3>23 January 2006</h3>
<p>


<b><a name="CLOs">Command line arguments and options</a></b>

The next version of NCL will have a long-requested enhancement added,
and that is the ability to include options and arguments on the NCL
command line. For more information and some examples, see the
"<a href="Document/Manuals/Ref_Manual/NclCLO.html">Command line arguments and
options</a>" section in the <a href="Document/Manuals/Ref_Manual/index.html">NCL
Reference Manual.</a>

<p>

<b><a name="CLTs">Command line tools</a></b>

<dl>
<dt><a href="Document/Tools/ncl_filedump.html">ncl_filedump</a>

<dd>Prints the contents of supported files (netCDF, HDF, GRIB,
HDF-EOS2, and CCM History Tape).
<p>

<dt><a href="Document/Tools/ncl_grib2nc.html">ncl_grib2nc</a>

<dd>Converts NCL-supported GRIB files to netCDF-formatted files.
<p>

</dl>


<b>New functions</b>

<dl>

<dt><a href="Document/Functions/Contributed/calcDayAnomTLL.html"><strong>calcDayAnomTLL</strong></a>

<dd>Calculates daily anomalies from a daily climatology.
<p>

<dt><a href="Document/Functions/Built-in/cancor.html"><strong>cancor</strong></a>

<dd>Performs canonical correlation analysis between two sets of variables.
<p>

<dt><a href="Document/Functions/Contributed/clmDayTLL.html"><strong>clmDayTLL</strong></a>

<dd>Calculates daily climatology from daily mean data.
<p>

<dt><a href="Document/Functions/Built-in/echo_on.html"><strong>echo_on</strong></a>/<a href="Document/Functions/Built-in/echo_off.html"><strong>echo_off</strong></a>

<dd>These procedures toggle the echoing of NCL statements as they are
encountered. You can use them in conjunction with the new "-x" command
line option.
<p>

<dt><a href="Document/Functions/Built-in/generate_2d_array.html"><strong>generate_2d_array</strong></a>

<dd>Generates a "nice" 2D array of pseudo random data, especially for
use in 2D graphics.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_xy3.html"><strong>gsn_csm_xy3</strong></a>
<dd>Creates and draws an XY plot with three different Y axes.
<p>
This function is similar to <a href="Document/Graphics/Interfaces/gsn_csm_xy2.html"><strong>gsn_csm_xy2</strong></a> except it allows three vertical
scales for three different quantities.
<p>

<dt><a href="Document/Functions/Built-in/hyi2hyo.html"><strong>hyi2hyo</strong></a>, <a href="Document/Functions/Contributed/hyi2hyo_Wrap.html"><strong>hyi2hyo_Wrap</strong></a>

<dd>Interpolates from data on one set of hybrid levels to data another
set of hybrid levels.<p>

<dt><a href="Document/Functions/Contributed/local_min_1d.html"><strong>local_min_1d</strong></a>, <a href="Document/Functions/Contributed/local_max_1d.html"><strong>local_max_1d</strong></a>

<dd>Determines the relative minima/maxima for a 1-dimensional array.
<p>

<dt><a href="Document/Functions/Built-in/omega_ccm.html"><strong>omega_ccm</strong></a>, <a href="Document/Functions/Contributed/omega_ccm_driver.html"><strong>omega_ccm_driver</strong></a>

<dd>Calculates omega (vertical pressure velocity) using the model
diagnostic method.
<p>

<dt><a href="Document/Functions/Contributed/pack_values.html"><strong>pack_values</strong></a>

<dd>Compress (pack) values of type float or double to values of type short or byte.
<p>


<dt><a href="Document/Functions/Built-in/setfileoption.html"><strong>setfileoption</strong></a>

<dd>This procedure allows the user to set a number of
file-format-specific options. It has an option to determine the
algorithm used for expanding thinned data from a GRIB file, an option
for indicating whether a binary file should be read or written as big
endian or little endian, and several options for the writing of netCDF
files which can significantly speed up this process.
<p>

<dt><a href="Document/Functions/Built-in/shsgc_R42.html"><strong>shsgc_R42</strong></a>, <a href="Document/Functions/Contributed/shsgc_R42_Wrap.html"><strong>shsgc_R42_Wrap</strong></a>

<dd>Computes spherical harmonic synthesis of a scalar quantity via
rhomboidally truncated (R42) spherical harmonic coefficients onto a
(108x128) <a href="Document/Functions/sphpk_grids.html#GaussianGrids">gaussian grid</a>.
<p>

<dt><a href="Document/Functions/Contributed/smthClmDayTLL.html"><strong>smthClmDayTLL</strong></a>

<dd>Calculates a smooth mean daily annual cycle.
<p>

<dt><a href="Document/Functions/Contributed/yyyymm_time.html"><strong>yyyymm_time</strong></a>

<dd>
Creates a one-dimensional array containing year-month [yyyymm] values. 
<p>

<dt><a href="Document/Functions/Contributed/yyyymm_to_yyyyfrac.html"><strong>yyyymm_to_yyyyfrac</strong></a>

<dd>
Converts a one dimensional array containing yyyymm values 
to yyyy and fractional year [<i>eg</i>: 1973.25]. Most
frequently used to create a one-dimensional array used
for "x-y" plots.
<p>


<dt><a href="Document/Functions/Built-in/z2geouv.html"><strong>z2geouv</strong></a>

<dd>Computes the geostrophic zonal and meridional wind components
using geopotential height.

</dl>
<p>

<b>New functionality</b>
<dl>

<dt><a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a>

<dd>This function has been enhanced in the reading of float
values to avoid treating "nan" or "inf" as numeric values if they 
occur as part of a word such as "nanny" or "infidel".<p>

<dt><a href="Document/Functions/Contributed/copy_VarCoords.html"><strong>copy_VarCoords</strong></a>

<dd>Made this function more flexible; it can now handle the tasks that
<a href="Document/Functions/Contributed/copy_VarCoords_1.html"><strong>copy_VarCoords_1</strong></a> and <a href="Document/Functions/Contributed/copy_VarCoords_2.html"><strong>copy_VarCoords_2</strong></a> used to do.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a>

<dd>A new resource called <a href="Document/Graphics/Resources/gsn.html#gsnHistogramBarWidthPercent"><em>gsnHistogramBarWidthPercent</em></a> has been created that
allows you to specify the width of the histogram bars as a percentage
of the width of the bin that it falls in. The values must be in the
range 0 to 100, and they must be smaller for comparison histograms.<p>

<dt>New map projections

<dd>Two new map projections have been added, "CylindricalEqualArea"
and "RotatedMercator". For more information, see the <a href="Document/Graphics/Resources/mp.html#mpProjection"><em>mpProjection</em></a> resource in the list
of <a href="Document/Graphics/Resources/mp.html">map (mp)
resources</a>.
<p>


<dt>Line resources in <a
href="Document/Graphics/Resources/mp.html">map (mp) resources</a>

<dd>Enabled support for the "transparent" color index for 
the following map line resources:
<ul>
<li><a href="Document/Graphics/Resources/mp.html#mpGeophysicalLineColor"><em>mpGeophysicalLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpUSStateLineColor"><em>mpUSStateLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpNationalLineColor"><em>mpNationalLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpGridLineColor"><em>mpGridLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpLimbLineColor"><em>mpLimbLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpPerimLineColor"><em>mpPerimLineColor</em></a>
<li><a href="Document/Graphics/Resources/mp.html#mpLabelFontColor"><em>mpLabelFontColor</em></a>
</ul>

<dt>Any <a href="Document/Graphics/Interfaces/list_all.html">gsn_csm</a> non-map
plotting script.<p>

<dd>Previously, for functions like <a href="Document/Graphics/Interfaces/gsn_csm_vector.html"><strong>gsn_csm_vector</strong></a> and <a href="Document/Graphics/Interfaces/gsn_csm_contour.html"><strong>gsn_csm_contour</strong></a>, the special "lat2d" and
"lon2d" attributes were not recognized. This is because generally, you
only want to use this kind of information when you are creating a
contour or vector plot over map.
<p>

However, if you want to overlay
multiple contour and/or vector plots on a map, you need to be able to
create them using <a href="Document/Graphics/Interfaces/gsn_csm_vector.html"><strong>gsn_csm_vector</strong></a> and
<a href="Document/Graphics/Interfaces/gsn_csm_contour.html"><strong>gsn_csm_contour</strong></a> so you can
then use them in an <a href="Document/Functions/Built-in/overlay.html"><strong>overlay</strong></a> call. 
<p>

So, the "lat2d" and "lon2d" special attributes are now recognized
by these kind of <a href="Document/Graphics/Interfaces/list_all.html">gsn_csm</a> routines.
<p>

<dt><a href="Document/Functions/Built-in/natgrid.html"><strong>natgrid</strong></a>, <a href="Document/Functions/Built-in/natgrids.html"><strong>natgrids</strong></a>,
<a href="Document/Functions/Built-in/natgridd.html"><strong>natgridd</strong></a>

<dd>These functions now do automatic culling of duplicate input
coordinate points.  Given this, the previous "dup" parameter has
been made obsolete.
<p>

<dt><b><a href="Document/Tools/psplit.html">psplit</a></b>

<dd>Added a "-c" option that flags <b>psplit</b> to simply report the
number of pages in the input file and exit.<p>

<dt>Printing strings that contain missing values.
<dd>If you try to concatenate a value that a missing to a valid
string, and then print the string, you would getting nothing
but a missing value:

<pre>
  x = new(1,float)
  print("x = " + x)
</pre>

would produce:
<pre>
(0)     -999
</pre>

With the next release of NCL, you will get:

<pre>
(0)     x = -999
</pre>
<p>

</dl>
<p>

<b>Important bug fixes</b>

<dl>
<dt><a href="Document/Functions/Built-in/eofunc.html"><strong>eofunc</strong></a>

<dd> The version of <b>eofunc</b> in Version 4.2.0.a032 had an error.
The exact nature of the error was never determined. Prior
to release in a032, the <b>eofunc</b> function had been tested by five 
different people and all agreed it was correct. After release of a032, 
some users reported small differences with previous results. One
user reported a major problem. As a result, the <b>eofunc</b> 
documentation was modified to include a notice printed in red that recommended
that users use the older <a href="Document/Functions/Built-in/eofcov.html"><strong>eofcov</strong></a> or <a href="Document/Functions/Built-in/eofcor.html"><strong>eofcor</strong></a>
functions.
<p>
The new <a href="Document/Functions/Built-in/eofunc.html"><strong>eofunc</strong></a> included in a033 
uses a completely different program to calculate EOFs.  


<dt>GRIB reader

<dd>In the last release (4.2.0.a032) of NCL, two new time variables
were introduced for GRIB data being read in.  Of these, the new variable
"initial_time0_hours" (units: "hours since 1800-01-01 00:00") was
found to be off by 48 hours. The other time related variables
"initial_time0_encoded" (units "yyyymmddhh.hh_fraction") and
"initial_time0" (units "mm/dd/yyyy (hh:mm)") are correct.
<p>
This "off by 48 hours" has been fixed for a033.  
<p>
The a032 temporary work-around was as follows: 
for times after 1900-01-01 00:00, 48 hours had to be
added to the values returned by NCL.
<p>

The second "fix" to the GRIB reader was not so much a fix as a removal
of a hard-coded upper limit for the size of lat/lon arrays for thinned
grids.
<p>

<dt><a href="Document/Functions/Built-in/linmsg.html"><strong>linmsg</strong></a>
<dd>This function was not correctly handling the case where a whole row
of points was missing.
<p>

<dt><a href="Document/Functions/Built-in/qsort.html"><strong>qsort</strong></a>

<dd>A problem was fixed in which the following short script was using
up a bunch of memory:

<pre>
begin 
 do i = 0,200 
  print((/i/)) 
  x1D = new((/4000000/),integer) 
  x1D = 1 
  qsort(x1D) 
  delete(x1D) 
 end do 
end 


</pre>
<p>

<dt><a href="Document/Functions/Built-in/solve_linsys.html"><strong>solve_linsys</strong></a>

<dd>This function was not working correctly if the leftmost dimension
of <em>B</em> was not the same as the rightmost dimension.
<p>

<dt><a href="Document/Graphics/Resources/vc.html#vcMapDirection"><em>vcMapDirection</em></a>
<dd>Fixed a bug where this resource was not taking effect when
in curly vector mode.
</dl>
<p>

<hr><hr>
<a name="a032"></a>
<a name="4.2.0.a032"></a>
<h2>Version 4.2.0.a032</h2>
<h3>6 December 2004</h3>
<p>


<b>New and updated functionality</b><p>

<ul>
<li>Contouring non-uniform grids<p>

In recent years, many new non-uniform grids have become popular and
these are being processed by new algorithms to reduce them to triangle
meshes and to contour directly on these triangles, rather than
interpolating to a uniform grid and contouring.<p>

For more information, see the <a href="Document/Graphics/contour_grids.html">short document</a>
on non-uniform grids that NCL can contour, and the following
example sections: <a href="Applications/seam.html">SEAM (HOMME)
grids</a>, <a href="Applications/geodesic.html">Geodesic
grids</a>, and <a href="Applications/adaptive.html">Adaptive grids</a>.<p>

<li><a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>/<a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a><p>

File suffixes recognized by these two functions are now case
insensitive. For example, ".nc" and ".NC" are both recognized as
representing netCDF files.<p>

<li><a href="Applications/opendap.html">OPeNDAP</a>-enabled
NCL<p>

NCL now has <a href="Applications/opendap.html">OPeNDAP</a>
(formerly known as "DODS") capabilities built into it, <font
COLOR="red">but only for systems that OPeNDAP is supported on</font>
(Linux, Solaris, AIX). What this means is that you can use functions
like <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a> and <a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a>
to access netCDF datasets served by an OPenDAP server.<p>

Here's an example and also a way to test if your version of NCL is
OPeNDAP-enabled:<p>

<pre>
begin
;
; The URL is so long, break it into two pieces.
;
  url      = "http://www.cdc.noaa.gov/cgi-bin/nph-nc/Datasets/"
  filename = "ncep.reanalysis.dailyavgs/pressure/air.1948.nc"
 
  exists = <a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a>(url+filename)
  if(.not.exists) then 
    <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>("OPeNDAP test unsuccessful.")
    <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>("Either the file doesn't exist, or NCL does not have")
    <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>("OPeNDAP capabilities on this system")
  else
    f = <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>(url + filename,"r")
;
; "variables" should be equal to 
; (/"air","time","lon","lat","level"/)
;
    variables = <a href="Document/Functions/Built-in/getfilevarnames.html"><strong>getfilevarnames</strong></a>(f)
  end if

end
</pre>
<p>

<li>New special resources for contour lines: <a href="Document/Graphics/Resources/gsn.html#gsnContourZeroLineThicknessF"><em>gsnContourZeroLineThicknessF</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnContourLineThicknessesScale"><em>gsnContourLineThicknessesScale</em></a>, and <a href="Document/Graphics/Resources/gsn.html#gsnContourNegLineDashPattern"><em>gsnContourNegLineDashPattern</em></a>.
<p>

Respectively, these resources allow you to specify the line
thickness of the zero contour, specify a scale factor to apply to the
current line thicknesses, and specify a dash pattern for negative
contours.  For some examples, see the <a href="Applications/coneff.html">contour effects</a>
examples.<p>

<li>New EOF functions<p>

The eofunc* suite of three functions
(<a href="Document/Functions/Built-in/eofunc.html"><strong>eofunc</strong></a>, <a href="Document/Functions/Built-in/eofunc_ts.html"><strong>eofunc_ts</strong></a>,
<a href="Document/Functions/Built-in/eofunc_varimax.html"><strong>eofunc_varimax</strong></a>) implements a more efficient method
for computing EOFs.  The previous suite of EOF functions will be
available but should be replaced by the eofunc* functions.<p>

<li><a href="Document/Functions/Built-in/get_ncl_version.html"><strong>get_ncl_version</strong></a><p>

Returns the NCL version as a string.<p>

<li><a href="Document/Graphics/Interfaces/gsn_add_text.html"><strong>gsn_add_text</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_text.html"><strong>gsn_text</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_text_ndc.html"><strong>gsn_text_ndc</strong></a><p>

The input X, Y, and text arrays are no longer restricted to be
1-dimensional. If they are multi-dimensional, they must be the same
dimensions as each other. Any one of them can be a scalar.<p>

<li>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a> polar
plotting script.<p>

The font for the longitude labels and <a href="Document/Graphics/Resources/gsn.html#gsnRightString"><em>gsnRightString</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnLeftString"><em>gsnLeftString</em></a>, and <a href="Document/Graphics/Resources/gsn.html#gsnCenterString"><em>gsnCenterString</em></a> were all defaulting to
"helvetica-bold," which is inconsistent with the rest of the gsn_csm
plotting scripts, whose labels default to "helvetica".<p>

These fonts were changed to be just "helvetica", <font COLOR=RED>which
means you may notice a difference when generating polar plots with
this version of NCL.</font><p>

To keep the polar longitude labels and/or three top subtitles set to
"helvetica-bold", you need to set:

<pre>
  res@<a href="Document/Graphics/Resources/gsn.html#gsnPolarLabelFont"><em>gsnPolarLabelFont</em></a> = "helvetica-bold"
  res@<a href="Document/Graphics/Resources/gsn.html#gsnStringFont"><em>gsnStringFont</em></a>     = "helvetica-bold"
</pre>
<p>


<li>New functions: <a href="Document/Graphics/Interfaces/gsn_csm_xy2.html"><strong>gsn_csm_xy2</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_csm_x2y.html"><strong>gsn_csm_x2y</strong></a>, and <a href="Document/Graphics/Interfaces/gsn_csm_x2y2.html"><strong>gsn_csm_x2y2</strong></a><p>

These functions are similar to <a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>, only they allow you to have a
different axis system on one or both of the top X and bottom right
axis.<p>

<li>GRIB file work-around for reading GRIB files from the IPCC Data
Distribution Center (<a
HREF="http://cera-www.dkrz.de/IPCC_DDC/">http://cera-www.dkrz.de/IPCC_DDC/</a>).
<p>

Several unrecognized centers are used for these files. The
work-around code is activated when an unrecognized center is
encountered.<p>

User-defined parameter tables are still needed and NCL does not
attempt to supply a name for the center.<p>

<li>Three new ECMWF GRIB tables added<p>

<blockquote>
132: Extreme forecast index<br>
162: Usage: ECMWF re-analysis, ERA40<br>
200: Usage: Differences between first guess and analysis<br>
</blockquote>
<p>


<li>Two additional time variables are provided when GRIB
data are read.<p>

These new variables, which are of type "double", contain the same
information as the current initial_time(n) variables which are of type
"string".  The two new variables are:

<ol>

<li>initial_time(n)_hours: This has units of "hours since 1800-01-01
00:00".

<li>initial_time(n)_encoded: This has units of "yyyymmddhh.hh_frac".

</ol>
<p>

<li><a href="Document/Functions/Shea_util/landsea_mask.html"><strong>landsea_mask</strong></a> <p>

Returns a grid that contains a land sea mask given any
(e.g. gaussian, fixed offset, curvilinear) latitude and longitude
array. The result can then be applied to any array on the same grid
using mask.<p>

<li><a href="Document/Functions/Built-in/simpeq.html"><strong>simpeq</strong></a><p>

Integrates a sequence of equally spaced points using Simpson's
Rule.<p>

<li><a href="Document/Functions/Built-in/simpne.html"><strong>simpne</strong></a><p>

Integrates a sequence of unequally spaced points using Simpson's
three-point formula. <p>

<li><a href="Document/Functions/Built-in/triple2grid2d.html"><strong>triple2grid2d</strong></a><p>

Places randomly-spaced data onto the nearest locations of a grid
with two-dimensional latitude and longitude arrays.<p>

<li><a href="Document/Functions/Built-in/v5d_create.html"><strong>v5d_create</strong></a><p>

Creates a Vis5D+ formatted file.<p>

<li><a href="Document/Functions/Built-in/v5d_write.html"><strong>v5d_write</strong></a><p>

Writes compressed gridded data to a Vis5D+ formatted file.
<p>

<li><a href="Document/Functions/Built-in/v5d_write_var.html"><strong>v5d_write_var</strong></a><p>

Writes a single gridded variable to a Vis5D+ formatted file.<p>

<li><a href="Document/Functions/Built-in/v5d_setLowLev.html"><strong>v5d_setLowLev</strong></a><p>

Sets the lowest vertical offset, per grid level, for each gridded
variable in a Vis5D+ formatted file.<p>

<li><a href="Document/Functions/Built-in/v5d_setUnits.html"><strong>v5d_setUnits</strong></a><p>

Sets a name for physical units associated with a variable in a
Vis5D+ formatted file.<p>

<li><a href="Document/Functions/Built-in/v5d_close.html"><strong>v5d_close</strong></a><p>

Closes a Vis5D+ formatted file.<p>

<li><a href="Document/Functions/Built-in/wmbarbmap.html"><strong>wmbarbmap</strong></a> <p>

Uses the wind barb functions from the Wmap package to draw wind
barbs over maps.<p>

<li>New resources for zonal means plots<p>

If you are creating a zonal means plots using the <a href="Document/Graphics/Resources/gsn.html#gsnZonalMean"><em>gsnZonalMean</em></a> resource, then you now have access
to three new resources:

<ul>

<li><a href="Document/Graphics/Resources/gsn.html#gsnZonalMeanXMinF"><em>gsnZonalMeanXMinF</em></a>
- sets the minimum value of the X axis

<li><a href="Document/Graphics/Resources/gsn.html#gsnZonalMeanXMaxF"><em>gsnZonalMeanXMaxF</em></a> - sets the maximum
value of the X axis

<li><a href="Document/Graphics/Resources/gsn.html#gsnZonalMeanYRefLine"><em>gsnZonalMeanYRefLine</em></a> - sets the value
at which to draw the y reference line. The default is 0.0.

</ul>

If you are wondering what a zonal mean plot is, see <a href="Applications/color.html#ex7">example 7</a> in
the list of <a href="Applications/color.html">color
examples</a>.

</ul>

<b>Important bug fixes</b><p>

<ul>

<li><a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a> bug<p>

A bug was fixed in <a href="Document/Functions/Built-in/asciiread.html"><strong>asciiread</strong></a> which
caused it to read in lone periods (".") as float values equal to "0".
For example, if you had the string "The data file is called file.cdf",
it would treat the period in "file.cdf" as the value 0.
<p>

<li>Coordinate subscripting bug<p>

If you subscripted an array using coordinate subscripting, and
gave it a "finish" subscript and not a "start" subscript, then you may
have gotten one extra coordinate value. For example, the simple script
below demonstrates this:

<pre>
begin
  level = (/1.5,2.5,3.5,4.5,5.5/)

  lev   = (/level/)
  lev!0 = "lev"
  lev&lev = level

  lev1 = lev({:3}) 
  lev2 = lev({0:3})

  <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(lev1)
  <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(lev2)
end

</pre>

The two arrays <tt>lev1</tt> and <tt>lev2</tt> should be identical and
equal to (/1.5,2.5/). Before this bug fix, <tt>lev1</tt> was
incorrectly getting the values (/1.5,2.5,3.5/).<p>

<li>Another coordinate subscripting bug<p>

If you tried to use coordinate subscripting without actually 
using a subscript value, as in:

<pre>
    buf2 = buf({lev|:},{lon|:},{lat|30:50})
</pre>

it would sometimes cause a core dump.<p>

<li>Problems reading netCDF files that had multi-dimensional variables
with the same name as a dimension.<p>

NCL is now tolerant of netCDF files where a multi-dimensional
variable has the same name as a dimension (in other words, something
that NCL saw as a coordinate variable, and wanted it to be
one-dimensional). NCL no longer assumes that a variable with the same
name as a dimension is a coordinate variable unless the variable has a
single dimension.<p>


<li>And still another coordinate subscripting bug<p>

There was a problem with coordinate array subselection using
double coordinate values: the coordinate values were only being
compared to float precision.<p>

This fix allows the following code to execute correctly:

<pre>
  coord = (/1234.5678901230d,1234.5678901231d,1234.5678901232d,\
            1234.5678901233d /)

  h   = (/ 4,5,6,7 /)
  h!0 = "coord"
  h&amp;coord = coord
  <a href="Document/Functions/Built-in/printVarSummary.html"><strong>printVarSummary</strong></a>(h)
  <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(h&amp;coord)

  v1 = 1234.56789012305d
  v2 = 1234.56789012311d
  v  = h({v1:v2})
  <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(v)

  v  = h({1234.56789012305d:1234.56789012319d})
  <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(v)
</pre>
<p>

<li>Any <a href="Document/Graphics/Interfaces/index.html">gsn</a>
plotting routine that does a frame advance<p>

When you set the special resource <a href="Document/Graphics/Resources/gsn.html#gsnMaximize"><em>gsnMaximize</em></a> to True, this maximizes the size of
the plot(s) in the current frame.  For PostScript or PDF output, the
maximization is done by computing something called device coordinates
that tells PS/PDF how the output is supposed to appear on the page.
Previously, if these device coordinates were not reset or recalculated
after the frame was advanced, then subsequent plots may not have been
drawn correctly in the frame.<p>

This bug was fixed by having the device coordinates set back to their
original values, but only if the frame is advanced by the plotting
routine (that is, if you set <a href="Document/Graphics/Resources/gsn.html#gsnFrame"><em>gsnFrame</em></a> to
False, then the device coordinates are not set back to their original
values).<p>

You can reset the device coordinates yourself by calling the procedure:

<pre>
    <a href="Document/Graphics/Interfaces/reset_device_coordinates.html"><strong>reset_device_coordinates</strong></a>(wks)
</pre>

This procedure should only be called after the frame is advance, and
before any drawing has occurred on the new frame.<p>

<li>Problems with reading HDF files.<p>

<ol>

<li>Variable names now have non-alphanumeric characters replaced with
an underscore.  Multiple underscores are collapsed to a single
underscore. This brings the HDF code in line with what has always been
documented.<p>

<li>With respect to the above, each variable is now given an attribute
called "hdf_name", whose value is the original HDF variable name. This
may be a redundant piece of information, but it seems better to always
have it so that the user code does not have to check whether it
exists.<p>

<li>Certain HDF files have SDS variables with identical names. They
are distinguished in the HDF file by belonging to different
hierarchically arranged "Vgroups", much like a directory structure in
a file system. These are now distinguished by appending a double
underscore followed by the Vgroup reference id to the variable name.
In addition, a text representation of the Vgroup hierarchy (with '/'
used as a separator) is added as an attribute called "hdf_group."  The
group reference id is stored as an integer attribute called
"hdf_group_id." Here's an example fragment of calling "print" on a
file variable:<p>

<pre>
      float Longwave_flux_minimum_value__316 ( day, region )
         valid_range :  <ARRAY>
         _FillValue :   3.402823e+38
         long_name :    Daily, Total-sky Averages
         units :        Watts per square meter
         hdf_name :     Longwave flux minimum value
         hdf_group :    Daily Averages/Total-Sky
         hdf_group_id : 316
</pre>
<p>

<li>Added caching for all HDF attributes, similar to the caching
implemented for the NetCDF module. This improves the performance of
printing the contents of large HDF files by several orders of
magnitude.<p>

</ul>

<hr><hr>
<a name="a031"></a>
<a name="4.2.0.a031"></a>
<h2>Version 4.2.0.a031</h2>
<h3>2 January 2004</h3>
<p>

<b>New and updated functionality</b><p>

<dl>
<dt>Contour line label density control

<dd>An internal parameter's value was changed to fix the occasional
problem of getting no or very few contour line labels on a contour
plot. This may cause the default behavior to change for some contour
plots, if you are setting the resource <a href="Document/Graphics/Resources/cn.html#cnLineLabelPlacementMode"><em>cnLineLabelPlacementMode</em></a> to "Computed" or
"Randomized" (i.e. you might see more contour line labels). The
"Constant" mode is unaffected by this change.<p>

You also now have better control over the density of contour line
labels using the new resource <a href="Document/Graphics/Resources/cn.html#cnLineLabelDensityF"><em>cnLineLabelDensityF</em></a>. This resource allows
a simple (though inexact) method for controlling the number of line
labels on a ContourPlot for both the "Randomized" and "Computed" line
label placement modes. It has no effect for the "Constant" mode, which
depends on <a href="Document/Graphics/Resources/cn.html#cnLineDashSegLenF"><em>cnLineDashSegLenF</em></a> to
determine the spacing.<p>

If <a href="Document/Graphics/Resources/cn.html#cnLineLabelDensityF"><em>cnLineLabelDensityF</em></a> is set to
its default value of 0.0, it has no effect, and the line label spacing
can be controlled using the <a href="Document/Graphics/Resources/cn.html#cnConpackParams"><em>cnConpackParams</em></a> resource as always.  If
cnLineLabelDensityF is set to 1.0, then the default settings of the
appropriate Conpack parameters apply, overriding any that are set by
cnConpackParams.  As cnLineLabelDensityF is set to values greater than
1.0, the number of labels increases, while setting it to positive
values less than 1.0 causes the number of labels to decrease.<p>

<dt><a href="Document/Functions/Built-in/eof2data.html"><strong>eof2data</strong></a>

<dd>Uses the output of <a href="Document/Functions/Built-in/eofcov.html"><strong>eofcov</strong></a> and
<a href="Document/Functions/Built-in/eofcov_ts.html"><strong>eofcov_ts</strong></a> to construct a data array.
<p>

<dt><a href="Document/Functions/Built-in/eofcor.html"><strong>eofcor</strong></a>, <a href="Document/Functions/Built-in/eofcov.html"><strong>eofcov</strong></a>,
<a href="Document/Functions/Built-in/eofcor_pcmsg.html"><strong>eofcor_pcmsg</strong></a>, <a href="Document/Functions/Built-in/eofcov_pcmsg.html"><strong>eofcov_pcmsg</strong></a>

<dd>Added an attribute called <i>eof_function</i> to indicate which
EOF function was used.
<p>

<dt><a href="Document/Functions/Built-in/eofcor_pcmsg.html"><strong>eofcor_pcmsg</strong></a>, <a href="Document/Functions/Built-in/eofcov_pcmsg.html"><strong>eofcov_pcmsg</strong></a>
<dd>Updated to return <i>pcrit</i> as an attribute.
<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
map script that can draw a Lambert Conformal plot.

<dd>The ability to mask out areas of a Lambert Conformal plot to
produce a plot similar to example 5 in the <a href="Applications/polar.html">suite of CSM polar examples</a>
has been added.  For an example, click on the script <a href="NclScripts/lambert.html">lambert.ncl</a> and its <a href="NclScripts/lambert-2.html">resource file</a>, or see <a href="https://www.ncl.ucar.edu/Images/lambert.gif">its output</a>.<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
plotting script that uses the "long_name" attribute to label an axis.

<dd>In addition to the "long_name" attribute, if any other attributes
with the name "standard_name", "description", or "DataFieldName" are
present, they will be used in the labeling of <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
plot templates. (If more than one of these attributes are present,
then the first one encountered in the above list will be used.) Also,
some more acceptable values for the "units" attribute were added,
including "UNITS", "UNIT", and "unit".<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
script that doesn't have latitude or longitude values on the X axis.

<dd>If the coordinate array that represents the X or Y axis has a
valid "long_name" type attribute, then the value of this attribute
will be used to label the corresponding axis.<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>

<dd>Added two new resources called <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartColors2"><em>gsnXYBarChartColors2</em></a> and <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartPatterns2"><em>gsnXYBarChartPatterns2</em></a>. They behave similarly to
<a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartColors"><em>gsnXYBarChartColors</em></a> and <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartPatterns"><em>gsnXYBarChartPatterns</em></a>, except they assign colors
and patterns of individual bars regardless of whether the bar is up or
down. For an example, see examples 6 and 7 in the <a href="Applications/bar.html">bar application examples</a>.<p>

<dt><a href="Document/Functions/Built-in/sprintf.html"><strong>sprintf</strong></a>
<dd>This function has been updated to allow double input.<p>

<dt>Updates to GRIB reader
<dd>The GRIB reader in NCL has been updated to add support for NCEP
GRIB tables 129, 130 and 131.

</dl>

<b>Important bug fixes</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/equiv_sample_size.html"><strong>equiv_sample_size</strong></a>

<dd>Fixed a bug for the case where an entire input series was
missing. This routine will return a missing value if any input series
are all missing.
<p>

<dt><a href="Document/Functions/Built-in/ezfftf.html"><strong>ezfftf</strong></a>, <a href="Document/Functions/Built-in/specx_anal.html"><strong>specx_anal</strong></a>

<dd>Fixed a bug that would cause a core dump on some systems if the
input array had an odd number of elements.
<p>

<dt>GRIB reader bug fix

<dd>The GRIB reader was not recognizing all bits set in the lat/lon
increment octets of the GDS as meaning "undefined", and thus Dj and Di
were being calculated incorrectly. In this situation, Dj and Di were
fixed to be calculated from the number of lats/lons and the
endpoints.<p>

<dt><a href="Document/Functions/Built-in/idsfft.html"><strong>idsfft</strong></a>

<dd>Fixed a serious bug that would cause incorrect output if your
input array was non-square.
<p>

<dt><a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>

<dd>Fixed a bug that would cause this routine to core dump if invoked
multiple times with the same specification string.<p>

<dt><a href="Document/Functions/Built-in/write_matrix.html"><strong>write_matrix</strong></a>

<dd>Data was being printed in column x row format instead of
row x column format as advertised.

</dl>

<a name="a030"></a>
<a name="4.2.0.a030"></a>
<hr><hr>
<h2>Version 4.2.0.a030</h2>
<h3>1 July 2003</h3><p>

This version was released shortly after the previous version to fix
some bugs that were found in the dashline and stippling code. Also,
some people were running into problems with cyclic data.  If you have
problems with this version, please send email to <a
href="mailto:haley@ucar.edu">Mary Haley</a>.<p>

<a name="a029"></a>
<a name="4.2.0.a029"></a>
<hr><hr>

<h2>Version 4.2.0.a029</h2>
<h3>1 July 2003</h3><p>

<b>New documentation</b><p>

<dl>
<dt>NCL mini reference manual

<dd>There's a new mini NCL reference manual that you can print out,
courtesy of Dennis Shea and Sylvia Murphy of the Climate and Global
Dynamics Division at NCAR.  It contains information on language
syntax, file I/O, attributes and coordinate variables, data
processing, and how to access external codes. It's available in PDF
format from the <a href="Document/Manuals/index-2.html">manuals
page</a>.
<p>

</dl>

<b>New and updated functionality</b><p>

<dl>

<dt>New way to create a double precision variable

<dd>You can now specify doubles on the fly without having to use the
<a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> function. The format is similar to Fortran, in
which you use a 'D' or 'd' specification. The following are
equivalent, and produce a NCL variable of type "double":<p>

<pre>
    d = 1d
    d = 1D
    d = 1D0
    d = 1d+0
    d = 1d-0
</pre>

<p>

<dt><a href="Document/Functions/Built-in/escovc.html"><strong>escovc</strong></a>
<dd>Calculates cross-covariance between two variables.
<p>

<dt><a href="Document/Functions/Built-in/filwgts_normal.html"><strong>filwgts_normal</strong></a>

<dd>Calculates 1D filter weights based on the gaussian (normal)
distribution.
<p>

<dt><a href="Document/Functions/Built-in/fspan.html"><strong>fspan</strong></a>
<dd>This function has been updated to allow numeric input.
<p>

<dt><a href="Document/Functions/Built-in/getfiledimsizes.html"><strong>getfiledimsizes</strong></a>
<dd>Returns a list of dimension sizes of the given file variable.
<p>

<dt><a href="Document/Functions/Built-in/getfilevardimsizes.html"><strong>getfilevardimsizes</strong></a>

<dd>Returns an array of integer dimension sizes for file
variables. This function already existed as "filevardimsizes", but to
stay consistent with the naming convention of other file retrieval
functions (they all start with the word "get"), we decided to give it
a new name. The old name will still work forever for backwards
compatibility.<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
plotting script that recognizes the <a href="Document/Graphics/Resources/gsn.html">gsn*String</a>
resources.

<dd>The font height of the three subtitles at the top can now be set
individually using the resources <a href="Document/Graphics/Resources/gsn.html#gsnLeftStringFontHeightF"><em>gsnLeftStringFontHeightF</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnCenterStringFontHeightF"><em>gsnCenterStringFontHeightF</em></a>, and <a href="Document/Graphics/Resources/gsn.html#gsnRightStringFontHeightF"><em>gsnRightStringFontHeightF</em></a>. You can also set all
three font heights with the single resource gsnStringFontHeightF.  The
subtitle font heights can also still be set with <a href="Document/Graphics/Resources/tx.html#txFontHeightF"><em>txFontHeightF</em></a>, but setting this resource may
affect your lat/lon label sizes in a polar plot.<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
<i>polar</i> plotting script.

<dd>The font and font height of the latitude/longitude labels on a
polar stereographic plot can now be controlled via the resources
<a href="Document/Graphics/Resources/gsn.html#gsnPolarLabelFont"><em>gsnPolarLabelFont</em></a> and <a href="Document/Graphics/Resources/gsn.html#gsnPolarLabelFontHeightF"><em>gsnPolarLabelFontHeightF</em></a>.<p>

<dt><a href="Document/Functions/Built-in/isfilepresent.html"><strong>isfilepresent</strong></a>
<dd>Checks for the existence of a file.<p>

<dt><a href="Document/Functions/Built-in/isunlimited.html"><strong>isunlimited</strong></a>

<dd>Checks if a named dimension in the file is defined as an unlimited
dimension.<p>

<dt><a href="Document/Functions/Built-in/NhlNewDashPattern.html"><strong>NhlNewDashPattern</strong></a>


<dd>Adds new dash patterns to the existing <a href="Document/Graphics/dash_patterns.html">table of dash
patterns</a>. For an example click on the script <a href="NclScripts/dashlines.html">dashlines.ncl</a>, or see <a href="https://www.ncl.ucar.edu/Images/dashlines.gif">its output</a>. <p>

<dt><a href="Document/Functions/Built-in/NhlNewMarker.html"><strong>NhlNewMarker</strong></a>

<dd>Adds new markers to the existing <a href="Document/Graphics/marker_styles.html">table of
markers</a>. For an example, click on the script <a href="NclScripts/markers.html">markers.ncl</a>, or see <a href="https://www.ncl.ucar.edu/Images/markers.gif">its output</a>.<p>

<dt>Stipple dot size control

<dd>You can now control the size of stipple dots (pattern 17 in the
<a href="Document/Graphics/fill_patterns.html">fill pattern
table</a>) using the new resources <a href="Document/Graphics/Resources/cn.html#cnFillDotSizeF"><em>cnFillDotSizeF</em></a>, <a href="Document/Graphics/Resources/gs.html#gsFillDotSizeF"><em>gsFillDotSizeF</em></a>, <a href="Document/Graphics/Resources/lb.html#lbFillDotSizeF"><em>lbFillDotSizeF</em></a>, and <a href="Document/Graphics/Resources/mp.html#mpFillDotSizeF"><em>mpFillDotSizeF</em></a>.<p>

For an example, click on the script <a href="NclScripts/stipple.html">stipple.ncl</a>, or see its output
(<a href="https://www.ncl.ucar.edu/Images/stipple1.gif">frame 1</a>, <a href="https://www.ncl.ucar.edu/Images/stipple2.gif">frame 2</a>, and <a href="https://www.ncl.ucar.edu/Images/stipple3.gif">frame 3</a>).<p>

<dt><a href="Document/Functions/Built-in/ut_calendar.html"><strong>ut_calendar</strong></a>, <a href="Document/Functions/Built-in/ut_inv_calendar.html"><strong>ut_inv_calendar</strong></a>

<dd>Converts from time values with specific units to UTC-referenced
dates, and vice versa. These fuctions use routines in the <a href="http://my.unidata.ucar.edu/content/software/udunits/">Udunits</a>
library to do the conversions.

</dl>

<b>Important bug fixes</b><p>

<dl>

<dt>Fix for cases where you have constant X or Y data
in an XY plot.

<dd>Previously, if you had an XY plot in which the data was constant
in X or Y, you would get a warning message:
 
<pre>
   warning:TransInitialize: Zero Y coordinate span: defaulting:[errno=1104]
</pre>

and the axis representing the constant data would default to a minimum
of 0 and a maximum of 1. This has been fixed so that the minimum and
maximum are calculated based on the value of the constant data.<p>

<a name="EtaModel"></a>
<dt>Changes to GRIB reader

<dd>The GRIB reader in NCL has been updated using the currently
documented values at:

<blockquote>
<a href="http://www.nco.ncep.noaa.gov/pmb/docs/on388/">http://www.nco.ncep.noaa.gov/pmb/docs/on388/</a>
</blockquote>

with the exception that model index 84 was changed from "MESO ETA
Model (currently 12 km)" to simply "MESO ETA Model", because we
believe the same index has been used historically for a number of
different model resolutions. Model indexes 83 and 85 are changed from
"No longer used" to what they were previously: "ETA Model - 80 km
version" and "ETA Model - 30 km version", on the assumption that any
GRIB file with these model indexes would be an old one.<p>


<dt>line thickness in PostScript files

<dd>With the addition of the PDF driver, the line thickness for the
various output devices (NCGM, X11 window, PS, and PDF) were adjusted
to try to get them all to look the same. This resulted in line
thicknesses for PS files being noticeably thicker, so they were
reduced back to what they looked like before version 4.2.0.a028.<p>

<dt>markers

<dd>With the addition of the <a href="Document/Functions/Built-in/NhlNewMarker.html"><strong>NhlNewMarker</strong></a>
routine, the current existing markers in NCL have been adjusted to be
more centered with respect to its position coordinates.  These
differences will probably not be noticeable for standard marker
programs.  However, if you are significantly increasing the size of
your markers, you may notice a slight shift in the X and/or Y
direction. <p>

</dl>


<a name="a028"></a>
<a name="4.2.0.a028"></a>
<hr><hr>

<h2>Version 4.2.0.a028</h2>
<h3>31 March 2003</h3><p>

<ul>

<li><a href="#NewGRIBCapabilities">Changes and new capabilities in
GRIB reader</a>

<li><a href="#PDFDriver">Sending output to a PDF file</a>

<li><a href="#NCLScalars">You can now write true scalars to an HDF or
netCDF file</a>

<li><a href="#PerformanceEnhancement">Performance enhancement for
array variable initialization and assignment</a>

<li><a href="#NewFunctions">New and updated functions</a>

<li><a href="#BugFixes">Important bug fixes</a>

</ul>

<dl>
<dt><a name="NewGRIBCapabilities"></a>Changes and new
capabilities in GRIB reader

<dd>Some major additions have been added to NCL's GRIB file reader to
make it much more robust and to fix some bugs.<p>

For more information, please see the "<a href="Document/Manuals/Ref_Manual/NclFormatSupport.html">supported data formats
information</a>" section in the NCL Reference Manual.<p>

The ability to load GRIB parameters from a file has been added.
This can be done by setting the environment variable
NCL_GRIB_PTABLE_PATH to a file or directory path. Parameter tables
read from a file have precedence over built-in tables that would
otherwise apply to the same dataset. An interface for adjusting this
precedence at run-time is on the enhancement request list.<p>

Many new built-in parameter tables were added, including all tables
supported by <a
href="http://www.cpc.ncep.noaa.gov/products/wesley/wgrib.html">wgrib</a>,
three <a href="http://www.fsl.noaa.gov/">FSL</a> tables, and a Navy <a
href="http://www.fnoc.navy.mil/">Fleet Numerical Meteorology and
Oceanography Center</a> table.<p>

Support was added for thinned "quasi-regular" grids.<p>

The way NCL names certain GRIB variables has been changed.  This may
result in variable names that are incompatible with previous names. In
particular, variables involving average, accumulation, and difference
over specific periods of time.  For example, the variable
PRATE_GDS4_SFC_ave will now be PRATE_GDS4_SFC_ave6h.  This was
required because some GRIB files have averages for several differing
periods on the same file.<p>

A problem was fixed for parameters less than 128 in ECMWF files.<p>

<dt><a name="PDFDriver"></a>Sending output to a PDF file<p>

<dd>A PDF driver was added to NCL, allowing you to direct your
graphical output directly to PDF.  To use this driver with the GSN*
suite of scripts, simply change the first argument of your call to
<a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a> to "pdf". A file with
the name "<i>file</i>.pdf" will be created, where <i>file</i> is the
second argument to gsn_open_wks.<p>

Otherwise, you can create a <a href="Document/HLUs/Classes/PDFWorkstation.html"><strong>PDFWorkstation</strong></a> much
like you do a <a href="Document/HLUs/Classes/PSWorkstation.html"><strong>PSWorkstation</strong></a>.<p>

<dt><a name="NCLScalars"></a>You can now write true scalars to an
HDF or netCDF file<p>

<dd>Previously, if you wrote an NCL scalar to an HDF or netCDF file and
then did a dump on the file, you would see that the scalar was written
out as a 1D array of length one, rather than as a true
scalar. For example:

<pre>
    netcdf test {
    dimensions:
            ncl_scalar = 1 ;
    variables:
            int c(ncl_scalar) ;
    data:
    
     c = 5 ;
    }
</pre>

Now, you can write scalars to an HDF or netCDF file using one of two
methods:

<ol>

<li>Use the <a href="Document/Functions/Built-in/filevardef.html"><strong>filevardef</strong></a> procedure:
 
<pre>
    f = <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>("test.nc","c")
    <a href="Document/Functions/Built-in/filevardef.html"><strong>filevardef</strong></a>(f,"c","integer","ncl_scalar")
    c    = 5
    f->c = c
</pre>
 
<li>Create a scalar variable in NCL, assign it the dimension name
"ncl_scalar", and then assign this variable to the file:
 
<pre>
    f    = <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>("test.nc","c")
    c    = 5
    c!0  = "ncl_scalar"
    f->c = c
</pre>

Using one of the above methods results in a file as follows:
 
<pre>
    netcdf test {
    variables:
            int c ;
    data:
    
     c = 5 ;
    }
</pre>


<li>Use a more efficient method to avoid the double copying of
attributes to a file:

<pre>
    c    = 5.123
    c@long_name = "sample constant"
    c@units     = "m"

    f = <a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>("test.nc","c")
    <a href="Document/Functions/Built-in/filevardef.html"><strong>filevardef</strong></a>(f,"c", <a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a>(c), "ncl_scalar")
    <a href="Document/Functions/Built-in/filevarattdef.html"><strong>filevarattdef</strong></a>(f,"c", c)
    f-&gt;c = (/ c /)                    ; Use '(/' and '/)' to avoid
                                      ; copying of attributes.
</pre>

Using the above method results in a file as follows:
 
<pre>
    netcdf test {
    variables:
            float c ;
                    c:units = "m" ;
                    c:long_name = "sample constant" ;
    }
</pre>

</ol>

You are no longer allowed to define the dimension "ncl_scalar" using
<a href="Document/Functions/Built-in/filedimdef.html"><strong>filedimdef</strong></a>. If you do, a warning level message is
returned:

<pre>
    FileAddDim:"ncl_scalar" is a reserved file dimension name in NCL;
    it cannot be defined by the user
</pre>
 
Note that there is no restriction on using the name "ncl_scalar" as a
dimension name for ordinary variables: only for defining it as a file
dimension.<p>

<dt><a name="PerformanceEnhancement"></a>Performance
enhancement for array variable initialization and assignment<p>

<dd>Whenever the <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a> function is invoked, it fills
the variable with missing values. This method has been improved to
double the number of initializations taking place for each
iteration.<p>

Where possible, contiguous data are now copied used single invocations
of memcpy, thus speeding up the intialization of various kinds of
array assignments, including:

<ul>
<li>unsubscripted assignment where the types differ
<li>unsubscripted = subscripted: t = u(1,:,:)
<li>subscripted = unsubscripted: t(1,:,:) = u
<li>subscripted = subscripted: t(1,:,:) = u(0,0:9,:)
<li>subscripted = scalar: t(1,:,:) = 10.0
</ul>

The optimization is only possible when certain conditions are met:<p>

<ul>
<li>the stride is positive
<li>the dimension is not reversed
<li>the dimension is not reordered
<li>the dimension does not employ vector subsetting
</ul>

<b><a name="NewFunctions"></a>New and updated functions</b><p>

<dt><a href="Document/Functions/Built-in/dspnt2s.html"><strong>dspnt2s</strong></a>, <a href="Document/Functions/Built-in/dspnt2d.html"><strong>dspnt2d</strong></a>,
<a href="Document/Functions/Built-in/dspnt3s.html"><strong>dspnt3s</strong></a>, <a href="Document/Functions/Built-in/dspnt3d.html"><strong>dspnt3d</strong></a>.


<dd>These routines were updated to allow multiple dimensions.
<p>

<dt><a href="Document/Functions/Built-in/gammainc.html"><strong>gammainc</strong></a>

<dd>Evaluates the incomplete gamma function; often used to determine
probabilities<p>

<dt><a href="Document/Functions/Built-in/getfilevartypes.html"><strong>getfilevartypes</strong></a>
<dd>Returns the types of the named variables in a given file.
<p>

<dt>Any <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
script that recognizes the <a href="Document/Graphics/Resources/gsn.html#gsnAddCyclic"><em>gsnAddCyclic</em></a>
resource.

<dd>The <a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
plotting scripts have been updated such that if 2D latitude/longitude
coordinate variables are present (that is, the data has the special
"lat2d" and "lon2d" attributes set to 2D arrays), then <a href="Document/Graphics/Resources/gsn.html#gsnAddCyclic"><em>gsnAddCyclic</em></a> will default to False.<p>

This means that any NCL scripts that are setting the lat2d/lon2d
attributes and expecting the cyclic point to be added, you will need
to add a line setting <a href="Document/Graphics/Resources/gsn.html#gsnAddCyclic"><em>gsnAddCyclic</em></a> to
True:

<pre>
  res@gsnAddCyclic = True
</pre>
<p>


<dt><a href="Document/Graphics/Interfaces/gsn_csm_vector_map_ce.html"><strong>gsn_csm_vector_map_ce</strong></a> and
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_ce.html"><strong>gsn_csm_vector_scalar_map_ce</strong></a>

<dd>These two plotting functions were modified so that if both a
labelbar and a vector reference annotation are drawn, and you move the
reference annotation up, then the labelbar will not get moved up into
the tickmarks. If you were previously getting around this problem by
setting the <a href="Document/Graphics/Resources/pm.html#pmLabelBarOrthogonalPosF"><em>pmLabelBarOrthogonalPosF</em></a> resource to
readjust the position of the labelbar, then you may want to consider
removing the setting of this resource altogether.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>

<dd>Updated to add a new resource called <a href="Document/Graphics/Resources/gsn.html#gsnPanelFigureStringsFontHeightF"><em>gsnPanelFigureStringsFontHeightF</em></a>. Use this
resource to control the font height of the panel figure strings that
you specify with the <a href="Document/Graphics/Resources/gsn.html#gsnPanelFigureStrings"><em>gsnPanelFigureStrings</em></a>
resource.
<p>

<dt><a href="Document/Functions/Built-in/isdimnamed.html"><strong>isdimnamed</strong></a>
<dd>Checks whether one or more of a variable's dimensions are named.
<p>

<dt><a href="Document/Functions/Built-in/new.html"><strong>new</strong></a>
<dd>This function, which allocates space for a specified data type, has
been improved by speeding up the initialization that takes place when you
invoke it. In some of our timing tests on large allocations of data, we saw
speed-ups of 2.5 times and greater.
<p>

<dt><a href="Document/Functions/Built-in/triple2grid.html"><strong>triple2grid</strong></a>

<dd>Places randomly-spaced data onto the nearest locations of a grid
with two-dimensional latitude and longitude arrays.
<p>

<dt><a href="Document/Functions/Built-in/uv2vr_cfd.html"><strong>uv2vr_cfd</strong></a>

<dd>A term that accounts for the convergence of the meridions has been
added to this routine. The effects should be small except possibly
near the poles.
<p>

<dt><a href="Document/Functions/Built-in/wgt_areaave2.html"><strong>wgt_areaave2</strong></a>
<dd>Calculates the area average of a quantity using 2D weights.
<p>

<dt><a href="Document/Functions/Built-in/wgt_areasum2.html"><strong>wgt_areasum2</strong></a>
<dd>Calculates the area sum of a quantity using 2D weights.
<p>

<dt><a href="Document/Functions/Built-in/wgt_arearmse2.html"><strong>wgt_arearmse2</strong></a>
<dd>Calculates the area root-mean-square-difference between two variables
using 2D weights.
<p>

<dt><a href="Document/Functions/Built-in/write_matrix.html"><strong>write_matrix</strong></a>
<dd>Prints nicely-formatted 2D arrays.
<p>
</dl>

<a name="BugFixes"></a><b>Important bug fixes</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/fbinrecwrite.html"><strong>fbinrecwrite</strong></a>

<dd>This procedure was fixed so that it doesn't core dump if you try
to write characters to a file. This bug is related to the
<a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a> bug mentioned next.
<p>


<dt><a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a>

<dd>This function now correctly returns the string "character" when
you call it with a variable that is of type character. It was
previously just returning "char". <b>Make sure you fix any scripts
that are calling this function and checking for "char".</b>

</dl>
<p>

<a name="a027"></a>
<a name="4.2.0.a027"></a>
<hr>

<h2>Version 4.2.0.a027</h2>
<h3>30 December 2002</h3><p>

<b>New and updated functions, and bug fixes</b><p>

<dl>

<dt>memory bug fix

<dd>A couple of memory bugs were fixed in NCL. One bug
caused some large NCL scripts to core dump or to say a variable wasn't
defined when it very clearly was.  This bug was particularly
noticeable if you had lots of do loops, or were creating lots of
variables in your main program.  The second bug occurred when NCL
scripts erroneously referenced undefined variable attributes, and then
tried to delete them.
<p>

<dt>filling high-resolution maps (bug fix)

<dd>A bug was fixed in which if you drew a low resolution
map and filled the continents, and then drew a high resolution map and
filled the continents, you would get some blocky holes in the filled
areas.
<p>

<dt>Streamline bug

<dd>A streamline bug that was similar to the vector bug
mentioned below was fixed. This bug caused coordinate arrays to be
ignored when streamline plots were being overlaid on a map plot, and
thus the streamlines were not appearing in the right location.
<p>

<dt>Vector bug

<dd>Fixed a vector bug that caused the reference length for
normal line and fill vectors to not be calculated properly if the
reference magnitude resource (<a href="Document/Graphics/Resources/vc.html#vcRefMagnitudeF"><em>vcRefMagnitudeF</em></a>) was set, <b>and</b> the
reference length resource had its default value of 0.0, thus
indicating that NCL should determine the reference length itself.
<p>

<dt><a href="Document/Functions/Built-in/dim_num.html"><strong>dim_num</strong></a>
<dd>Counts the number of True values of the n-1 rightmost
dimension for all dimensions 0...n-2
<p>


<dt><a href="Document/Graphics/Interfaces/gsn_add_text.html"><strong>gsn_add_text</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_text.html"><strong>gsn_text</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_text_ndc.html"><strong>gsn_text_ndc</strong></a>

<dd>These routines have been updated to allow arrays of text strings
to be drawn. To see some examples, go to the application <a href="Applications/text.html">text examples</a>.
<p>


<dt><a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map.html"><strong>gsn_csm_vector_scalar_map</strong></a>,
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_ce.html"><strong>gsn_csm_vector_scalar_map_ce</strong></a>, and
<a href="Document/Graphics/Interfaces/gsn_csm_vector_scalar_map_polar.html"><strong>gsn_csm_vector_scalar_map_polar</strong></a>

<dd>These routines have been updated to use the scalar field's long_name
and units attributes to label the top left and right of the plot, rather
than the U/V field attributes.
<p>


<dt><a href="Applications/histo.html">histograms</a>

<dd>New functionality has been added to <a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a> to allow you to specify ranges
and discrete values together in one histogram. New histogram resources
have been added to allow you to bin values that are outside the given
range of class values (<a href="Document/Graphics/Resources/gsn.html#gsnHistogramMinMaxBinsOn"><em>gsnHistogramMinMaxBinsOn</em></a>), to make the histograms
horizontal (<a href="Document/Graphics/Resources/gsn.html#gsnHistogramHorizontal"><em>gsnHistogramHorizontal</em></a>), and
to control how missing values are handled (<a href="Document/Graphics/Resources/gsn.html#gsnHistogramComputePercentagesNoMissing"><em>gsnHistogramComputePercentagesNoMissing</em></a>).<p> For
an example, click on the script <a href="NclScripts/histogram.html">histogram.ncl</a>, or see its output
(<a href="https://www.ncl.ucar.edu/Images/histo1.gif">frame 1</a>, <a href="https://www.ncl.ucar.edu/Images/histo2.gif">frame 2</a>, <a href="https://www.ncl.ucar.edu/Images/histo3.gif">frame 3</a>, <a href="https://www.ncl.ucar.edu/Images/histo4.gif">frame 4</a>, and <a href="https://www.ncl.ucar.edu/Images/histo5.gif">frame 5</a>).
<p>


<dt><a href="Document/Functions/Built-in/round.html"><strong>round</strong></a>

<dd>Rounds a float or double variable to the nearest whole number.
<p>


<dt><a href="Document/Functions/Built-in/svd_lapack.html"><strong>svd_lapack</strong></a>

<dd>Computes singular value decomposition (SVD) of a general
rectangular matrix. Returned are the singular values and the left and
right singular vectors.
<p>

</dl>

<p>

<a name="a026"></a>
<a name="4.2.0.a026"></a>
<hr><hr>

<h2>Version 4.2.0.a026</h2>
<h3>24 September 2002</h3><p>

A vector bug was discovered in version 4.2.0.a025 that's serious
enough to warrant releasing a bug fix right away (hence this
version). This bug caused coordinate arrays to be ignored when vector
plots were being overlaid on a map plot, and thus the vectors were not
appearing in the right location.<p>

<a name="a025"></a>
<a name="4.2.0.a025"></a>
<hr><hr>

<h2>Version 4.2.0.a025</h2>
<h3>16 September 2002</h3><p>

<b>New capabilities in NCL</b><p>

<dl>

<dt>New capabilities with spherical 2D grids and<BR>
discrete rasterization capability

<dd>NCL can now handle 2D spherical grids; that is, grids that are
represented by 2D coordinate arrays. This new capability can be used
with both contour and vector plots.  For an example, click on the
script <a href="NclScripts/pop.html">pop.ncl</a>, or see its
output (<a href="https://www.ncl.ucar.edu/Images/pop1.gif">frame 1</a>, <a href="https://www.ncl.ucar.edu/Images/pop2.gif">frame 2</a>, <a href="https://www.ncl.ucar.edu/Images/pop3.gif">frame 3</a>, <a href="https://www.ncl.ucar.edu/Images/pop4.gif">frame 4</a>, <a href="https://www.ncl.ucar.edu/Images/pop5.gif">frame 5</a>).<p>

The above example also showcases the new discrete rasterization
capability. If the lat/lon coordinate arrays have one more element
along both dimensions than the data array, then in raster mode, this
will cause the raster fill to treat the coordinate arrays as cell
boundaries.<p>

You can see some more examples in the <a href="Applications/pop.html">pop applications</a> page.
<p>

<dt>ictrans and med bugs

<dd>A bug was fixed in both ictrans and med that caused metafiles to
not be appended properly on LINUX systems.  The problem would surface
when you tried to write multiple frames from one metafile to another
metafile.
<p>

<dt>Running NCL scripts

<dd>You can now run an NCL script without using the "&lt;" character:
  
<blockquote> 
ncl xy.ncl
</blockquote> 

<b>or</b>:

<blockquote> 
ncl &lt; xy.ncl
</blockquote> 
</tr>

</dl>
<p>

<b>New and updated functions</b><p>

<dl>

<dt><a href="Applications/bar.html">bar chart
capability</a>

<dd>You can now use multiple colors to fill the bars in a bar chart.
See example 7 in the <a href="Applications/bar.html">bar
applications</a> page.
<p>


<dt><a href="Document/Functions/Built-in/ftcurv.html"><strong>ftcurv</strong></a>, <a href="Document/Functions/Built-in/ftcurvd.html"><strong>ftcurvd</strong></a>,
<a href="Document/Functions/Built-in/ftcurvi.html"><strong>ftcurvi</strong></a>, <a href="Document/Functions/Built-in/ftcurvp.html"><strong>ftcurvp</strong></a>,
<a href="Document/Functions/Built-in/ftcurvpi.html"><strong>ftcurvpi</strong></a>, <a href="Document/Functions/Built-in/ftcurvps.html"><strong>ftcurvps</strong></a>,
<a href="Document/Functions/Built-in/ftcurvs.html"><strong>ftcurvs</strong></a>, <a href="Document/Functions/Built-in/ftsurf.html"><strong>ftsurf</strong></a>

<dd>Updated to allow the input to be of type <i>numeric</i> (instead
of just <i>float</i>), and to allow <i>xi</i> to be multi-dimensional.
<p>


<dt><a href="Document/Functions/Built-in/ftkurv.html"><strong>ftkurv</strong></a>, <a href="Document/Functions/Built-in/ftkurvd.html"><strong>ftkurvd</strong></a>,
<a href="Document/Functions/Built-in/ftkurvp.html"><strong>ftkurvp</strong></a>, <a href="Document/Functions/Built-in/ftkurvpd.html"><strong>ftkurvpd</strong></a>

<dd>Updated to allow the input to be of type <i>numeric</i> (instead
of just <i>float</i>), and the output to be <i>float</i> or
<i>double</i>.
<p>

<dt><a href="Document/Functions/Built-in/getvardims.html"><strong>getvardims</strong></a>

<dd>Returns a list of dimension names of the given variable.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_draw_named_colors.html"><strong>gsn_draw_named_colors</strong></a>

<dd>Takes a list of named colors, and draws them in a grid with the
color name and corresponding RGB triplet listed.  For an example,
click on the script <a href="Document/Manuals/Getting_Started/Scripts/gsn_draw_named_colors.html">gsn_draw_named_colors.ncl</a>,
or see its <a href="Document/Manuals/Getting_Started/Images/gsn_draw_named_colors.gif">output</a>.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_reverse_colormap.html"><strong>gsn_reverse_colormap</strong></a>

<dd>Reverses the current color map keeping the foreground and
background colors the same. You must have this version of NCL and load
gsn_code.ncl in order to have access to this function. For an example,
click on the script <a href="Document/Manuals/Getting_Started/Scripts/gsn_reverse_colormap.html">gsn_reverse_colormap.ncl</a>,
or see its <a href="Document/Manuals/Getting_Started/Images/gsn_reverse_colormap1.gif">original color
map</a> and then the <a href="Document/Manuals/Getting_Started/Images/gsn_reverse_colormap2.gif">reversed color
map</a>.
<p>


<dt><a href="Applications/histo.html">histograms</a>

<dd>If you enter non-equally spaced values for the <a href="Document/Graphics/Resources/gsn.html#gsnHistogramClassIntervals"><em>gsnHistogramClassIntervals</em></a> or <a href="Document/Graphics/Resources/gsn.html#gsnHistogramBinIntervals"><em>gsnHistogramBinIntervals</em></a> resource, then <a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a> will now make them equally
spaced on the axis.<p>

See example 5 in the <a href="Applications/histo.html">histogram application</a> pages.
<p>


<dt><a href="Document/Functions/Built-in/linint1.html"><strong>linint1</strong></a>, <a href="Document/Functions/Built-in/linint2.html"><strong>linint2</strong></a>,
<a href="Document/Functions/Built-in/linint2_points.html"><strong>linint2_points</strong></a>

<dd>Updated to allow input arrays to be multi-dimensional.
<p>

<dt><a href="Document/Functions/Built-in/nggetp.html"><strong>nggetp</strong></a>, <a href="Document/Functions/Built-in/ngsetp.html"><strong>ngsetp</strong></a>

<dd>Sets and retrieves parameters for the
<a href="Document/Functions/Built-in/nglogo.html"><strong>nglogo</strong></a>, <a href="Document/Functions/Built-in/ngezlogo.html"><strong>ngezlogo</strong></a> routines.

</dl>

<a name="a024"></a>
<a name="4.2.0.a024"></a>
<hr><hr>

<h2>Version 4.2.0.a024</h2>
<h3>13 May 2002</h3><p>

<dl>
<b>New and updated functions</b><p>

<dt><a href="Document/Functions/Built-in/cdfbin_p.html"><strong>cdfbin_p</strong></a>, <a href="Document/Functions/Built-in/cdfbin_s.html"><strong>cdfbin_s</strong></a>,
<a href="Document/Functions/Built-in/cdfbin_xn.html"><strong>cdfbin_xn</strong></a>, <a href="Document/Functions/Built-in/cdfbin_pr.html"><strong>cdfbin_pr</strong></a>

<dd>Calculates various parameters of the binomial distribution.
<p>

<dt><a href="Document/Functions/Built-in/cdfchi_p.html"><strong>cdfchi_p</strong></a>, <a href="Document/Functions/Built-in/cdfchi_x.html"><strong>cdfchi_x</strong></a>

<dd>Calculates various parameters of the chi-square distribution.
<p>

<dt><a href="Document/Functions/Built-in/cdfgam_p.html"><strong>cdfgam_p</strong></a>, <a href="Document/Functions/Built-in/cdfgam_x.html"><strong>cdfgam_x</strong></a>

<dd>Calculates various parameters of the gamma distribution.
<p>

<dt><a href="Document/Functions/Built-in/cdfnor_p.html"><strong>cdfnor_p</strong></a>, <a href="Document/Functions/Built-in/cdfnor_x.html"><strong>cdfnor_x</strong></a>

<dd>Calculates various parameters of the normal distribution.
<p>

<dt><a href="Document/Functions/Built-in/dtrend_quadratic.html"><strong>dtrend_quadratic</strong></a>

<dd>Estimates and removes the least squares quadratic trend at all
grid points.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_attach_plots.html"><strong>gsn_attach_plots</strong></a>

<dd>Updated so that you can now set the <a href="Document/Graphics/Resources/gsn.html#gsnMaximize"><em>gsnMaximize</em></a> resource to maximize the size of the
attached plots.
<p>

<dt>MacOSX version of NCL available.

<dd>You can download the MacOSX NCL binaries by going to the <a href="Download/index.html">download section</a> and following
instructions.
<p>

<dt><a href="Document/Functions/Built-in/ngezlogo.html"><strong>ngezlogo</strong></a>

<dd>Draws the NCAR logo in the lower right corner of the workstation.
For an example, click on the script <a href="NclScripts/nglogo.html">nglogo.ncl</a>, or see its <a href="https://www.ncl.ucar.edu/Images/nglogo.gif">NCGM</a> or <a href="https://www.ncl.ucar.edu/Images/nglogo.ps">PostScript</a> output.
<p>

<dt><a href="Document/Functions/Built-in/nglogo.html"><strong>nglogo</strong></a>
<dd>Draws various NCAR and UCAR logos.  For an example, click on the
script <a href="NclScripts/nglogo.html">nglogo.ncl</a>, or see
its <a href="https://www.ncl.ucar.edu/Images/nglogo.gif">NCGM</a> or <a href="https://www.ncl.ucar.edu/Images/nglogo.ps">PostScript</a> output.

<p>

<dt><a href="Document/Functions/Built-in/sigma2hybrid.html"><strong>sigma2hybrid</strong></a>

<dd>Interpolates a vertical column from sigma coordinates to hybrid
coordinates.<p>
 
</dl>

<a name="a023"></a>
<a name="4.2.0.a023"></a>
<hr><hr>

<h2>Version 4.2.0.a023</h2>
<h3>14 February 2002</h3><p>

<dt>labelbars and legends bug

<dd>Fixed a change in the way labelbars and legends were drawn that
would cause some of the labels to disappear.
<p>

<dt>Automatic generation of map tickmarks (lat/lon labels)

<dd>You can have lat/lon labels automatically generated for several
map projections. This feature has not been incorporated into the
<a href="Document/Graphics/Interfaces/index.html">gsn_csm</a>
functions yet.<p>

To generate map tickmarks automatically (if you are not using <a href="Document/Graphics/Interfaces/index.html">gsn_csm
functions),</a> set the <a href="Document/Graphics/Resources/pm.html#pmTickMarkDisplayMode"><em>pmTickMarkDisplayMode</em></a> resource to
"Always" when you are setting the map resources.<p>

For an example, click on the script <a href="NclScripts/maptm.html">maptm.ncl</a>, or see <a href="https://www.ncl.ucar.edu/Images/maptm.gif">its output</a>.
<p>

<dt><a name="RANGS">Access to RANGS/GSHHS high-resolution map database</a>

<dd>You can access the multi-resolution coastline database RANGS
(Regionally Accessible Nested Global Shorelines), developed by Rainer
Feistel from Wessel and Smith's GSHHS (Global Self-consistent
Hierarchical High-resolution Shoreline) database.<p>

For information on how to download and install the RANGS/GSHHS,
please <a href="Document/Graphics/rangs.html">click here</a>.
<p>

Once you have the database installed, you can see an example by
clicking on the script <a href="Applications/Scripts/coast_2.html">coast_2.ncl</a>, or
viewing <a href="Applications/Images/coast_2_lg.png">its
output</a>.
<p>

</dl>

<b>New and updated functions</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/dewtemp_trh.html"><strong>dewtemp_trh</strong></a>

<dd>Calculates the dew point temperature given temperature and
relative humidity.
 <p>

<dt><a href="Document/Graphics/Interfaces/gsn_attach_plots.html"><strong>gsn_attach_plots</strong></a>

<dd>Starting with a base plot, this function attaches a series of
plots to the right Y axis (or bottom X axis) of the previous plot.
You must have at least this version of NCL and load gsn_code.ncl to
have access to this function.  For an example, see the script <a href="Document/Manuals/Getting_Started/Scripts/gsn_attach_plots.html">gsn_attach_plots.ncl</a>
and <a href="Document/Manuals/Getting_Started/Images/gsn_attach_plots.gif">its
output</a>.
<p>

<dt><dfuncref uri="GSN_FUNC">gsn_csm_y</funcref>

<dd>This function is similar to <a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>, except that only the Y values are
passed in, and the X values will be index values going from 0 to
<i>npts</i>-1, where <i>npts</i> is the number of points in the Y
curve(s).  You must load gsn_code.ncl and gsn_csm.ncl to have access
to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_legend_ndc.html"><strong>gsn_legend_ndc</strong></a>

<dd>This function draws a legend anywhere in the viewport. You must
load gsn_code.ncl to have access to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_y.html"><strong>gsn_y</strong></a>

<dd>This function is similar to <a href="Document/Graphics/Interfaces/gsn_xy.html"><strong>gsn_xy</strong></a>, except that only the Y values are
passed in, and the X values will be index values going from 0 to
<i>npts</i>-1, where <i>npts</i> is the number of points in the Y
curve(s).  You must load gsn_code.ncl to have access to this function.
For an example, see the script <a href="Document/Manuals/Getting_Started/Scripts/gsn_y.html">gsn_y.ncl</a> and <a href="Document/Manuals/Getting_Started/Images/gsn_y.gif">its output</a>.
<p>

<dt><a href="Document/Functions/Built-in/ind_resolve.html"><strong>ind_resolve</strong></a>

<dd>Takes a list of indices returned by <a href="Document/Functions/Built-in/ind.html"><strong>ind</strong></a> and
resolves them to their multi-dimensional representation.
 <p>

<dt><a href="Document/Functions/Built-in/lclvl.html"><strong>lclvl</strong></a>

<dd>Calculates the pressure of the lifting condensation level.
 <p>

<dt><a href="Document/Functions/Built-in/mixhum_ptrh.html"><strong>mixhum_ptrh</strong></a>

<dd>Calculates the mixing ratio or specific humidity given pressure,
temperature and relative humidity.
 <p>

<dt><a href="Document/Functions/Built-in/rcm2points.html"><strong>rcm2points</strong></a>

<dd>Interpolates from a grid produced by the Regional Climate Model
(where grid points are represented by 2D lat/lon arrays),
to user-specified locations.
<p>

<dt><a href="Document/Functions/Built-in/wmstnm.html"><strong>wmstnm</strong></a>

<dd>This procedure uses the low-level WMSTNM routine from the <a href="http://www.ncarg.ucar.edu//supplements/wmap/index.html">Wmap package</a> to plot station
model data.
<p>

<dt><a href="Document/Functions/Built-in/dv2uvF-1.html"><strong>dv2uvF</strong></a>, <a href="Document/Functions/Built-in/dv2uvG-1.html"><strong>dv2uvG</strong></a>
<a href="Document/Functions/Built-in/uv2sfvpF-1.html"><strong>uv2sfvpF</strong></a>, <a href="Document/Functions/Built-in/uv2sfvpG-1.html"><strong>uv2sfvpG</strong></a>
<a href="Document/Functions/Built-in/uv2vrdvF-1.html"><strong>uv2vrdvF</strong></a>, <a href="Document/Functions/Built-in/uv2vrdvG-1.html"><strong>uv2vrdvG</strong></a>
<a href="Document/Functions/Built-in/vr2uvF-1.html"><strong>vr2uvF</strong></a>, <a href="Document/Functions/Built-in/vr2uvG-1.html"><strong>vr2uvG</strong></a>,
<a href="Document/Functions/Built-in/vrdv2uvF-1.html"><strong>vrdv2uvF</strong></a>, <a href="Document/Functions/Built-in/vrdv2uvG-1.html"><strong>vrdv2uvG</strong></a>

<dd>These are functional versions of the existing procedures:
<a href="Document/Functions/Built-in/dv2uvf.html"><strong>dv2uvf</strong></a>, <a href="Document/Functions/Built-in/dv2uvg.html"><strong>dv2uvg</strong></a>,
<a href="Document/Functions/Built-in/uv2sfvpf.html"><strong>uv2sfvpf</strong></a>, <a href="Document/Functions/Built-in/uv2sfvpg.html"><strong>uv2sfvpg</strong></a>,
<a href="Document/Functions/Built-in/uv2vrdvf.html"><strong>uv2vrdvf</strong></a>, <a href="Document/Functions/Built-in/uv2vrdvg.html"><strong>uv2vrdvg</strong></a>,
<a href="Document/Functions/Built-in/vr2uvf.html"><strong>vr2uvf</strong></a>, <a href="Document/Functions/Built-in/vr2uvg.html"><strong>vr2uvg</strong></a>,
<a href="Document/Functions/Built-in/vrdv2uvf.html"><strong>vrdv2uvf</strong></a>, <a href="Document/Functions/Built-in/vrdv2uvg.html"><strong>vrdv2uvg</strong></a>

</dl>

<a name="a022"></a>
<a name="4.2.0.a022"></a>
<hr><hr>

<h2>Version 4.2.0.a022</h2>
<h3>28 November 2001</h3><p>

<dl>

<dt><a href="Document/Functions/Built-in/pres_hybrid_ccm.html"><strong>pres_hybrid_ccm</strong></a>,
<a href="Document/Functions/Built-in/dpres_hybrid_ccm.html"><strong>dpres_hybrid_ccm</strong></a>

<dd>Fixed a bug that caused these functions not to work if <i>ps</i>
was more than 2 dimensions.
<p>

<dt><a href="Document/Functions/Built-in/conform.html"><strong>conform</strong></a>
<dd>Updated to allow a multi-dimensional array to conform to the shape
of another multi-dimensional array
<p>

<dt>Curly vectors

<dd>A resource was updated to allow the specification of curly
vectors. This functionality has actually been in NCL since version
4.2.0.a019, but I forgot to mention it then.  For more information,
see the <a href="Document/Graphics/Resources/vc.html#vcGlyphStyle"><em>vcGlyphStyle</em></a> resource or
see example 2 in the <a href="Applications/vector.html">vector
application</a> pages.
<p>

<dt><a href="Document/Functions/Built-in/ezfftb.html"><strong>ezfftb</strong></a>, <a href="Document/Functions/Built-in/ezfftf.html"><strong>ezfftf</strong></a>
<dd>Updated to check for missing values.
<p>

<dt><a href="Document/Functions/Built-in/filwgts_lancos.html"><strong>filwgts_lancos</strong></a>

<dd>Updated to allow <i>nsigma</i> to be numeric.
<p>

<td valign=top><a href="Document/Functions/Built-in/linint1.html"><strong>linint1</strong></a>

<td>Updated to allow the input or output X coordinates to be
increasing OR decreasing.

<dt><a href="Document/Functions/Built-in/linint2.html"><strong>linint2</strong></a>

<dd>Updated to allow the input or output X/Y coordinates to be
increasing OR decreasing.
<p>

<dt><a href="Document/Functions/Built-in/random_chi.html"><strong>random_chi</strong></a>

<dd>Generates random values of chi-square variable.
<p>

<dt><a href="Document/Functions/Built-in/random_gamma.html"><strong>random_gamma</strong></a> 

<dd>Generates random deviates from a gamma distribution.
<p>

<dt><a href="Document/Functions/Built-in/random_normal.html"><strong>random_normal</strong></a>

<dd>Generates random deviates from a normal distribution.
<p>

<dt><a href="Document/Functions/Built-in/random_setallseed.html"><strong>random_setallseed</strong></a>

<dd>Sets the seed for the family of random functions.
<p>

<dt><a href="Document/Functions/Built-in/random_uniform.html"><strong>random_uniform</strong></a>

<dd>Generates uniform random values between two given low and high
values.
<p>

<dt><a href="Document/Functions/Built-in/rcm2rgrid.html"><strong>rcm2rgrid</strong></a>

<dd>Interpolates from a grid produced by the Regional Climate Model,
where grid points are represented by 2D lat/lon arrays,
to a regular grid.
<p>

<dt><a href="Document/Functions/Built-in/rgrid2rcm.html"><strong>rgrid2rcm</strong></a>

<dd>Interpolates from a regular grid to a grid produced by the
Regional Climate Model, where grid points are represented by
2D lat/lon arrays.

</dl>

<a name="a021"></a>
<a name="4.2.0.a021"></a>
<hr><hr>

<h2>Version 4.2.0.a021</h2>
<h3>24 September 2001</h3><p>

<dl>

<dt><a href="Document/Functions/Built-in/g2gshv.html"><strong>g2gshv</strong></a>, <a href="Document/Functions/Built-in/f2gshv.html"><strong>f2gshv</strong></a>,
<a href="Document/Functions/Built-in/g2fshv.html"><strong>g2fshv</strong></a>, <a href="Document/Functions/Built-in/f2fshv.html"><strong>f2fshv</strong></a>

<dd>An error in the spherical harmonic based functions for regridding
vector quantities was fixed: the spherical harmonic coefficients after
vector analysis (optionally, truncation) were inadvertently
synthesized in scalar mode rather than vector mode.
<p>

<dt><a href="Document/Functions/Built-in/csa1.html"><strong>csa1</strong></a>, <a href="Document/Functions/Built-in/csa1d.html"><strong>csa1d</strong></a>
[<a href="Document/Functions/Built-in/csa1x.html"><strong>csa1x</strong></a>, <a href="Document/Functions/Built-in/csa1xd.html"><strong>csa1xd</strong></a>]

<dd>Calculates an approximating cubic spline for 1D input data [and
weights the input data if desired]. These are the generic and double
precision versions of <a href="Document/Functions/Built-in/csa1s.html"><strong>csa1s</strong></a>
[<a href="Document/Functions/Built-in/csa1xs.html"><strong>csa1xs</strong></a>].

<p>

<dt><a href="Document/Functions/Built-in/csa2.html"><strong>csa2</strong></a>, <a href="Document/Functions/Built-in/csa2d.html"><strong>csa2d</strong></a>
[<a href="Document/Functions/Built-in/csa2x.html"><strong>csa2x</strong></a>, <a href="Document/Functions/Built-in/csa2xd.html"><strong>csa2xd</strong></a>]

<dd>Calculates an approximating cubic spline for 2D input data [and
weights the input data if desired]. These are the generic and double
precision versions of <a href="Document/Functions/Built-in/csa2s.html"><strong>csa2s</strong></a>
[<a href="Document/Functions/Built-in/csa2xs.html"><strong>csa2xs</strong></a>].
<p>

<dt><a href="Document/Functions/Built-in/csa2l.html"><strong>csa2l</strong></a>, <a href="Document/Functions/Built-in/csa2ld.html"><strong>csa2ld</strong></a>
[<a href="Document/Functions/Built-in/csa2lx.html"><strong>csa2lx</strong></a>, <a href="Document/Functions/Built-in/csa2lxd.html"><strong>csa2lxd</strong></a>]

<dd>Calculates an approximating cubic spline for 2D input data at a
list of specified coordinates [and weights the input data if
desired]. These are the generic and double precision versions of
<a href="Document/Functions/Built-in/csa2ls.html"><strong>csa2ls</strong></a> [<a href="Document/Functions/Built-in/csa2lxs.html"><strong>csa2lxs</strong></a>].
<p>

<dt><a href="Document/Functions/Built-in/csa3.html"><strong>csa3</strong></a>, <a href="Document/Functions/Built-in/csa3d.html"><strong>csa3d</strong></a>
[<a href="Document/Functions/Built-in/csa3x.html"><strong>csa3x</strong></a>, <a href="Document/Functions/Built-in/csa3xd.html"><strong>csa3xd</strong></a>]

<dd>Calculates an approximating cubic spline for 3D input data [and
weights the input data if desired]. These are the generic and double
precision versions of <a href="Document/Functions/Built-in/csa3s.html"><strong>csa3s</strong></a>
[<a href="Document/Functions/Built-in/csa3xs.html"><strong>csa3xs</strong></a>].
<p>

<dt><a href="Document/Functions/Built-in/csa3l.html"><strong>csa3l</strong></a>, <a href="Document/Functions/Built-in/csa3ld.html"><strong>csa3ld</strong></a>
[<a href="Document/Functions/Built-in/csa3lx.html"><strong>csa3lx</strong></a>, <a href="Document/Functions/Built-in/csa3lxd.html"><strong>csa3lxd</strong></a>]

<dd>Calculates an approximating cubic spline for 3D input data at a
list of specified coordinates [and weights the input data if
desired]. These are the generic and double precision versions of
<a href="Document/Functions/Built-in/csa3ls.html"><strong>csa3ls</strong></a> [<a href="Document/Functions/Built-in/csa3lxs.html"><strong>csa3lxs</strong></a>].
<p>

<dt><a href="Document/Functions/Built-in/dspnt2.html"><strong>dspnt2</strong></a>, <a href="Document/Functions/Built-in/dspnt3.html"><strong>dspnt3</strong></a>

<dd>Interpolates 2D/3D data at specified points. These are the generic
versions of
<a href="Document/Functions/Built-in/dspnt2s.html"><strong>dspnt2s</strong></a>, <a href="Document/Functions/Built-in/dspnt2d.html"><strong>dspnt2d</strong></a>, <a href="Document/Functions/Built-in/dspnt3s.html"><strong>dspnt3s</strong></a>, <a href="Document/Functions/Built-in/dspnt3d.html"><strong>dspnt3d</strong></a>.
<p>

<dt><a href="Document/Functions/Built-in/exp_tapersh_wgts.html"><strong>exp_tapersh_wgts</strong></a>
<dd>Calculates weights which are used to perform tapering (filtering)
on the spherical harmonic coefficients.
<p>

<dt><a href="Document/Functions/Built-in/exp_tapersh.html"><strong>exp_tapersh</strong></a>, <a href="Document/Functions/Built-in/exp_tapershC.html"><strong>exp_tapershC</strong></a>
<dd>Performs tapering (filtering) on the spherical harmonic
coefficients.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_streamline.html"><strong>gsn_csm_pres_hgt_streamline</strong></a>

<dd>Draws a pressure/height plot with streamlines and contours. You
must have at least this version of NCL and load both gsn_code.ncl and
gsn_csm.ncl in order to have access to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_pres_hgt_vector.html"><strong>gsn_csm_pres_hgt_vector</strong></a>

<dd>Draws a pressure/height plot with vectors and contours. You must
have at least this version of NCL and load both gsn_code.ncl and
gsn_csm.ncl in order to have access to this function.
<p>

<dt><a href="Document/Functions/Built-in/nnpnt.html"><strong>nnpnt</strong></a>
<dd>Interpolates at a list of given points. This routine is the
generic version of <a href="Document/Functions/Built-in/nnpnts.html"><strong>nnpnts</strong></a>, <a href="Document/Functions/Built-in/nnpntd.html"><strong>nnpntd</strong></a>.
<p>

<dt><a href="Document/Functions/Built-in/nnpntinit.html"><strong>nnpntinit</strong></a>
<dd>Calculates all natural neighbor relationships in an input data
array. This is the generic version of
<a href="Document/Functions/Built-in/nnpntinits.html"><strong>nnpntinits</strong></a>, <a href="Document/Functions/Built-in/nnpntinitd.html"><strong>nnpntinitd</strong></a>.
<p>

<dt><a href="Document/Functions/Built-in/nnpnts.html"><strong>nnpnts</strong></a>, <a href="Document/Functions/Built-in/nnpntd.html"><strong>nnpntd</strong></a>
<dd>Updated to allow an array of any length.
<p>

<dt><a href="Document/Functions/Built-in/specxy_anal.html"><strong>specxy_anal</strong></a>
<dd>Updated to add an attribute called <i>coher_probability</i>.

</dl>

<a name="a020"></a>
<a name="4.2.0.a020"></a>
<hr><hr>

<h2>Version 4.2.0.a020</h2>
<h3>24 July 2001</h3><p>

<dl>
<dt><a href="Document/Functions/Built-in/dim_rmsd.html"><strong>dim_rmsd</strong></a>
<dd>Computes the root-mean-square-difference of the n-1 rightmost
dimension for all dimensions 0...n-2
<p>

<dt><a href="Document/Functions/Built-in/ezfftb.html"><strong>ezfftb</strong></a>
<dd>Updated to allow <i>xbar</i> to be a scalar
<p>

<dt><a href="Document/Functions/Built-in/get_sphere_radius.html"><strong>get_sphere_radius</strong></a>,
<a href="Document/Functions/Built-in/set_sphere_radius.html"><strong>set_sphere_radius</strong></a>

<dd>Retrieves or sets the radius of a sphere (to be used in
conjunction with the <a href="Document/Functions/spherical.html">spherical harmonic</a>
routines).
<p>


<dt><a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>

<dd>Added three new resource called <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChart"><em>gsnXYBarChart</em></a>, <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartBarWidth"><em>gsnXYBarChartBarWidth</em></a>, and <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartOutlineOnly"><em>gsnXYBarChartOutlineOnly</em></a>.  If you set <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChart"><em>gsnXYBarChart</em></a> to True and <a href="Document/Graphics/Resources/gsn.html#gsnYRefLine"><em>gsnYRefLine</em></a> to a reference value, then you will
get a bar going up or down for each Y value (depending on whether it
is greater or less than the reference value), instead of a smooth Y
curve. The default width of each bar is the smallest distance between
consecutive X values. You can change the width with the <a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartBarWidth"><em>gsnXYBarChartBarWidth</em></a> resource.  If you set
<a href="Document/Graphics/Resources/gsn.html#gsnXYBarChartOutlineOnly"><em>gsnXYBarChartOutlineOnly</em></a> to True, then
you will only get the outline of the bars.<p>

Click on <a href="NclScripts/bar.html">bar.ncl</a> to see a
script example, and <a href="https://www.ncl.ucar.edu/Images/bar1.gif">bar1.gif</a>/<a href="https://www.ncl.ucar.edu/Images/bar2.gif">bar2.gif</a> to see example graphics.
<p>


<dt><a href="Document/Graphics/Resources/gsn.html#gsnSpreadColorStart"><em>gsnSpreadColorStart</em></a><BR>
<a href="Document/Graphics/Resources/gsn.html#gsnSpreadColorEnd"><em>gsnSpreadColorEnd</em></a>

<dd>These special attributes were updated to allow you to reverse the
order of the color indices spanned. Click on <a href="Document/Manuals/Getting_Started/Scripts/spread_colors_rev.html">spread_colors_rev.ncl</a>
to see a script example, and <a href="Document/Manuals/Getting_Started/Images/spread_colors_rev.gif">spread_colors_rev.gif</a>
to see an example graphic.
<p>

<dt><a href="Applications/BasicExamples/TickMark/tm04.html">tm04n</a>

<dd>Added a long-lost TickMark example (it uses object-oriented code).
<p>

<dt>polar stereographic plots bug

<dd>Fixed an elusive bug in the drawing of polar stereographic plots
that would sometimes cause the error messages:

<pre>
  fatal:ContourPlotDraw: ARSCAM/ARPRAM - ALGORITHM FAILURE
  fatal:ContourPlotDraw: draw error
  fatal:ContourPlotDraw: draw error
  fatal:PlotManagerDraw: error in plot draw
  fatal:_NhlPlotManagerDraw: Draw error
</pre>

to appear, and the plot wouldn't get drawn.
<p>

<dt><a href="Document/Functions/Built-in/fbindirread.html"><strong>fbindirread</strong></a>

<dd>Fixed a problem that only occurred when the file being read was an
exact multiple of the blocksize.
<p>

<dt><a href="Document/Functions/Built-in/specx_anal.html"><strong>specx_anal</strong></a>, <a href="Document/Functions/Built-in/specxy_anal.html"><strong>specxy_anal</strong></a>

<dd>Fixed a bug in the way the attributes <i>frq</i>, <i>spcx</i>,
<i>spcy</i>, <i>coher</i>, <i>quspc</i>, <i>cospc</i>, and
<i>phase</i> are returned from these functions.
<p>

<dt>NCL arrays

<dd>Fixed a bug that would limit the number of elements that could be used
in a single dimension of an array. The cut-off was around 2^23
elements.

</dl>
		
<a name="a019"></a>
<a name="4.2.0.a019"></a>
<hr><hr>

<h2>Version 4.2.0.a019</h2>
<h3>12 June 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/center_finite_diff.html"><strong>center_finite_diff</strong></a>
<dd>Updated to allow <i>r</i> to be multi-dimensional
<p>


<dt><a href="Document/Functions/Built-in/grid2triple.html"><strong>grid2triple</strong></a>

<dd>Converts a 2D grid with 1D coordinate
variables to a 3D array where each grid value is
associated with its coordinates
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_xy.html"><strong>gsn_csm_xy</strong></a>

<dd>Updated so that if the X or Y data has units of "degrees_east" or
"degrees_north", then the corresponding axis will be labeled with
"nice" latitude and/or longitude labels.
<p>

<dt><a href="Document/Functions/Built-in/wavelet.html"><strong>wavelet</strong></a>

<dd>Computes the wavelet transform of a time series, and significance
levels.
<p>

<dt>Labelbar display

<dd>A bug was fixed that caused the labelbar to sometimes not display
the correct levels if "cnLevels" was set explicitly.

</dl>

<a name="a018"></a>
<a name="4.2.0.a018"></a>
<hr><hr>

<h2>Version 4.2.0.a018</h2>
<h3>14 May 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/int2p.html"><strong>int2p</strong></a>
<dd>Updated so input pressure arrays can be 1D or multi-dimensional
<p>

<dt><a href="Document/Functions/Built-in/inverse_matrix.html"><strong>inverse_matrix</strong></a>
<dd>Computes the inverse of a general matrix using the LU
factorization
<p>

<dt><a href="Document/Functions/Built-in/paleo_outline.html"><strong>paleo_outline</strong></a>
<dd>Creates coastal outlines from model orography data for use in
paleogeographic plots
<p>

<dt><a href="Document/Functions/Built-in/pres_sigma.html"><strong>pres_sigma</strong></a>

<dd>Calculates the pressure at specified sigma levels 
<p>


<dt><a href="Document/Functions/Built-in/solve_linsys.html"><strong>solve_linsys</strong></a>
<dd>Computes the solution to a real system of linear equations
<p>

<dt><a href="Document/Functions/Built-in/taper.html"><strong>taper</strong></a>
<dd>Applies split-cosine-bell tapering to one or more series

</dl>

<a name="a017"></a>
<a name="4.2.0.a017"></a>
<hr><hr>

<h2>Version 4.2.0.a017</h2>
<h3>2 April 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>
<dt><a href="Document/Graphics/Interfaces/gsn_histogram.html"><strong>gsn_histogram</strong></a>

<dd>Draws a histogram plot.  You must load gsn_code.ncl in order to
have access to this function.
<p>

<dt><a href="Document/Functions/Built-in/zonal_mpsi.html"><strong>zonal_mpsi</strong></a>
<dd>Computes a zonal mean meridional stream function using a modified
definition of the CCM Processor zonal mean meridional stream
function.

</dl>

<p>

<a name="a016"></a>
<a name="4.2.0.a016"></a>
<hr><hr>

<h2>Version 4.2.0.a016</h2>
<h3>16 March 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/dsgrid2.html"><strong>dsgrid2</strong></a>, <a href="Document/Functions/Built-in/dsgrid3.html"><strong>dsgrid3</strong></a>

<dd>Interpolates 2D/3D random data to a rectangular grid using simple
inverse distance weighted interpolation. These are generic versions of
dsgrid2s/dsgrid2d/dsgrid3s/dsgrid3d.
<p>

<dt><a href="Document/Functions/Built-in/filwgts_lancos.html"><strong>filwgts_lancos</strong></a>
<dd>Calculates 1D filter weights
<p>

<dt><a href="Document/Functions/Built-in/esccr.html"><strong>esccr</strong></a>
<dd>A bug was fixed that only occurred when either series had one or
more missing values *and* lagged cross-correlations were
calculated. The error is believed to have been introduced in April
2000.<p>

Specifically:
<ol> 

<li>if no missing values were present (eg: model output) then all
cross-correlations are correct.
        
<li>cross-correlations between series at lag zero are correct even if
missing values were present. (ie, the straight cross-correlation
coefficient is correct.)
        
<li>the results are incorrect when missing values are present, and
cross-correlations at lags greater than zero were computed.
</ol> 
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_draw_colormap.html"><strong>gsn_draw_colormap</strong></a>

<dd>Draws the current color map (useful for debugging purposes). You
must have this version of NCL and load gsn_code.ncl in order to have
access to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_merge_colormaps.html"><strong>gsn_merge_colormaps</strong></a>

<dd>Merges two color maps into one color map.  You must have at least
this version of NCL and load gsn_code.ncl in order to have access to
this function.

<p>

<dt><a href="Document/Functions/Built-in/int2p.html"><strong>int2p</strong></a>
<dd>Updated so that the input pressure levels can be in either
decreasing or increasing order

<p>

<dt><a href="Document/Functions/Built-in/natgrid.html"><strong>natgrid</strong></a>
<dd>Interpolates 2D random data to a rectangular grid using natural
neighbor interpolation. This is a generic version of natgrids/natgridd.<p>


<dt><a href="Document/Functions/Built-in/nngetwts.html"><strong>nngetwts</strong></a>, <a href="Document/Functions/Built-in/nngetwtsd.html"><strong>nngetwtsd</strong></a>
<dd>Retrieves natural neighbors and weights for the function values at
those neighbors


</dl>
<p>

<a name="a015"></a>
<a name="4.2.0.a015"></a>
<hr><hr>

<h2>Version 4.2.0.a015</h2>
<h3>14 February 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/conform.html"><strong>conform</strong></a>
<dd>Expands a 1D array so that it conforms to the shape
of another variable
<p>

<dt><a href="Document/Functions/Built-in/dim_min.html"><strong>dim_min</strong></a>, <a href="Document/Functions/Built-in/dim_max.html"><strong>dim_max</strong></a>

<dd>A bug was fixed that caused these functions to fail if the input
didn't contain a missing value attribute (_FillValue).
<p>

<dt>
<a href="Document/Functions/Built-in/dv2uvf.html"><strong>dv2uvf</strong></a>, <a href="Document/Functions/Built-in/dv2uvg.html"><strong>dv2uvg</strong></a>,
<a href="Document/Functions/Built-in/gradsf.html"><strong>gradsf</strong></a>, <a href="Document/Functions/Built-in/gradsg.html"><strong>gradsg</strong></a>,
<a href="Document/Functions/Built-in/igradsf.html"><strong>igradsf</strong></a>, <a href="Document/Functions/Built-in/igradsg.html"><strong>igradsg</strong></a>,
<a href="Document/Functions/Built-in/igradsF-1.html"><strong>igradsF</strong></a>, <a href="Document/Functions/Built-in/igradsG-1.html"><strong>igradsG</strong></a>,
<a href="Document/Functions/Built-in/ilapsf.html"><strong>ilapsf</strong></a>, <a href="Document/Functions/Built-in/ilapsg.html"><strong>ilapsg</strong></a>,
<a href="Document/Functions/Built-in/ilapsF-1.html"><strong>ilapsF</strong></a>, <a href="Document/Functions/Built-in/ilapsG-1.html"><strong>ilapsG</strong></a>,
<a href="Document/Functions/Built-in/ilapvf.html"><strong>ilapvf</strong></a>, <a href="Document/Functions/Built-in/ilapvg.html"><strong>ilapvg</strong></a>,
<a href="Document/Functions/Built-in/lapsf.html"><strong>lapsf</strong></a>, <a href="Document/Functions/Built-in/lapsg.html"><strong>lapsg</strong></a>,
<a href="Document/Functions/Built-in/lapvf.html"><strong>lapvf</strong></a>, <a href="Document/Functions/Built-in/lapvg.html"><strong>lapvg</strong></a>,
<a href="Document/Functions/Built-in/lderuvf.html"><strong>lderuvf</strong></a>, <a href="Document/Functions/Built-in/lderuvg.html"><strong>lderuvg</strong></a>,
<a href="Document/Functions/Built-in/uv2dvf.html"><strong>uv2dvf</strong></a>, <a href="Document/Functions/Built-in/uv2dvg.html"><strong>uv2dvg</strong></a>,
<a href="Document/Functions/Built-in/uv2dvF-1.html"><strong>uv2dvF</strong></a>, <a href="Document/Functions/Built-in/uv2dvG-1.html"><strong>uv2dvG</strong></a>,
<a href="Document/Functions/Built-in/uv2sfvpf.html"><strong>uv2sfvpf</strong></a>, <a href="Document/Functions/Built-in/uv2sfvpg.html"><strong>uv2sfvpg</strong></a>,
<a href="Document/Functions/Built-in/uv2vrdvf.html"><strong>uv2vrdvf</strong></a>, <a href="Document/Functions/Built-in/uv2vrdvf.html"><strong>uv2vrdvf</strong></a>,
<a href="Document/Functions/Built-in/uv2vrf.html"><strong>uv2vrf</strong></a>, <a href="Document/Functions/Built-in/uv2vrg.html"><strong>uv2vrg</strong></a>,
<a href="Document/Functions/Built-in/uv2vrF-1.html"><strong>uv2vrF</strong></a>, <a href="Document/Functions/Built-in/uv2vrG-1.html"><strong>uv2vrG</strong></a>,
<a href="Document/Functions/Built-in/vr2uvf.html"><strong>vr2uvf</strong></a>, <a href="Document/Functions/Built-in/vr2uvg.html"><strong>vr2uvg</strong></a>,
<a href="Document/Functions/Built-in/vrdv2uvf.html"><strong>vrdv2uvf</strong></a>, <a href="Document/Functions/Built-in/vrdv2uvg.html"><strong>vrdv2uvg</strong></a>

<dd>Updated so that each 2D lat/lon array that comes in is
individually checked for missing values. If missing values are found,
then interpolation is skipped only for that lat/lon subsection.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_streamline_contour_map_ce.html"><strong>gsn_csm_streamline_contour_map_ce</strong></a>

<dd>Draws streamlines and contours over a cylindrical equidistant map
projection. You must have at least this version of NCL and load both
gsn_code.ncl and gsn_csm.ncl in order to have access to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_streamline_contour_map_polar.html"><strong>gsn_csm_streamline_contour_map_polar</strong></a>
<dd>Draws streamlines and contours over a polar stereographic map
projection. You must have at least this version of NCL and load both
gsn_code.ncl and gsn_csm.ncl in order to have access to this function.
<p>

<dt><a href="Document/Graphics/Interfaces/gsn_csm_streamline_map_polar.html"><strong>gsn_csm_streamline_map_polar</strong></a> <dd>Draws
streamlines over a polar stereographic map projection. You must have
at least this version of NCL and load both gsn_code.ncl and
gsn_csm.ncl in order to have access to this function.
<p>

<dt><a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>
<dd>Updated so that the <i>phis</i> array can be 2D or 3D<p>

<dt>New colormaps

<dd>Two more pre-defined color maps were added in this version,
<a href="Document/Graphics/ColorTables/Images/rainbow%2bgray.png">rainbow+gray</a>
and <a href="Document/Graphics/ColorTables/Images/rainbow%2bwhite%2bgray.png">rainbow+white+gray</a>. Click
on the <a href="Document/Graphics/color_table_gallery.html">color
table gallery</a> to see a table of all the available color
maps.
<p>

</dl>

<a name="a014"></a>
<a name="4.2.0.a014"></a>
<hr><hr>

<h2>Version 4.2.0.a014</h2>
<h3>2 January 2001</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/dim_gbits.html"><strong>dim_gbits</strong></a>
<dd>Unpacks bit chunks from the rightmost dimension of the input array
<p>

<dt><a href="Document/Functions/Built-in/gaus_lobat.html"><strong>gaus_lobat</strong></a>
<dd>Computes gaussian latitudes and weights using Gauss-Lobatto quadrature
<p>

<dt><a href="Document/Functions/Built-in/gaus_lobat_wgt.html"><strong>gaus_lobat_wgt</strong></a>
<dd>Computes Gauss-Lobatto weights given a 1D array of
Gauss-Lobatto latitudes
<p>

<dt><a href="Document/Functions/Built-in/getbitsone.html"><strong>getbitsone</strong></a>
<dd>Unpacks one-bit chunks from the input array
<p>

<dt><a href="Document/Functions/Built-in/linrood_latwgt.html"><strong>linrood_latwgt</strong></a>
<dd>Computes the latitudes and weights used by the Lin-Rood Model
<p>

<dt><a href="Document/Functions/Built-in/linrood_wgt.html"><strong>linrood_wgt</strong></a>
<dd>Computes the weights used by the Lin-Rood Model<p>


<dt>Ngmath routines

<dd>Updated many of the Ngmath interpolation routines to accept
multi-dimensional input (<a href="Document/Functions/Built-in/csa1s.html"><strong>csa1s</strong></a>,
<a href="Document/Functions/Built-in/csa1xs.html"><strong>csa1xs</strong></a>, <a href="Document/Functions/Built-in/csa2ls.html"><strong>csa2ls</strong></a>,
<a href="Document/Functions/Built-in/csa2lxs.html"><strong>csa2lxs</strong></a>, <a href="Document/Functions/Built-in/csa2s.html"><strong>csa2s</strong></a>,
<a href="Document/Functions/Built-in/csa2xs.html"><strong>csa2xs</strong></a>, <a href="Document/Functions/Built-in/csa3ls.html"><strong>csa3ls</strong></a>,
<a href="Document/Functions/Built-in/csa3lxs.html"><strong>csa3lxs</strong></a>, <a href="Document/Functions/Built-in/csa3s.html"><strong>csa3s</strong></a>,
<a href="Document/Functions/Built-in/csa3xs.html"><strong>csa3xs</strong></a>, <a href="Document/Functions/Built-in/dsgrid2s.html"><strong>dsgrid2s</strong></a>,
<a href="Document/Functions/Built-in/dsgrid2d.html"><strong>dsgrid2d</strong></a>, <a href="Document/Functions/Built-in/dsgrid3s.html"><strong>dsgrid3s</strong></a>,
<a href="Document/Functions/Built-in/dsgrid3d.html"><strong>dsgrid3d</strong></a>, <a href="Document/Functions/Built-in/ftcurv.html"><strong>ftcurv</strong></a>,
<a href="Document/Functions/Built-in/ftcurvd.html"><strong>ftcurvd</strong></a>, <a href="Document/Functions/Built-in/ftcurvi.html"><strong>ftcurvi</strong></a>,
<a href="Document/Functions/Built-in/ftcurvp.html"><strong>ftcurvp</strong></a>, <a href="Document/Functions/Built-in/ftcurvpi.html"><strong>ftcurvpi</strong></a>,
<a href="Document/Functions/Built-in/ftcurvps.html"><strong>ftcurvps</strong></a>, <a href="Document/Functions/Built-in/ftcurvs.html"><strong>ftcurvs</strong></a>,
<a href="Document/Functions/Built-in/natgrids.html"><strong>natgrids</strong></a>, <a href="Document/Functions/Built-in/natgridd.html"><strong>natgridd</strong></a>)
<p>

<dt><a href="Document/Functions/Built-in/prcwater_dp.html"><strong>prcwater_dp</strong></a>
<dd>Computes column precipitable water <p>


<dt><a href="Document/Functions/Built-in/vibeta.html"><strong>vibeta</strong></a>
<dd>The input pressure levels may now be a multi-dimensional array

</dl>

<p>

<a name="a013"></a>
<a name="4.2.0.a013"></a>
<hr><hr>

<h2>Version 4.2.0.a013</h2>
<h3>8 November 2000</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>
<dd>Updated to have a default list type of "cat" rather than "join"
<p>

<dt><a href="Document/Functions/Built-in/pop_remap.html"><strong>pop_remap</strong></a>
<dd>Performs a first order remap from one grid to another using
weights, source addresses and destination addresses from the Spherical
Coordinate Remapping and Interpolation Package
</dl>

<p>

<a name="a012"></a>
<a name="4.2.0.a012"></a>
<hr><hr>

<h2>Version 4.2.0.a012</h2>
<h3>30 October 2000</h3><p>

<b>Functions/procedures added or updated</b>
<p>

<dl>
<dt><a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>
<dd>References multiple data files in supported formats (".nc",".hdf",
".grb",".ccm") and provides the user with the ability to access data
spanning multiple files
<p>

<dt><a href="Document/Functions/Built-in/dim_pqsort.html"><strong>dim_pqsort</strong></a>
<dd>Returns one or more permutation vector(s) generated by sorting the
n-1 (rightmost) dimension
<p>

<dt><a href="Document/Functions/Built-in/fourier_info.html"><strong>fourier_info</strong></a>
<dd>Performs fourier analysis on one or more periodic series and
returns the amplitude, phase and percent variance explained for each
harmonic<p>


<dt><a href="Document/Graphics/Interfaces/gsn_add_polygon.html"><strong>gsn_add_polygon</strong></a><BR><a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a><BR><a href="Document/Graphics/Interfaces/gsn_add_polymarker.html"><strong>gsn_add_polymarker</strong></a>

<dd>These functions were updated to allow missing values. For <a href="Document/Graphics/Interfaces/gsn_add_polygon.html"><strong>gsn_add_polygon</strong></a> and <a href="Document/Graphics/Interfaces/gsn_add_polymarker.html"><strong>gsn_add_polymarker</strong></a>, missing values are first
removed, and then the resulting markers/polygon are/is drawn. For
<a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a>, only the
non-missing parts of the line are drawn.<p>


<dt><a href="Document/Graphics/Interfaces/gsn_add_text.html"><strong>gsn_add_text</strong></a>

<dd>Attaches text to a given plot. Using this function allows you to
panel text strings (as you weren't able to do with <a href="Document/Graphics/Interfaces/gsn_text.html"><strong>gsn_text</strong></a>). For a simple example, see the
script <a href="Document/Manuals/Getting_Started/Scripts/gsn_add_text.html">gsn_add_text.ncl</a> and
<a href="Document/Manuals/Getting_Started/Images/gsn_add_text.gif">its
output</a>.<p>


<dt><a href="Document/Graphics/Interfaces/gsn_panel.html"><strong>gsn_panel</strong></a>

<dd>Updated to add a new resource called <a href="Document/Graphics/Resources/gsn.html#gsnPanelRowSpec"><em>gsnPanelRowSpec</em></a>, whose default is False.  If you
set this resource to True, then instead of specifying the number of
rows x columns you want for your paneled plots, you specify the number
of plots per row.  For an example, see example 11 in the <a href="Applications/panel.html">panel plots</a> applications
pages.<p>


<dt><a href="Document/Functions/Built-in/ListGetType.html"><strong>ListGetType</strong></a>
<dd>Specifies the manner in which a variable of type "list" is to be
used (use in conjunction with <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>)<p>


<dt><a href="Document/Functions/Built-in/ListSetType.html"><strong>ListSetType</strong></a>
<dd>Specifies the manner in which a variable of type "list" is to be
used (use in conjunction with <a href="Document/Functions/Built-in/addfiles.html"><strong>addfiles</strong></a>)<p>


<dt><a href="Document/Functions/Built-in/nice_mnmxintvl.html"><strong>nice_mnmxintvl</strong></a>
<dd>Calculates "nice" values for endpoints and spacing to be used for
creating a series of equally-spaced levels through the data domain<p>


<dt><a href="Document/Functions/Built-in/sprinti.html"><strong>sprinti</strong></a>
<dd>Converts an array of integers into an array of formatted strings<p>


<dt><a href="Document/Functions/Built-in/uv2dv_cfd.html"><strong>uv2dv_cfd</strong></a>
<dd>Computes divergence for a latitude-longitude grid using centered
finite differences (missing values allowed)<p>


<dt><a href="Document/Functions/Built-in/uv2vr_cfd.html"><strong>uv2vr_cfd</strong></a>
<dd>Computes relative vorticity for a latitude-longitude grid using centered
finite differences (missing values allowed)

</dl>

<p>

<a name="a011"></a>
<a name="4.2.0.a011"></a>
<hr><hr>

<h2>Version 4.2.0.a011</h2>
<h3>28 August 2000</h3><p>

<b>Email list</b><p>

We created an email list called "ncl-talk" for NCL users to exchange
ideas and information.  To learn more about this email list, see the
archived messages, or to subscribe, go to <a href="Support/email_lists.html">email lists</a>.<p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a>

<dd>If a variable from a CCM file that was read in with
<a href="Document/Functions/Built-in/addfile.html"><strong>addfile</strong></a> doesn't have a "long_name" attribute
associated with it, then "long_name" will be set to the name of the
variable.
<p>

<dt><a href="Document/Functions/Built-in/angmom_atm.html"><strong>angmom_atm</strong></a>
<dd>Calculates the atmosphere's relative angular momentum
<p>

<dt><a href="Document/Functions/Built-in/betainc.html"><strong>betainc</strong></a>
<dd>Evaluates the incomplete beta function; often used to determine
probabilities<p>


<dt><a href="Document/Functions/Built-in/chiinv.html"><strong>chiinv</strong></a>
<dd>Evaluates the inverse chi-squared distribution function
<p>

<dt><a href="Document/Functions/Built-in/dpres_hybrid_ccm.html"><strong>dpres_hybrid_ccm</strong></a>

<dd>Calculates the pressure differences at the given hybrid levels
<p>

<dt><a href="Document/Functions/Built-in/equiv_sample_size.html"><strong>equiv_sample_size</strong></a>
<dd>Estimates the "equivalent sample size" of a series of observations
which may have significant positive autocorrelation<p>


<dt><a href="Document/Functions/Built-in/ftest.html"><strong>ftest</strong></a>
<dd>Applies F-test for variances and returns an estimate of the
statistical significance<p>


<dt><a href="Document/Functions/Built-in/pres_hybrid_ccm.html"><strong>pres_hybrid_ccm</strong></a>
<dd>Calculates the pressure [Pa] at the given hybrid levels<p>
<p>

<dt><a href="Document/Functions/Built-in/rtest.html"><strong>rtest</strong></a>

<dd>Determines the statistical significance of a linear correlation
coefficient<p>

<dt><a href="Document/Functions/Built-in/ttest.html"><strong>ttest</strong></a>
<dd>Student's t-test for difference between means; returns an estimate
of the statistical significance and, optionally, the
t-values.<p>

<dt><a href="Document/Functions/Built-in/wgt_arearmse.html"><strong>wgt_arearmse</strong></a>

<dd>Calculates a weighted area average root-mean-square difference
(rmse) between two variables<p>

<dt><a href="Document/Functions/Built-in/wgt_volave_ccm.html"><strong>wgt_volave_ccm</strong></a>

<dd>Calculates the volume average of a quantity from the CCM using
weights<p>

<dt><a href="Document/Functions/Built-in/wgt_volrmse.html"><strong>wgt_volrmse</strong></a>
<dd>Calculates a weighted volume average root-mean-square difference
(rmse) between two variables

</dl>
<p>

Climate divisions were added to the map database. To see an NCL
example that draws all of the climate divisions in the United States,
see the script <a href="NclScripts/climate.html">climate.ncl</a> and its output
(<a href="https://www.ncl.ucar.edu/Images/climate1.gif">frame 1</a> and <a href="https://www.ncl.ucar.edu/Images/climate2.gif">frame 2</a>).<p>

<a name="a010"></a>
<a name="4.2.0.a010"></a>
<hr><hr>

<h2>Version 4.2.0.a010</h2>
<h3>31 July 2000</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>
<dt><a href="Document/Functions/Built-in/center_finite_diff.html"><strong>center_finite_diff</strong></a>
<dd>Performs a centered finite difference operation <p>


<dt><a href="Document/Functions/Built-in/dim_stat4.html"><strong>dim_stat4</strong></a>
<dd>Calculates the first four moments (average, variance, skewness, and
kurtosis) for dimension n-1 at all other indexes <p>


<dt><a href="Document/Functions/Built-in/gc_latlon.html"><strong>gc_latlon</strong></a>

<dd>Calculates the great circle distance between two points on the
surface of the globe. It also returns a user specified number of
lat/lon coordinate pairs along the great circle path <p>


<dt><a href="Document/Graphics/Interfaces/gsn_add_polygon.html"><strong>gsn_add_polygon</strong></a>

<dd>Attaches a polygon to a given plot. Using this function allows you
to panel polygons (as you weren't able to do with <a href="Document/Graphics/Interfaces/gsn_polygon.html"><strong>gsn_polygon</strong></a>). You must have at least this
version of NCL and load gsn_code.ncl in order to have access to this
function.<p>

<dt><a href="Document/Graphics/Interfaces/gsn_add_polyline.html"><strong>gsn_add_polyline</strong></a>

<dd>Attaches a polyline to a given plot. Using this function allows
you to panel polylines (as you weren't able to do with <a href="Document/Graphics/Interfaces/gsn_polyline.html"><strong>gsn_polyline</strong></a>).  You must have at least this
version of NCL and load gsn_code.ncl in order to have access to this
function.<p>


<dt><a href="Document/Graphics/Interfaces/gsn_add_polymarker.html"><strong>gsn_add_polymarker</strong></a>

<dd>Attaches polymarkers to a given plot. Using this function allows
you to panel polymarkers (as you weren't able to do with <a href="Document/Graphics/Interfaces/gsn_polymarker.html"><strong>gsn_polymarker</strong></a>).  You must have at least this
version of NCL and load gsn_code.ncl in order to have access to this
function.<p>

<dt><a href="Document/Functions/Built-in/linint2_points.html"><strong>linint2_points</strong></a>
<dd>Interpolates from a grid to arbitrarily specified coordinate pairs
using bilinear interpolation <p>

<dt><a href="Document/Functions/Built-in/vinth2p_ecmwf.html"><strong>vinth2p_ecmwf</strong></a>
<dd>Calculates vertical interpolation (optionally, extrapolation) from
hybrid coordinates to pressure levels (interpolation of temperature
and geopotential below ground) 

</dl>
<p>

<a name="a009"></a>
<a name="4.2.0.a009"></a>
<hr><hr>

<h2>Version 4.2.0.a009</h2>
<h3>12 June 2000</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/dtrend_msg.html"><strong>dtrend_msg</strong></a>
<dd>Removes the least squares linear trend and estimates of the linear
trend at all grid points (missing data allowed) <p>


<dt><a href="Document/Functions/Built-in/dtrend.html"><strong>dtrend</strong></a>

<dd>Removes the least squares linear trend and estimates of the linear
trend at all grid points (missing data not allowed) (updated to return
attribute <i>y_intercept</i>)<p>

<dt><a href="Document/Functions/Built-in/eofcor_pcmsg.html"><strong>eofcor_pcmsg</strong></a>
<dd>Calculates empirical orthogonal functions via the correlation
matrix<BR> (user can specify percent of non-missing data required)<p>

<dt><a href="Document/Functions/Built-in/eofcov_pcmsg.html"><strong>eofcov_pcmsg</strong></a>
<dd>Calculates empirical orthogonal functions via the covariance matrix
(user can specify percent of non-missing data required) <p>


<dt><a href="Document/Functions/Built-in/escorc.html"><strong>escorc</strong></a>
<dd>Calculates cross-correlation between two variables <p>

<dt><a href="Document/Functions/Built-in/ezfftf.html"><strong>ezfftf</strong></a>, <a href="Document/Functions/Built-in/ezfftb.html"><strong>ezfftb</strong></a>
<dd>Calculates Fourier coefficients of a real periodic sequence
(Fourier analysis) and vice versa (updated to allow multiple leftmost
dimensions)<p>

<dt><a href="Document/Functions/Built-in/linint1.html"><strong>linint1</strong></a>
<dd>Interpolates from one series to another using piecewise linear
interpolation <p>

<dt><a href="Document/Functions/Built-in/linint2.html"><strong>linint2</strong></a>
<dd>Interpolates from one grid to another using bilinear 
interpolation 
<p>

<dt><a href="Document/Functions/Built-in/local_max.html"><strong>local_max</strong></a>
<dd>Calculates relative local maxima of a 2D array 
<p>

<dt><a href="Document/Functions/Built-in/local_min.html"><strong>local_min</strong></a>
<dd>Calculates relative local minima of a 2D array 
<p>

<dt><a href="Document/Functions/Built-in/new.html"><strong>new</strong></a>

<dd>Updated to allow the <TT>type</TT> argument to be a string; for
example, that which is returned by the <a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a>
function:<BR>

<pre>
    xnew = <a href="Document/Functions/Built-in/new.html"><strong>new</strong></a>( <a href="Document/Functions/Built-in/dimsizes.html"><strong>dimsizes</strong></a>(x), <a href="Document/Functions/Built-in/typeof.html"><strong>typeof</strong></a>(x) )
</pre>
<p>

<dt><a href="Document/Functions/Built-in/regCoef-1.html"><strong>regCoef</strong></a>
<dd>Calculates the linear regression coefficient between two
series<BR> (exact same routine as "regcoef", only you don't need to
allocate<BR> space for output variables) 
<p>

<dt><a href="Document/Functions/Built-in/vhaeC-1.html"><strong>vhaeC</strong></a>

<dd>Vector harmonic analyses (fixed grid) 
<p>

<dt><a href="Document/Functions/Built-in/vhagC-1.html"><strong>vhagC</strong></a>
<dd>Vector harmonic analyses (Gaussian grid) 
<p>

<dt><a href="Document/Functions/Built-in/vhseC-1.html"><strong>vhseC</strong></a>
<dd>Vector spherical harmonic syntheses (fixed grid) 
<p>

<dt><a href="Document/Functions/Built-in/vhsgC-1.html"><strong>vhsgC</strong></a>
<dd>Vector spherical harmonic syntheses (Gaussian grid) 
<p>

<dt><a href="Document/Functions/Built-in/wgt_areaave.html"><strong>wgt_areaave</strong></a>
<dd>Calculates the area average of a quantity using weights 
<p>

<dt><a href="Document/Functions/Built-in/wgt_volave.html"><strong>wgt_volave</strong></a>
<dd>Calculates the volume average of a quantity using weights 
<p>

<dt><a href="Document/Functions/Built-in/wmdrft.html"><strong>wmdrft</strong></a>
<dd>Draws weather fronts (<a href="https://www.ncl.ucar.edu/Images/wmap1.gif">example</a>) 

</dl>
<p>

<a name="a008"></a>
<a name="4.2.0.a008"></a>
<hr><hr>

<h2>Version 4.2.0.a008</h2>
<h3>18 January 2000</h3><p>

<dl>

<dt><a href="Document/Functions/Built-in/dim_median.html"><strong>dim_median</strong></a>
<dd>Finds median for dimension n-1 at all other indexes
<p>

<dt><a href="Document/Functions/Built-in/dim_rmvmean.html"><strong>dim_rmvmean</strong></a>

<dd>Removes the mean of the n-1 dimension
<p>

<dt><a href="Document/Functions/Built-in/dim_rmvmed.html"><strong>dim_rmvmed</strong></a>
<dd>Removes the median of the n-1 dimension
<p>

<dt><a href="Document/Functions/Built-in/dim_standardize.html"><strong>dim_standardize</strong></a>
<dd>Removes the mean and standardizes all elements of the n-1 dimension
<p>

<dt><a href="Document/Functions/Built-in/eof_varimax.html"><strong>eof_varimax</strong></a>
<dd>Rotates the component loadings using Kaiser row normalization and
using the varimax criterion<p>


<dt><a href="Document/Functions/Built-in/greg2jul.html"><strong>greg2jul</strong></a>
<dd>Returns the Julian day, given the year, month, day, and hour

</dl>
<p>

<a name="a007"></a>
<a name="4.2.0.a007"></a>
<hr><hr>

<h2>Version 4.2.0.a007</h2>
<h3>6 December 1999</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt>
<a href="Document/Functions/Built-in/ftsurf.html"><strong>ftsurf</strong></a>
<dd>Calculates an interpolatory surface passing through a rectangular
grid of function values, (updated to allow input of greater than 2
dimensions)<p>


<dt><a href="Document/Functions/Built-in/rhomb_trunC-1.html"><strong>rhomb_trunC</strong></a>, <a href="Document/Functions/Built-in/rhomb_trunc.html"><strong>rhomb_trunc</strong></a>
<dd>Function/procedure for performing rhomboidal truncation on spherical
harmonic coefficients<p>

<dt><a href="Document/Functions/Built-in/smth9.html"><strong>smth9</strong></a>
<dd>Function for performing nine point local smoothing on a 2D grid
<p>

<dt><a href="Document/Functions/Built-in/tri_trunC-1.html"><strong>tri_trunC</strong></a>, <a href="Document/Functions/Built-in/tri_trunc.html"><strong>tri_trunc</strong></a>
<dd>Function/procedure for performing triangular truncation on spherical
harmonic coefficients

</dl>
<p>

<a name="a006"></a>
<a name="4.2.0.a006"></a>
<hr><hr>

<h2>Version 4.2.0.a006</h2>
<h3>2 November 1999</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/day_of_week.html"><strong>day_of_week</strong></a>
<dd>Returns the day of week, given the year, month, and day of month
(Gregorian calendar)<p>

<dt><a href="Document/Functions/Built-in/greg2jul.html"><strong>greg2jul</strong></a>
<dd>Returns the Julian day, given the year, month, day, and hour<p>

<dt><a href="Document/Functions/Built-in/jul2greg.html"><strong>jul2greg</strong></a>
<dd>Returns the Gregorian date, given the Julian day
<p>

<dt><a href="Document/Functions/Built-in/linmsg.html"><strong>linmsg</strong></a>
<dd>Linearly interpolates to fill in missing values
<p>

<dt><a href="Document/Functions/Built-in/shaeC-1.html"><strong>shaeC</strong></a>
<dd>Spherical harmonic analyses of a scalar (fixed grid) (procedural
version already available)
<p>

<dt><a href="Document/Functions/Built-in/shagC-1.html"><strong>shagC</strong></a>
<dd>Spherical harmonic analyses of a scalar (gaussian grid) (procedural
version already available)<p>

<dt><a href="Document/Functions/Built-in/shseC-1.html"><strong>shseC</strong></a>
<dd>Spherical harmonic syntheses of a scalar (fixed grid) (procedural
version already available)<p>

<dt><a href="Document/Functions/Built-in/shsgC-1.html"><strong>shsgC</strong></a>
<dd>Spherical harmonic syntheses of a scalar (gaussian grid) (procedural
version already available)

</dl>
<p>

<a name="a005"></a>
<a name="4.2.0.a005"></a>
<hr><hr>

<h2>Version 4.2.0.a005</h2>
<h3>29 September 1999</h3><p>

<b>Functions/procedures added or updated</b><p>

<dl>

<dt><a href="Document/Functions/Built-in/shgetnp.html"><strong>shgetnp</strong></a>
<dd>Find nearest points to a given point in 3-space
(part of the <a href="http://www.ncarg.ucar.edu//ngmath/shgrid/shhome.html">Shgrid</a>
package)
<p>

<dt><a href="Document/Functions/Built-in/shgetp.html"><strong>shgetp</strong></a>, <a href="Document/Functions/Built-in/shsetp.html"><strong>shsetp</strong></a>

<dd>Gets/sets values for integer control parameters (part of the
<a href="http://www.ncarg.ucar.edu//ngmath/shgrid/shhome.html">Shgrid</a> package)
<p>

<dt><a href="Document/Functions/Built-in/shgrid.html"><strong>shgrid</strong></a>
<dd>Interpolate 3D random data (part of the <a href="http://www.ncarg.ucar.edu//ngmath/shgrid/shhome.html">Shgrid</a> package)
<p>

<dt>GRIB reader update

<dd>The following attributes were added to GRIB file variables:<p>

<ul>
<li><i>parameter_number</i> - the GRIB PDS parameter indicator
<li><i>grid_number</i> - the GRIB PDS grid indicator
<li><i>level_indicator</i> -  the GRIB PDS level indicator<p>
</ul>

More predefined color maps were added in version 4.2.0.a005. To get a
list of all the available predefined color maps in ncl, type:

<pre>
    <a href="Document/Functions/Built-in/print.html"><strong>print</strong></a>(<a href="Document/Functions/Built-in/NhlPalGetDefined.html"><strong>NhlPalGetDefined</strong></a>)
</pre>

from the NCL command line.  See the <a href="Document/Graphics/color_table_gallery.html">color
table gallery</a> for a table of the available color maps.<p>

To load anyone of these color maps, you can use any one of the
following code snippets.  The color map "rainbow" is being used in
these examples:<p>

<b>Using GSUN calls</b>:<p>

<pre>
  wks = <a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a>("x11","test")
  <a href="Document/Graphics/Interfaces/gsn_define_colormap.html"><strong>gsn_define_colormap</strong></a>(wks,"rainbow")
</pre>

or

<pre>
  type = "x11"
  type@<a href="Document/Graphics/Resources/wk.html#wkColorMap"><em>wkColorMap</em></a> = "rainbow"
  wks = <a href="Document/Graphics/Interfaces/gsn_open_wks.html"><strong>gsn_open_wks</strong></a>(type,"test")
</pre>

<b>Using straight NCL code</b>:<p>

<pre>
  wks = create "workstation" xWorkstationClass
    "<a href="Document/Graphics/Resources/wk.html#wkColorMap"><em>wkColorMap</em></a>" : "rainbow"
  end create
</pre>

</dl>

					</div>

					<p>&nbsp;</p>

		<!-- begin footer -->
		<div id="footer">
		
		<a href="mailto:ncladmin@ucar.edu">Contact the Webmaster</a>



		<!-- end footer -->
		</div>

           <br class="clearboth"/>

	   <!-- end content -->
	</div>
<!-- end wrap -->

</div>
</body>

<!-- Mirrored from www.ncl.ucar.edu/prev_releases.shtml by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 17 May 2025 14:34:16 GMT -->
</html>

